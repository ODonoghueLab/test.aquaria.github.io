(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wrapper"],{"0053":function(t,e,a){},"060d":function(t,e,a){"use strict";a("b895")},"0735":function(t,e,a){"use strict";a("32f3")},"07d6":function(t,e,a){},"08a3":function(t,e,a){"use strict";a("1531")},1380:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"matrix"}},[e("MatrixHeader"),e("LoadingPage"),e("div",{attrs:{id:"container"}})],1)},r=[],s=a("c7eb"),i=a("2909"),o=a("1da1"),c=(a("99af"),a("d81d"),a("b0c0"),a("a434"),a("a4d3"),a("e01a"),a("e9c4"),a("fb6a"),a("13d5"),a("d3b7"),a("ac1f"),a("5319"),a("466d"),a("4de4"),a("4e82"),a("159b"),a("1276"),a("b64b"),a("3ca3"),a("ddb0"),a("bc3a")),l=a.n(c),u=a("9cc6"),d=a("2fdb"),h=a("4360"),p={name:"Matrix",components:{MatrixHeader:u["a"],LoadingPage:d["a"]},data:function(){return{hostname:h["a"].state.url,publicPath:"/",structures:null,totalStructures:0,d3:a("5698"),green:"#7A9D5B",backgroundColour:"#ffffff",x:0,y:15,organismId:"2697049"}},mounted:function(){var t,e=this,a="".concat(window.BACKEND,"/").concat(this.organismId);l()({method:"get",url:a}).then((function(a){t=JSON.parse(a.data.primary_accessions),e.getStructures(e.organismId,t).then((function(t){console.log(t),e.getMatchingStructures(t).then((function(t){e.getProteinSynonyms(t).then((function(t){e.loadShapes(t).then((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}))}))}))})),e.structures=t})),window.addEventListener("resize",this.initialDisplay)},methods:{getResidueSize:function(t,e){return e*t},loadShapes:function(t){var e=this;return Object(o["a"])(Object(s["a"])().mark((function a(){var n,r,o,c,l,u,d,h,p,g,m,f,v,y,b,w,S,_,x;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(t=e.partitionToThree(t),n=0,r=960/Math.max.apply(Math,Object(i["a"])(t.map((function(t){return e.getListSum(t)})))),o=0;o<t.length;o++){for(c=e.d3.select("#container").append("svg").attr("class","row").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 960 360"),e.x=0,e.y=15,l=0,0!==o&&(u=t[o-1],d=u[u.length-1],h=t[o][0],p=Math.floor(h.length/500+1),g=!1,p>3&&(g=!0),m={id:"placeholder",dark:!0,placeholderLarge:g,primary_accession:d.primary_accession,name:d.name,synonym:d.synonym,placeholder:!0},e.drawArrow(c,m,150,20,20/1.5,l,r),e.drawRuler(c,m,n,150,20/1.5,l),l=l+150+20/1.5),f=0;f<t[o].length;f++)v=!1,y=20,b=y/1.5,w=e.getResidueSize(r,t[o][f].length)-b,w<0&&(b=e.getResidueSize(r,t[o][f].length),w=0),e.drawArrow(c,t[o][f],w,y,b,l,r),e.drawRuler(c,t[o][f],n,w,b,l),n=t[o][f].continuous?t[o][f].length:0,e.addNonDarkToFragments(t[o][f]),0!==t[o][f].fragments.length&&(e.y=e.y+33,v=!0),e.drawFragments(c,t[o][f].fragments,r,l),e.drawMatchingStructures(c,t[o][f],w,y,b,l,r),l=l+w+b,v&&(e.y=e.y-33);0!==o&&o!==t.length-1&&(S=t[o+1],_=S[0],x=t[o-1],p=Math.floor(x[x.length-1].length/500+1),g=!1,p>3&&(g=!0),m={id:"placeholder",dark:!0,placeholderLarge:g,primary_accession:_.primary_accession,name:_.name,synonym:_.synonym,placeholder:!0},e.drawArrow(c,m,e.getResidueSize(r,S[0].length)-20/1.5,20,20/1.5,l,r),e.drawRuler(c,m,n,e.getResidueSize(r,S[0].length)-20/1.5,20/1.5,l)),e.drawExpandButton(c)}e.initialDisplay(!1);case 5:case"end":return a.stop()}}),a)})))()},fillData:function(t){var e=[{offset:"0%",color:"black"}];if(t.nonDark){console.log(t.nonDark);for(var a=0;a<t.nonDark.length;a++){var n=t.nonDark[a];e.push({offset:n.Start/t.length*100+"%",color:"black"}),e.push({offset:n.Start/t.length*100+"%",color:this.green}),e.push({offset:n.Stop/t.length*100+"%",color:this.green}),e.push({offset:n.Stop/t.length*100+"%",color:"black"})}}return t.placeholder&&(e=[{offset:"0%",color:"#CCCCCC"}]),e},getNonDarkBetween:function(t,e,a){var n=[];if(t.nonDark)for(var r=0;r<t.nonDark.length;r++)t.nonDark[r].Start<=e&&t.nonDark[r].Stop>=e?n.push({Start:0,Stop:t.nonDark[r].Stop-e}):t.nonDark[r].Start>=e&&t.nonDark[r].Stop<=a?n.push({Start:t.nonDark[r].Start-e,Stop:t.nonDark[r].Stop-e}):t.nonDark[r].Start<=a&&t.nonDark[r].Stop>=a&&n.push({Start:t.nonDark[r].Start-e,Stop:a-e});return n},splitToChunks:function(t,e){for(var a=[],n=e;n>0;n--)a.push(t.splice(0,Math.ceil(t.length/n)));return a},addNonDarkToFragments:function(t){if(t.fragments)for(var e=0;e<t.fragments.length;e++){var a=t.fragments[e];t.fragments[e].nonDark=this.getNonDarkBetween(t,a.Start,a.Stop)}},drawArrow:function(t,e,n,r,s,i,o){var c=this.fillData(e),l=e.id?e.id:e.primary_accession;console.log(l);var u,d=e.description?e.description:e.name;if(c.length>14&&n>300)for(var h=0,p=JSON.parse(JSON.stringify(e.nonDark)),g=Math.floor(c.length/10)>4?Math.floor(c.length/10):4,m=this.splitToChunks(p,g),f=0,v=0;v<m.length;v++){var y=m[v].slice(-1)[0].Stop-f;v===m.length-1&&(y=e.length-f);for(var b=this.getResidueSize(o,y),w=0;w<m[v].length;w++)m[v][w].Start=m[v][w].Start-f,m[v][w].Stop=m[v][w].Stop-f;var S=this.fillData({length:y,nonDark:m[v]});if(t.append("linearGradient").attr("id","grad_partial_"+l+"_"+v).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(S).enter().append("stop").attr("offset",(function(t){return t.offset})).attr("stop-color",(function(t){return t.color})).attr("stop-opacity",1),v===m.length-1){var _=b-s,x=void 0;x=_>0?[this.x,this.y,this.x,this.y+r,this.x+_,this.y+r,this.x+_,this.y+.5*r+s,this.x+_+s,this.y+.5*r,this.x+_,this.y+.5*r-s,this.x+_,this.y]:[this.x,this.y+.5*r-s,this.x,this.y+.5*r+s,this.x+s,this.y+.5*r],t.append("svg:polygon").attr("points",x).attr("fill","url(#grad_partial_"+l+"_"+v+")").attr("id",l).attr("title",l).attr("transform","translate("+(i+h)+",0)").attr("class","arrow").on("mouseover",(function(t,e){var n=a("5698");n.select(this).attr("opacity",".85"),n.selectAll("rect#"+this.id).attr("opacity",".85"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this).attr("opacity","1"),n.selectAll("rect#"+this.id).attr("opacity","1")})).on("click",(function(){var t=a("5698"),e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).append("svg:title").text(d)}else t.append("svg:rect").attr("fill","url(#grad_partial_"+l+"_"+v+")").attr("x",this.x).attr("y",this.y).attr("width",b).attr("height",r).attr("id",l).attr("class","arrow").attr("title",l).attr("transform","translate("+(i+h)+",0)").on("mouseover",(function(t,e){var n=a("5698");n.select(this).attr("opacity",".85"),n.selectAll("rect#"+this.id).attr("opacity",".85"),n.selectAll("polygon#"+this.id).attr("opacity",".85"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this).attr("opacity","1"),n.selectAll("rect#"+this.id).attr("opacity","1"),n.selectAll("polygon#"+this.id).attr("opacity","1")})).on("click",(function(){var t=a("5698"),e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).append("svg:title").text(d);f+=y,h+=b}else t.append("linearGradient").attr("id","grad_"+l).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(c).enter().append("stop").attr("offset",(function(t){return t.offset})).attr("stop-color",(function(t){return t.color})).attr("stop-opacity",1),u=n>0?[this.x,this.y,this.x,this.y+r,this.x+n,this.y+r,this.x+n,this.y+.5*r+s,this.x+n+s,this.y+.5*r,this.x+n,this.y+.5*r-s,this.x+n,this.y]:[this.x,this.y+.5*r-s,this.x,this.y+.5*r+s,this.x+s,this.y+.5*r],t.append("svg:polygon").attr("points",u).attr("fill","url(#grad_"+l+")").attr("id",l).attr("title",l).attr("class","arrow").attr("transform","translate("+i+",0)").on("mouseover",(function(t,e){var n=a("5698");this.style.cursor="pointer",n.select(this).attr("opacity",".85")})).on("mouseout",(function(t,e){var n=a("5698");n.select(this).attr("opacity","1")})).on("click",(function(){var t=a("5698"),e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).append("svg:title").text(d);var A=t.append("text").attr("x",this.x+.5*(n+.5*s)).attr("y",this.y+.5*r).attr("transform","translate("+i+",0)").attr("dy",".35em").style("text-anchor","middle").attr("class","arrow").style("fill","white").text(e.name);if(A.node().getComputedTextLength()>n&&(A.text(e.synonym[0]),A.node().getComputedTextLength()>n)){var C=e.synonym.reduce((function(t,e){return t.length<=e.length?t:e}));C=C.replace("orf","").replace("ORF",""),A.text(C),A.node().getComputedTextLength()>n+.5*s&&(A.attr("y",this.y+1.5*r),A.style("fill",this.green),A.attr("class","rowContent"))}},drawRuler:function(t,e,a,n,r,s){var i=[1,n+r-1];a&&(i=[0,n+r]);var o=this.d3.scale.linear().domain([a,a+e.length]).range(i),c=Math.floor(e.length/500+1);if(c>3||e.placeholderLarge){e.placeholderLarge&&(c=0);var l=t.append("g").attr("transform","translate("+s+","+(this.y-15)+")").attr("style","").style("fill","gray").style("font-size","10px").attr("class","rowContent").call(this.d3.svg.axis().scale(o).tickSize(0,1).tickFormat((function(t,e){return 0===t||t%1e3!==0?" ":t})).orient("bottom").ticks(c));e.placeholder&&l.style("fill","#CCCCCC"),l.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("x2",this.x).attr("y2",0).attr("y1",3).attr("stroke-width","1")}else if(e.length>200||e.placeholder){c=2,e.placeholder&&(c=0);var u=t.append("g").attr("transform","translate("+s+","+(this.y-10)+")").style("fill","gray").attr("class","rowContent").call(this.d3.svg.axis().scale(this.d3.scale.linear().domain([0,1]).range([1,n+r-1])).tickSize(2,1).orient("top").ticks(c).tickFormat(""));u.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("y1",4).attr("y2",-1).attr("stroke-width","1"),e.placeholder&&u.style("fill","#CCCCCC");var d=t.append("text").attr("x",this.x+.5*(n+r)).attr("y",this.y-10).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+s+",0)").style("fill","gray").style("font-size","10px").attr("class","rowContent").text(e.length);t.append("rect","text").datum((function(){return d.node().getBBox()})).attr("x",(function(t){return t.x-2})).attr("y",(function(t){return t.y})).style("fill",this.backgroundColour).attr("transform","translate("+s+",0)").attr("class","rowContent").attr("width",(function(t){return t.width+4})).attr("height",(function(t){return t.height})),d.node().parentNode.appendChild(d.node())}},drawFragments:function(t,e,a,n){for(var r=0;r<e.length;r++){console.log(e);var s={name:e[r].Name,primary_accession:e[r].Primary_Accession,synonym:[e[r].Short_Name].concat(e[r].Short_Name.match(/[0-9]+/g)),Start:e[r].Start,Stop:e[r].Stop,pdb:null,length:e[r].Stop-e[r].Start,id:e[r].Primary_Accession+"_"+e[r].Short_Name,nonDark:e[r].nonDark,description:e[r].Description},i=e[r].Stop-e[r].Start,o=20,c=o/1.5,l=this.getResidueSize(a,i)-c;l<0&&(c=this.getResidueSize(a,i),l=0),(0===r||e[r].Start>=e[r-1].Stop)&&(this.drawArrow(t,s,l,o,c,n,a),n=n+l+c)}},renderImage:function(t,e,n,r,s,i,o){var c=(n<120?n:120)+10,l=e.Start?e.Start:0;if(o){t.append("rect","text").attr("x",.5*n+l).attr("y",this.y+r).style("fill",this.backgroundColour).attr("transform","translate("+(s-c/2)+","+(20+i)+")").attr("width",c).attr("height",200).attr("title",o).on("mouseover",(function(t,e){var n=a("5698");n.select(this).transition().duration(500).style("fill","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this).transition().duration(500).style("fill","white")})).on("click",(function(){var t=a("5698"),e=t.select(this).attr("title");if(e){var n=window.location.origin;window.open(n+"/"+t.select(this).attr("title"))}}));var u=t.append("svg:image").attr("x",.5*n+l).attr("y",this.y+r).attr("transform","translate("+(s-c/2)+","+(20+i)+")").attr("width",c).attr("height",c).style("pointer-events","none");!e.dark&&e.pdb?u.attr("xlink:href","../images/pdb/"+e.pdb+".png"):(u.attr("xlink:href","../images/covid19/unknown-structure_1000.png"),u.style("visibility","hidden"))}},splitLargeGaps:function(t){for(var e=0;e<t.length;e++){var a=t[e];if(a.seq_start.length>1)for(var n=0;n<a.seq_start.length-1;n++)if(a.seq_start[n+1]-a.seq_end[n]>100){var r=JSON.parse(JSON.stringify(a));r.seq_start=a.seq_start.slice(0,n+1),r.seq_end=a.seq_end.slice(0,n+1),t[e].seq_start=a.seq_start.slice(n+1),t[e].seq_end=a.seq_end.slice(n+1),t.push(r);break}}return t},drawMatchingStructures:function(t,e,n,r,s,o,c){var l=this,u=30;if(e.clusters){e.clusters=this.splitLargeGaps(e.clusters),e.clusters=e.clusters.filter((function(t){return t.seq_start[0]>=0})),e.clusters.sort((function(t,e){return t.cluster_size>e.cluster_size?-1:e.cluster_size>t.cluster_size?1:0}));var d=1;while(d<e.clusters.length){var h=0,p=!1;while(h<d&&!p){var g=Math.min.apply(Math,Object(i["a"])(e.clusters[h].seq_start)),m=Math.min.apply(Math,Object(i["a"])(e.clusters[d].seq_start)),f=Math.max.apply(Math,Object(i["a"])(e.clusters[h].seq_end)),v=Math.max.apply(Math,Object(i["a"])(e.clusters[d].seq_end));g<=m&&f>=v?(e.clusters[h].cluster_size+=e.clusters[d].cluster_size,e.clusters.splice(d,1),p=!0):(g>m&&g-m<.9*(v-m)||f<v&&v-f<.9*(v-m))&&(e.clusters[h].cluster_size+=e.clusters[d].cluster_size,e.clusters[h].seq_start=[Math.min(g,m)],e.clusters[h].seq_end=[Math.max(f,v)],e.clusters.splice(d,1),p=!0),h++}p||d++}e.clusters=e.clusters.filter((function(t){return Math.max.apply(Math,Object(i["a"])(t.seq_end))-Math.min.apply(Math,Object(i["a"])(t.seq_start))>20})),e.clusters.forEach((function(n){var s=l.getResidueSize(c,n.seq_start[0]);if(!(n.seq_start<0)){var i=l.getResidueSize(c,n.seq_end[n.seq_end.length-1]);if(!(n.seq_end>e.length)){var d=l.d3.scale.linear().domain([0,2]).range([s+1,i-1]).nice(),h=t.append("g").attr("transform","translate("+o+","+(l.y+r+10)+")").attr("style","").style("fill",l.green).style("font-size","10px").call(l.d3.svg.axis().scale(d).tickSize(0,1).tickFormat("").orient("bottom").ticks(2));l.d3.select(h.selectAll(".tick")[0][1]).attr("stroke",l.green).attr("x1",l.x).attr("x2",l.x).attr("y2",0).attr("y1",u).attr("stroke-width","1");var p=t.append("text").datum((function(){return h.node().getBBox()})).attr("x",(function(t){return t.x+.5*t.width})).attr("y",l.y+r+u+5).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+o+",0)").style("fill","white").style("font-size","12px").text(n.cluster_size).attr("title",e.primary_accession+"/"+n.pdb_id).style("pointer-events","none");t.append("rect","text").datum((function(){return p.node().getBBox()})).attr("x",(function(t){return t.x-4})).attr("y",(function(t){return t.y})).attr("rx",6).attr("ry",10).style("fill",l.green).attr("transform","translate("+o+",0)").attr("width",(function(t){return t.width+8})).attr("height",(function(t){return t.height})).attr("title",e.primary_accession+"/"+n.pdb_id).on("click",(function(){var t=a("5698");console.log(t.select(this).attr("title"));var e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).on("mouseover",(function(){this.style.cursor="pointer"})),p.node().parentNode.appendChild(p.node());var g={name:n.pdb_id,primary_accession:e.primary_accession,Start:s,Stop:i,pdb:n.pdb_id,length:i-s,id:e.primary_accession+"_"+n.pdb_id,nonDark:!0};l.renderImage(t,g,i-s,r,o,u,e.primary_accession+"/"+n.pdb_id)}}}))}else this.renderImage(t,e,n,r,o,u,"")},drawExpandButton:function(t){var e=t.append("svg:rect").attr("x",0).attr("y",0).attr("stroke","#CCCCCC").attr("fill","#CCCCCC").attr("opacity",.8).attr("width",window.innerWidth).attr("height",30).attr("id","expand");window.innerHeight>window.innerWidth&&e.attr("display","none"),e.on("mouseover",(function(t,e){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),e.on("click",(function(t,e){var n=a("5698");if(this.parentNode.className.baseVal.split(" ").indexOf("open")>-1)n.select(this.parentNode).classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0);else{n.selectAll(".open").selectAll("rect#expand").attr("opacity",0),n.selectAll(".open").selectAll("rect#expand").attr("display","block"),n.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),n.selectAll(".open").selectAll("path#expand").attr("opacity",0),n.selectAll(".open").selectAll("path#expand").attr("display","block"),n.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),n.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.select(this.parentNode).classed("open",!0),n.select(this).attr("display","none"),n.select(this.parentNode).selectAll("path#expand").attr("display","none"),n.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),n.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),n.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var r=n.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)n.select(r[0][o]).classed("open")&&(s=!0),s?(n.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,n.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}})),this.renderHalfMoon(t,480,0)},renderHalfMoon:function(t,e,n){var r=this.d3.svg.arc().outerRadius(20).innerRadius(0).startAngle(-Math.PI/2).endAngle(Math.PI/2),s=t.append("path").attr("transform","scale(1, -1) translate("+e+", -"+n+")").attr("d",r()).attr("fill","gray").attr("id","expand").on("mouseover",(function(t,e){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),i=t.append("path").attr("transform","translate("+e+","+n+")").attr("d","M-8 12 0 5 8 12").attr("stroke","#CCCCCC").attr("stroke-width",3).attr("fill","transparent").attr("id","expand").on("mouseover",(function(t,e){var n=a("5698");n.select(this).attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this).attr("stroke","#CCCCCC")}));i.on("click",(function(t,e){var n=a("5698");n.selectAll(".open").selectAll("rect#expand").attr("opacity",0),n.selectAll(".open").selectAll("rect#expand").attr("display","block"),n.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),n.selectAll(".open").selectAll("path#expand").attr("opacity",0),n.selectAll(".open").selectAll("path#expand").attr("display","block"),n.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.select(this.parentNode).classed("open",!0),n.select(this.parentNode).selectAll("rect#expand").attr("display","none"),n.select(this.parentNode).selectAll("path#expand").attr("display","none"),n.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),n.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),n.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var r=n.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)n.select(r[0][o]).classed("open")&&(s=!0),s?(n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,n.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")})),s.on("click",(function(t,e){var n=a("5698");n.selectAll(".open").selectAll("rect#expand").attr("opacity",0),n.selectAll(".open").selectAll("rect#expand").attr("display","block"),n.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),n.selectAll(".open").selectAll("path#expand").attr("opacity",0),n.selectAll(".open").selectAll("path#expand").attr("display","block"),n.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),n.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.select(this.parentNode).classed("open",!0),n.select(this.parentNode).selectAll("rect#expand").attr("display","none"),n.select(this.parentNode).selectAll("path#expand").attr("display","none"),n.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),n.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),n.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var r=n.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)n.select(r[0][o]).classed("open")&&(s=!0),s?(n.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,n.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}))},initialDisplay:function(t){if(window.innerHeight>window.innerWidth)this.d3.selectAll("rect#expand").attr("display","none"),this.d3.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".row").classed("open",!0),this.d3.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));else if(window.innerHeight<.25*window.innerWidth)this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"}));else{var e=this.d3.select(".open");if(this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),t){e.classed("open",!0),e.select("rect#expand").attr("display","none"),e.selectAll("path#expand").attr("display","none"),e.transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),e.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var n=this.d3.selectAll(".row"),r=!1,s=!0,i=0;i<n[0].length;i++)this.d3.select(n[0][i]).classed("open")&&(r=!0),r?(this.d3.select(n[0][i]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),this.d3.select(n[0][i]).select("path#expand:last-child").attr("transform","translate(480,0)")):(s=!1,this.d3.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),this.d3.select(n[0][i]).select("path#expand").attr("transform","translate(480,30)"),this.d3.select(n[0][i]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));s&&this.d3.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}else e=this.d3.select(".row").classed("open",!0),this.d3.select("rect#expand").attr("display","none"),e.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".open").transition().duration(500).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),e.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}))}},partitionToThree:function(t){var e=this.getListSum(t),a=e/3;t.push({name:"newPlaceholderNum",length:a});var n=this.partitionToTwo(t);n[1].pop();var r=this.partitionToTwo(n[0]);return[r[0],r[1],n[1]]},partitionToTwo:function(t){var e=this.getListSum(t),a=t.length-1;while(this.getListSum(t.slice(a))<e/2){if(this.getListSum(t.slice(a-1))>=e/2)break;a--}return[t.slice(0,a),t.slice(a)]},getListSum:function(t){return t.reduce((function(t,e){return t+e.length}),0)},sortStructures:function(t,e){var a=this;return Object(o["a"])(Object(s["a"])().mark((function n(){var r,i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.getPositions(t);case 2:for(r=n.sent,i=0;i<e.length;i++)e[i].position=r[e[i].primary_accession];return e.sort((function(t,e){return t.position-e.position})),n.abrupt("return",e);case 6:case"end":return n.stop()}}),n)})))()},cleanProteins:function(t){var e=this;return Object(o["a"])(Object(s["a"])().mark((function a(){var n,r,i,o,c,l,u,d,h,p,g,m,f;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(n={},t.forEach((function(t){var e=n[t.position];e||(e=n[t.position]=[]),e.push(t)})),r=[],i=1;i<=Object.keys(n).length;i++)1!==n[i].length?function(){var t=void 0;n[i].forEach((function(e){t?e.length>t.length&&(t=e):t=e})),o=t;for(var a=0;a<n[i].length;a++)if(n[i][a].sequence!==t.sequence){for(c=e.findSubstring(n[i][a].sequence,t.sequence),o.sequence=o.sequence.replace(c,""),o.length=o.sequence.length,o.name=o.name+" (split)",n[i][a].continuous=!0,r.push(n[i][a]),o.fragments.length>0&&n[i][a].fragments.forEach((function(t){o.fragments=o.fragments.filter((function(e){return e.Name!==t.Name}))})),l=0;l<o.fragments.length;l++)o.fragments[l].Start=o.fragments[l].Start-n[i][a].length,o.fragments[l].Stop=o.fragments[l].Stop-n[i][a].length,o.fragments[l].Start<0&&(o.fragments[l].Start=0);for(o.fragments=o.fragments.filter((function(t){return t.Start>=0})),u=[],d=0;d<o.nonDark.length;d++)o.nonDark[d].Stop>n[i][a].length&&(h=o.nonDark[d].Start-n[i][a].length,h<0&&(h=0),p=o.nonDark[d].Stop-n[i][a].length,u.push({Primary_Accession:o.primary_accession,Start:h,Stop:p}));if(o.clusters)for(g=0;g<o.clusters.length;g++){for(m=0;m<o.clusters[g].seq_start.length;m++)o.clusters[g].seq_start[m]=o.clusters[g].seq_start[m]-n[i][a].length;for(f=0;f<o.clusters[g].seq_end.length;f++)o.clusters[g].seq_end[f]=o.clusters[g].seq_end[f]-n[i][a].length}o.nonDark=u}o.continuous=!1,r.push(o)}():(n[i][0].continuous=!1,r.push(n[i][0]));return a.abrupt("return",r);case 5:case"end":return a.stop()}}),a)})))()},findSubstring:function(t,e){var a=t.length,n=0;while(n<a&&t.charAt(n)===e.charAt(n))n++;return t.substring(0,n)},getPositions:function(t){return Object(o["a"])(Object(s["a"])().mark((function e(){var a,n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getGenomicPosition/").concat(t),n={},e.next=4,l()({method:"get",url:a}).then((function(t){for(var e=0;e<t.data.length;e++)n[t.data[e].primary_accession]=t.data[e].position_index}));case 4:return 0===Object.keys(n).length&&console.log("cannot get genomic positions of "+t+" in getPositions() Coverage.vue"),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))()},getProteinSynonyms:function(t){var e=this;return Object(o["a"])(Object(s["a"])().mark((function a(){var n,r;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=0;case 1:if(!(n<t.length)){a.next=9;break}return a.next=4,e.getSynonym(t[n].primary_accession);case 4:r=a.sent,t[n].synonym=r;case 6:n++,a.next=1;break;case 9:return a.abrupt("return",t);case 10:case"end":return a.stop()}}),a)})))()},getSynonym:function(t){return Object(o["a"])(Object(s["a"])().mark((function e(){var a,n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getProteinSynonyms/").concat(t),n=[],e.next=4,l()({method:"get",url:a}).then((function(t){t.data.Synonym&&n.push(t.data.Synonym),n=n.concat(t.data.synonyms)}));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},getMatchingStructures:function(t){var e=this;return Object(o["a"])(Object(s["a"])().mark((function a(){var n,r,i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=0;case 1:if(!(n<t.length)){a.next=10;break}return r={selector:[t[n].primary_accession]},console.log(r),i="".concat(window.BACKEND,"/get_matching_structures"),a.next=7,l()({method:"get",url:i,params:r}).then((function(e){console.log(e),"'Dark' protein"===e.data?(t[n].clusters=0,t[n].pdb=null):(t[n].clusters=e.data.clusters,t[n].pdb=e.data.Best_PDB.pdb_id)}));case 7:n++,a.next=1;break;case 10:return a.abrupt("return",e.cleanProteins(t));case 11:case"end":return a.stop()}}),a)})))()},countMatchingStructures:function(t){return 0===t?0:t.reduce((function(t,e){return t+e.members.length}),0)},getNonDarkRegions:function(t){var e=this;return Object(o["a"])(Object(s["a"])().mark((function a(){var n,r;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=0;case 1:if(!(n<t.length)){a.next=10;break}return console.log(t[n].primary_accession),a.next=5,e.getNonDarkCoverage(t[n].primary_accession);case 5:r=a.sent,t[n].nonDark=r;case 7:n++,a.next=1;break;case 10:return a.abrupt("return",t);case 11:case"end":return a.stop()}}),a)})))()},getNonDark:function(t){return Object(o["a"])(Object(s["a"])().mark((function e(){var a,n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getNonDarkRegions/").concat(t),n=[],e.next=4,l()({method:"get",url:a}).then((function(t){t.data&&(n=t.data)}));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},getNonDarkCoverage:function(t){return Object(o["a"])(Object(s["a"])().mark((function e(){var a,n,r,i;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={selector:[t]},n="".concat(window.BACKEND,"/getCoverageMap"),r={},i=[],e.next=6,l()({method:"get",url:n,params:a}).then((function(t){if("'Dark' protein"!==t.data){r=t.data,console.log("nondarK: ",r);for(var e=0;e<r.seq_start.length;e++)i.push({Start:r.seq_start[e],Stop:r.seq_end[e]})}}));case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))()},getStructures:function(t,e){var a=this;return Object(o["a"])(Object(s["a"])().mark((function n(){var r,i,o,c,u;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[],n.next=3,a.sortStructures(t,e);case 3:e=n.sent,o=Object(s["a"])().mark((function t(n){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e[n].count=0,u={selector:[e[n].primary_accession]},i="".concat(window.BACKEND,"/get_3D_alignment"),t.next=5,l()({method:"get",url:i,params:u}).then((function(t){var s="";if(t.data.sequences){s=t.data.sequences[0];var i=s.length;console.log("Loaded ",e[n].synonym,i),r.push({name:e[n].synonym,primary_accession:e[n].primary_accession,sequence:s.sequence,position:e[n].position,length:i})}else s=t.data[e[n].primary_accession],r.push({name:e[n].synonym,primary_accession:e[n].primary_accession,sequence:s.sequence,position:e[n].position,length:s.length});return a.getFragments(e[n].primary_accession)})).then((function(t){r[n].fragments=t}));case 5:case"end":return t.stop()}}),t)})),c=0;case 6:if(!(c<e.length)){n.next=11;break}return n.delegateYield(o(c),"t0",8);case 8:c++,n.next=6;break;case 11:return n.next=13,a.getNonDarkRegions(r);case 13:return r=n.sent,n.abrupt("return",r);case 15:case"end":return n.stop()}}),n)})))()},getFragments:function(t){return Object(o["a"])(Object(s["a"])().mark((function e(){var a,n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getProteinFragments/").concat(t),n=[],e.next=4,l()({method:"get",url:a}).then((function(t){t.data.length>0&&(n=t.data)}));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()}}},g=p,m=(a("6371"),a("2877")),f=Object(m["a"])(g,n,r,!1,null,"69cdfee8",null);e["default"]=f.exports},1438:function(t,e,a){},1531:function(t,e,a){},"20d9":function(t,e,a){t.exports=a.p+"img/search_dark.012aee91.png"},"2a65":function(t,e,a){},"2afc":function(t,e,a){},"2c07":function(t,e,a){t.exports=a.p+"img/aquaria-symbol-01.057e39d9.svg"},"31c8":function(t,e,a){t.exports=a.p+"img/up.64c3e14c.png"},3214:function(t,e,a){"use strict";a("827e")},"32f3":function(t,e,a){},"39b5":function(t,e,a){t.exports=a.p+"img/MS-01.f169151b.svg"},"3b90":function(t,e,a){"use strict";a("2a65")},"3bba":function(t,e,a){},"3f90":function(t,e,a){},"41ff":function(t,e,a){"use strict";a("6db9")},4210:function(t,e,a){"use strict";a("d9f0")},"44da":function(t,e,a){},"4c7a":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAQCAYAAADqDXTRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNq8020KgCAMBmAb0TGDQLyY0Ek6SbcoEHKg0YfWttLBK+iczy8bY8yilOpUvVrBL9rHVQLR0Yhan6EC7IJjIRyUhncQN3BolIJP4BUtAd/AFPonnARzaIT7D7AL8zbVhIfBUQhHcMxdgJcHuPArSEE5MAmkohSYDHLQJ5gFctEUzAYl6BFeJSBWK/yHCE0+s2R4E2AAhOs7b2YKWEMAAAAASUVORK5CYII="},"50b2":function(t,e,a){"use strict";a("d11f")},"590b":function(t,e,a){"use strict";a("f235")},"5d42":function(t,e,a){},"5f92":function(t,e,a){"use strict";a("1438")},6213:function(t,e,a){},"62bc":function(t,e,a){t.exports=a.p+"img/down.7ae68b7a.png"},6371:function(t,e,a){"use strict";a("c127")},"64c8":function(t,e,a){"use strict";a("6b9f")},"6b9f":function(t,e,a){},"6db9":function(t,e,a){},"801d":function(t,e,a){"use strict";a("5d42")},"827e":function(t,e,a){},8281:function(t,e,a){"use strict";a("44da")},8385:function(t,e,a){"use strict";a("3f90")},8673:function(t,e,a){t.exports=a.p+"img/aquaria-loader3.223aec7b.svg"},"89ce":function(t,e,a){"use strict";a("6213")},"8cb2":function(t,e,a){"use strict";a("ead7")},9734:function(t,e,a){"use strict";a("a6f6")},"9c0e":function(t,e,a){"use strict";a("07d6")},"9db5":function(t,e,a){t.exports=a.p+"img/FT-01.e4a6c439.svg"},a3c1:function(t,e,a){"use strict";a("2afc")},a6f5:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGoWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0xMS0wN1QxODo0Njo0OC0wNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjEzNGEyNTEtODFjYy00ZDNjLWJhMmQtY2VhMmM1MGY2YmQxIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZTFkNTMwYWUtYzY2MS0wMjRlLTk1ZTItNTU4ODI4OWU1NTkxIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YjhlNjQyOWMtMjlkZS00NTc2LWEzN2MtMjM4NDJiNGUyZjA5IiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjEiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI3MDAiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI3MDAiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOGU2NDI5Yy0yOWRlLTQ1NzYtYTM3Yy0yMzg0MmI0ZTJmMDkiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDI6NTQtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMTM0YTI1MS04MWNjLTRkM2MtYmEyZC1jZWEyYzUwZjZiZDEiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtMh4BEAAAZoSURBVHja7Z17TNVlGMdPK4FlV3FqIDSJbF0sMqrF2rqRf5i1yrTsvsx1W6Os7LbZ1cxpq2hWFq78x8op5FKbRZOwaFZqm80tS6g0BwYiyOXAOfD2fT0v2xlwgvO87znv8x7eZ/uMjXH5Pb/P77383tsJCCECHj5wuIhjwDgwBRSD2eA+MBfMAdNAATgNHOeFJIYMUAjuB6VgHagBf4B/QRtoB02gFmwD68F74GFwGTjZC9FjEngElIMGoR8tYAN4RpUuL2SY3AI2icRHlSpxXkgM7gXbRfLjd1AC0ryQCLPAbmE/9qv2ZsQKOVPV6dxCdhYuGmlC7gJB3TvX29t79Gs4HBahUOgo8nvRaMSCkSJkeSIe62gBhoTI+Bykp6oQ+R7wk3AvZKN/dqoJOQXsEe7GEa5SKL+UqZ4y10OOBpzlupATwZ8idaIZ5LkspCbBN+gv8D34CmxEI14px7Hwtd5Qoz5YHHBVyLIE3IxfwTtgBshXI78D/jdEpIPzwG09PT2rwD7Dcja6JmSGYRFrwTXUi4aMUZAyG1QbFPOYK0JGGxRRDS40dfGQEYCU6aDOkJiJLgj5zJCMpxOVBGSkQcr7BqTs4C6k0ICIfeDiZCQDKTMNSLmTs5CfNZOTXeQxyUwIQqZqSmniKqTAwIxelo2kUFKu1JRyN0chWzQS6gGTbT5pEHKDhpS93IScq1k6buTQhURJeU0jhyJOQpZqJPI1pzdflJJ/iHms4yTkbw0hE5gJKdaouk7iIESnMS/jOKQNITuJ+dzBQcgCDSHZTIVMI+azgoOQco3pUbZTo5BSS8hpNwchtUQhszgLAYuI3fdTbQrJIsqQreY45iWkmJjb5TaFXEq86F+Ylw7J8aCDkNtcm0JuIgpZ7YAQyS5Cbs/ZFPIQUchiR4RQVla+blPI80QhJS4IQTtSRsjtXZtCFhGFuLIN4C1CbittCnmFKGSeI0JKuY8+9P/GU0Qh8x0R8hEht1KbQu4hCnnTESGVhNxetinkWqKQCkeE7CXk9oRNIecThexxQMZY0E3I7VabQuTa3U6ilDzBu8t7MzGvc2wPLm4jXjj3/XwfEhdqHGtbSBlRSA3zEnKIkFMVh+H32zUmqAqZyniAmM9LHISM0RBSzVRIIzGfS7gscvhOQ8pUZjIeJC5yaOS06mTegBmo4Sf1GyMZJ4Au4oP1AichGf0nc+J8ypYwEVKpUdIzOQmRvKpRSoSa7LK5avFFjfVY1hZsDLX1WWhKudqSjEc1F1tfwFFIQFU9A4TEmez0JMt4XFPGJpsle6gfGAVCmqUkaW/xkPGGgQ07kzgLidnjIiT+iUjQ5h1cyxTI+EHoh/XOCHkegSilWQ1njzYkIhcsNbThczOHnuFwf1CeBnrEkBQZB9XTmEMUUQBWgrAwF1UuCZFcZaDX1T/kUs2tYCGYqYa65RaANPUQpKtqrlDNZi7D/9uVoBMdZOwQlo8GjPcXSmJJMXiT5JB3vYgceXFQ0FYb6sT2ZA+56wgJqPnzREuxHd+6JGSkSNnskpBBh1ZSML5xSUhAvfClenzpkpCAGq86kOJSPnVJSN9A5Bqud7O7u7vLwJ/Z4JKQPq4TkU844BKHwfXBYDC7vb29TvePocOy3jUhAfViJZdfHrIoQpaIt0XUnvmurq4JENNgQMrHrgnpQ26WlGdkJfMEU9mWLY41JIOqKwdiGg1IKXdRSDRyTmSVevM2HfKDXypEZBdwxlDXEgqFpJT9BqRUuCwk+rhAeTqC3DizE7QSBcj94x+IyEcjjY/3OiBlImjWlSIP5JTHDLosZLDjyguVpPmq7ZGjACsUsh2Qm4ieFJHPIykyNacSDofPgJTDBqSsTSUhVoGUfEip59T7GtFClJQc0GpAyhovxNxc/GTQaqCD8YWIcRi0F0KQgpLSZEDKj16IOSnZJqovxLNeiDkp+ZDSQmhD5JhZ9KxnrhdirqHPQ++rKV4heOGM/laJF2JWShak6Ix9LfFCzEs5HdUQdexroReSAFBKclEVNfxfVRUjiryQBIFSMr6jo6MujoUdq30vK8EEg8HMzs7O4YwSyw8by/RCklN9jW1ra9sCYlVVcgRb68x7f6PjLymBlpaWK9CuLIeUrerNXI5jzfFjWSmIvwleiMcL8UI8XogX4vFCvBCPF+KF+JvghXi8EC/E44V4IR7j/Ac9YhOzv9yXfwAAAABJRU5ErkJggg=="},a6f6:function(t,e,a){},ae0b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("GdprConsentModal"),e("Header",{attrs:{showHelpIcon:t.showHelpIcon}}),t.pdbOnly?t._e():e("Sequence",{attrs:{showSequencePanel:t.showSequenceInfo}}),t.pdbOnly?t._e():e("AboutAlignment",{attrs:{showAlignmentPanel:t.showAlignmentInfo}}),t._v(" "),e("AboutPdb",{attrs:{showPDBPanel:t.showStructureInfo}}),e("div",[t.showAboutAquaria?e("AboutAquaria"):t._e(),e("UserHelp"),e("Errors")],1),e("div",{attrs:{id:"heightinspector"}}),e("StructureViewer"),t.pdbOnly?t._e():e("Tabs"),t.pdbOnly?t._e():e("CoverageMap"),e("Loader"),e("PopUp"),t.showScrim?e("Scrim"):t._e()],1)},r=[],s=(a("99af"),a("ac1f"),a("841c"),a("caad"),a("2532"),a("466d"),a("1276"),a("d3b7"),a("159b"),a("4360")),i=a("87a7");a("b3c8");var o=10,c=[],l=function(t){c.push(t)},u=i["a"]("protein_top_ten",o);l(u);var d,h,p,g,m,f=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"header"}},[e("div",{staticClass:"item fix level1",attrs:{id:"logo"},on:{click:t.showAbout}},[e("img",{attrs:{src:t.aquariasymbol}})]),e("Title",{attrs:{showHelpIcon:t.showHelpIcon}}),e("Menu")],1)},v=[],y=(a("5319"),a("5b81"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"item title fix level4",attrs:{id:"title"}},[t.getStructure.accession?t._e():e("span",{attrs:{id:"pdbChain"}},[e("span",{staticClass:"pdbPanel",on:{click:function(e){return t.makeActive("Structure")}}},[e("img",{attrs:{src:t.search}}),t._v(" PDB "),e("strong",[t._v(t._s(t.getStructure.pdb))])]),e("span",{style:{visibility:t.helpOption?"visible":"hidden"},attrs:{id:"help"},on:{click:t.showHelp}},[t._v("?")])]),t.getStructure.accession?e("span",{attrs:{id:"org_prot"}},[t.getOrganism&&!t.seqRes?e("span",{staticClass:"Sequence",style:{background:"Sequence"===t.activeTab?"#ed9824":"none"},on:{click:function(e){return t.makeActive("Sequence")}}},[e("img",{attrs:{src:t.search}}),t._v(" "+t._s(t.getOrganism.replaceAll("_"," "))+" "),e("strong",[t._v(t._s(t.getGene))])]):t._e(),t.getOrganism||t.seqRes?t._e():e("span",{staticClass:"Sequence",on:{click:function(e){return t.makeActive("Sequence")}}},[e("img",{attrs:{src:t.search}}),t._v(" Protein Sequence ")])]):t._e(),!t.seqRes&&t.getStructure.accession?e("span",{attrs:{id:"alignment"}},[e("span",{staticClass:"alignPanel",style:{background:"Alignment"===t.activeTab?"#ed9824":"none"},on:{click:function(e){return t.makeActive("Alignment")}}},[t._v("aligned onto")])]):t._e(),!t.seqRes&&t.getStructure.accession?e("span",{attrs:{id:"struct"}},[t.getStructure.pdb?t._e():e("span",{staticClass:"structPanel",attrs:{href:"#Structure"},on:{click:function(e){return t.makeActive("Structure")}}},[t._v("PDB ID")]),t.getStructure.pdb&&!t.seqRes?e("span",{staticClass:"structPanel",style:{background:"Structure"===t.activeTab?"#ed9824":"none"},attrs:{href:"#Structure"},on:{click:function(e){return t.makeActive("Structure")}}},[t._v(t._s(t.getStructure.pdb+"-"+t.getStructure.chain))]):t._e(),e("span",{style:{visibility:t.helpOption?"visible":"hidden"},attrs:{id:"help"},on:{click:t.showHelp}},[t._v("?")])]):t._e(),t.seqRes&&t.getStructure.accession?e("span",{staticClass:"selectionPanel",style:{background:"Alignment"===t.activeTab?"#ed9824":""},on:{click:function(e){return t.makeActive("Alignment")}}},[e("strong",[t._v(t._s(t.getGene))]),t._v(" sequence: "+t._s(t.seqRes)+" "),e("br"),e("strong",[t._v(t._s(t.getStructure.pdb))]),t._v(" structure: "+t._s(t.structRes)+" ")]):t._e(),t.helpOption?t._e():e("span",{staticClass:"close",on:{click:t.closePanel}})])}),b=[],w=a("5530"),S=a("1b1f"),_=a("2f4a"),x=a("2f62"),A=a("2b3b"),C={name:"Title",data:function(){return{pdb:null,search:a("a6f5"),seqRes:null,structRes:null,helpOption:!0,activeTab:null}},props:["showHelpIcon"],computed:Object(w["a"])({data:function(){return{hash:s["a"].state.hash}},scrim:function(){return s["a"].state.showScrim}},Object(x["b"])(["getHash","getOrganism","getGene","getStructure"])),watch:{showHelpIcon:function(t){this.helpOption=t,t&&(this.activeTab=null)},getStructure:function(t){if(s["a"].state.urlParams)var e=s["a"].state.urlParams;else e=window.location.href.substr(window.location.origin.length+window.location.pathname.length);var a=this;this.getGene&&this.getOrganism&&this.getStructure&&t&&history.pushState(null,document.title,"/"+a.getOrganism+"/"+a.getGene+"/"+a.getStructure.pdb+"/"+a.getStructure.chain+e)},getOrganism:function(t){if(s["a"].state.urlParams)var e=s["a"].state.urlParams;else e=window.location.href.substr(window.location.origin.length+window.location.pathname.length);var a=this;this.getGene&&t&&history.pushState(null,document.title,"/"+t+"/"+a.getGene+"/"+a.getStructure.pdb+"/"+a.getStructure.chain+e)},getGene:function(t){var e=this;if(s["a"].state.urlParams)var a=s["a"].state.urlParams;else a=window.location.href.substr(window.location.origin.length+window.location.pathname.length);this.getOrganism&&t&&history.pushState(null,document.title,"/"+e.getOrganism+"/"+t+"/"+e.getStructure.pdb+"/"+e.getStructure.chain+a)},scrim:function(t){var e=this;t||e.dismissPanel()}},methods:{showHelp:function(){s["a"].commit("setHelpTitle","Aquaria Help"),s["a"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(S["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){S["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide"}))},makeActive:function(t){this.activeTab=t,this.$parent.$parent.showHelpIcon=!1,this.$parent.$parent.showScrim=!0,this.$parent.$parent.dropFragment(),this.$parent.$parent.showSequenceInfo="Sequence"===t,this.$parent.$parent.showAlignmentInfo="Alignment"===t,this.$parent.$parent.showStructureInfo="Structure"===t,this.$parent.$parent.appendHash(t),"Alignment"===t&&s["a"].commit("setAlignment",_["joleculeAlignment"].copyToClipboard())},closePanel:function(){this.$parent.$parent.showSequenceInfo=!1,this.$parent.$parent.showAlignmentInfo=!1,this.$parent.$parent.showStructureInfo=!1,this.$parent.$parent.showScrim=!1,this.$parent.$parent.showHelpIcon=!0,this.$parent.$parent.dropFragment()}},updated:function(){var t=this;t.primary_accession=t.getGene;var e=new MutationObserver((function(){if("none"===document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.display)t.seqRes=null,t.structRes=null,s["a"].commit("setAlignment","");else{var e=Object(A["c"])(t.getStructure.pdb,t.getStructure.chain),a=s["a"].state.Matches.clusters[e.cluster].members[e.member],n=document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").innerText.split("\n"),r=a.pdb_id+"["+a.model+"]-"+a.pdb_chain+":",i=t.getGene+":";t.seqRes=n[1].split(i)[1],t.structRes=n[0].split(r)[1]}}));e.observe(document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection"),{attributes:!0,childList:!0,characterData:!0})}},k=C,I=(a("590b"),a("2877")),P=Object(I["a"])(k,y,b,!1,null,"31769cb0",null),O=P.exports,q=(a("d81d"),a("4de4"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"item fix level1",attrs:{id:"menu-btn"}},[e("img",{attrs:{src:t.hamburger},on:{click:t.showMenu}}),e("div",{staticClass:"panel abs floating level7",attrs:{id:"Menu"}},[e("div",{staticClass:"close",on:{click:t.closeMenu}}),t._m(0),t._m(1),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selected=e.target.multiple?a:a[0]},function(e){return t.onChange(e)}]}},[e("option",{attrs:{id:"ribbon",selected:""}},[t._v("Ribbon")]),e("option",{attrs:{id:"sphere"}},[t._v("Sphere")]),e("option",{attrs:{id:"backbone"}},[t._v("Backbone")])])])])}),D=[function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"lnk",attrs:{id:"print"}},[t._v("Print")]),e("div",{staticClass:"lnk",attrs:{id:"helpbtn"}},[t._v("Help")])])},function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"lnk",attrs:{id:"Sidechains"}},[t._v("Sidechains")]),e("div",{staticClass:"lnk",attrs:{id:"Neighbors"}},[t._v("Neighbors")]),e("div",{staticClass:"lnk active",attrs:{id:"Ligands"}},[t._v("Ligands")]),e("div",{staticClass:"lnk",attrs:{id:"Water"}},[t._v("Water")])])}],M=a("c7eb"),T=a("1da1"),L=a("aaec"),V=a("2fac"),E={name:"Menu",data:function(){return{selected:"Ribbon",hamburger:a("b335")}},methods:{closeMenu:function(){this.$parent.$parent.dropFragment(),document.querySelector("#Menu").classList.remove("openMenu")},showMenu:function(){this.$parent.$parent.appendHash("Menu"),document.querySelector("#Menu").classList.contains("openMenu")||(document.querySelector("#Menu").classList+=" openMenu")},onChange:function(t){var e=t.target.value.toLowerCase();document.querySelector("#threeDSpan-inner-menu-"+e).click()},showHelp:function(){var t=this;s["a"].commit("setHelpTitle","Aquaria Help"),s["a"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(S["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){S["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide";var e={};e.target=document.querySelector("#helpbtn"),t.toggleActive(e)}))},toggleActive:function(t){"lnk active"===t.target.className?t.target.className="lnk":t.target.className="lnk active"}},mounted:function(){var t=this;document.querySelector("#print").addEventListener("click",function(){var t=Object(T["a"])(Object(M["a"])().mark((function t(e){var a,n;return Object(M["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,Object(L["a"])(7680,4320,0,0);case 3:a=t.sent,n=document.createElement("a"),n.href=a,n.download="aquaria-screenshot.png",n.click();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),document.querySelector("#helpbtn").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),t.showHelp()})),document.querySelector("#Sidechains").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),e.currentTarget.classList.contains("active")&&V["b"](),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(5)").click()})),document.querySelector("#Neighbors").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(6)").click()})),document.querySelector("#Ligands").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),document.querySelector("#threeDSpan-inner-menu-ligand").click()})),document.querySelector("#Water").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),document.querySelector("#threeDSpan-inner-menu-water").click()}))}},R=E,B=(a("ff44"),Object(I["a"])(R,q,D,!1,null,"61c9d5a2",null)),j=B.exports,N={name:"Header",components:{Title:O,Menu:j},data:function(){return{aquariasymbol:a("2c07")}},props:["showHelpIcon"],methods:{showAbout:function(){this.$parent.appendHash("About"),this.$parent.showScrim=!0,this.$parent.showAboutAquaria=!0}}},F=N,H=(a("8281"),Object(I["a"])(F,f,v,!1,null,"a555c9d4",null)),U=H.exports,G=function(){var t=this,e=t._self._c;return e("div",{staticClass:"level2",attrs:{id:"scrim"},on:{click:t.dismissPanel}})},z=[],Z={name:"Scrim",methods:{dismissPanel:function(){this.$parent.dropFragment(),this.$parent.showSequenceInfo=!1,this.$parent.showAlignmentInfo=!1,this.$parent.showStructureInfo=!1,this.$parent.showScrim=!1,this.$parent.showHelpIcon=!0,this.$parent.showAboutAquaria=!1}}},Y=Z,W=Object(I["a"])(Y,G,z,!1,null,null,null),J=W.exports,Q=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"panel overlay about level3",attrs:{id:"Sequence"}},[e("SearchPanel"),e("AboutUniprot")],1)])},$=[],X=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"searchByName"}},[e("p",[t._v("Organism")]),e("SearchOrganism"),t._m(0),e("p",[t._v("Protein")]),e("SearchProtein"),e("div",{attrs:{id:"psyns"}},[e("p",[t._v("(example: "),e("a",{attrs:{href:"#"},on:{click:function(e){return t.fillin("p53")}}},[t._v("p53")]),t._v(" or "),e("a",{attrs:{href:"#"},on:{click:function(e){return t.fillin("P04637")}}},[t._v("P04637")]),t._v(")")])])],1)},K=[function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"osyns"}},[e("p",[t._v("")])])}],tt=a("1157"),et=a.n(tt),at=function(){var t=this,e=t._self._c;return e("div",[e("autocomplete",{ref:"autocomplete",attrs:{id:"organism_syn_input",search:t.search,"get-result-value":t.getResultValue},on:{submit:t.handleSubmit}})],1)},nt=[],rt=a("bc3a"),st=a.n(rt),it=a("356e"),ot=a("95bf"),ct=(a("8b78"),{name:"SearchOrganism",components:{Autocomplete:ot["a"]},data:function(){return{OrganismSynonyms:{}}},computed:{data:function(){return{OrgID:s["a"].state.OrgID,Organism:s["a"].state.Organism}}},methods:{getResultValue:function(t){return t.value},handleSubmit:function(t){var e=this;if(t.value&&0!==t.value.indexOf("No organisms for: ")&&t.id!==e.data.OrgID){var a="".concat(window.BACKEND,"/getOrganismSynonyms");st()({method:"get",url:a,params:{organism_id:t.id}}).then((function(e){var a=e.data;s["a"].commit("setOrgID",t.id),localStorage.preferred_organism_name=t.value,it["a"](a),document.querySelector("#organism_syn_input").setAttribute("size",t.value.length)}))}},clear:function(){this.value="",this.$refs.autocomplete.value=""},search:function(t){var e,a=this,n=this.OrganismSynonyms,r=t;return this.value=t,new Promise((function(t){if(r in n)t(n[r]);else if(""!==r){var s="".concat(window.BACKEND,"/getQueryOrganism/").concat(r);st()({method:"get",url:s}).then((function(a){var s=a.data;s.length>0?(e=s.map((function(t){return{label:t.Synonym,value:t.Synonym,id:t.Organism_ID}})),n[r]=e):e={label:"No organisms for: "+r,value:0},document.querySelector("#autocomplete-result-list-1").style.zIndex=99,document.querySelector(".autocomplete-result-list").style.maxHeight="390px",t(e)}))}else e={label:a.data.Organism,value:a.data.OrgID},t(e)}))}}}),lt=ct,ut=Object(I["a"])(lt,at,nt,!1,null,null,null),dt=ut.exports,ht=function(){var t=this,e=t._self._c;return e("autocomplete",{ref:"autocomplete",attrs:{id:"protein_syn_input",search:t.search,"get-result-value":t.getResultValue},on:{submit:t.handleSubmit}})},pt=[],gt=(a("b0c0"),a("2ca0"),a("4e82"),a("13d5"),{name:"SearchProtein",components:{Autocomplete:ot["a"]},data:function(){return{callbackData:{names:[],ids:[],pdbIDs:[]},cacheProteinSynonyms:{},term:null,proteinSynonymOrgId:null,pdbId:null,collectResponsevalues:null}},methods:{getResultValue:function(t){return t.value+" ("+t.id+")"},clear:function(){this.value="",this.$refs.autocomplete.value=""},handleSubmit:function(t){var e=this;if(t.value&&0!==t.value.indexOf("No structures for: ")){var a=t.id;if(a.indexOf("/")>-1){var n=a.split("/");a=n[0],e.pdbId=n[1]}if("PDB"===t.type){console.log("AQUARIA.proteinAutocomplete.select pdb",t.value),s["a"].commit("showLoader",!0),s["a"].commit("setLoaderMsg","Waiting for data...");var r="".concat(window.BACKEND,"/getAccessionForPDB/").concat(t.value);st()({method:"get",url:r}).then((function(e){var a=e.data;A["f"]([a.Accession],t.value,null)}))}else t.id===s["a"].getters.getStructure.accession?t.value===s["a"].getters.getGene?s["a"].commit("showLoader",!1):(console.log("AQUARIA.proteinAutocomplete.select same protein, different name",t.value),s["a"].commit("setGene",t.value),r="".concat(window.BACKEND,"/getProteinSynonyms/").concat(s["a"].getters.getStructure.accession,";"),st()({method:"get",url:r}).then((function(t){it["b"](t.data)}))):(document.querySelector("#protein_syn_input").placeholder=t.value,document.querySelector("#protein_syn_input").value="",s["a"].commit("showLoader",!0),s["a"].commit("setLoaderMsg","Waiting for data..."),s["a"].commit("setGene",t.value),A["f"]([a],e.pdbId,null))}else event.preventDefault()},search:function(t){var e=this;return e.term=t,e.callbackData.LRU=e.getLRU(),new Promise((function(t){if(""===e.term)e.collectResponse(),e.collectResponsevalues&&t(e.collectResponsevalues);else{if(e.proteinSynonymOrgId=e.term+"%"+e.$store.state.OrgID,e.proteinSynonymOrgId in e.cacheProteinSynonyms)return void t(e.cacheProteinSynonyms[e.proteinSynonymOrgId]);document.querySelector(".autocomplete-result-list").style.maxHeight="390px";var a="".concat(window.BACKEND,"/queryProtein/").concat(e.term,"/").concat(e.$store.state.OrgID);st()({method:"get",url:a}).then((function(a){var n=a.data;isNaN(parseInt(e.term.charAt(0)))?n.length>0?0===n[0].isID?(e.nameCallback(n),e.collectResponsevalues&&t(e.collectResponsevalues)):e.idCallback(n):0===n.isID?(e.nameCallback(n),e.collectResponsevalues&&t(e.collectResponsevalues)):(e.idCallback(n),e.collectResponsevalues&&t(e.collectResponsevalues)):(e.pdbCallback(n),e.collectResponsevalues&&t(e.collectResponsevalues))}))}}))},getLRU:function(){return Object(i["b"])().map((function(t){return{label:t.name,suffix:t.primary_accession+", "+t.pdb_id,value:t.name,type:"LRU",category:"Recent",id:t.primary_accession+"/"+t.pdb_id}}))},collectResponse:function(){var t=this,e=t.callbackData.LRU;e.length>0&&t.term&&t.term.length>0&&(e=e.filter((function(e){if(e.label)return e.label.toLowerCase().startsWith(t.term.toLowerCase())})));var a=!0,n=e.concat(t.callbackData.names).concat(t.callbackData.ids).concat(t.callbackData.pdbIDs);0===n.length&&(t.term&&t.term.length>0?n=[{label:"No structures for: "+t.term,value:0}]:a=!1),t.cacheProteinSynonyms[t.proteinSynonymOrgId]=n,a&&(t.collectResponsevalues=n)},nameCallback:function(t){var e,a=this;e=t.map((function(t){return{label:t.Synonym,suffix:null,value:t.Synonym,type:"Synonym",category:"Names",id:t.Primary_Accession,organism:t.Organism_ID}})),e.sort((function(t,e){return t.label>e.label?1:-1})),e.reduce((function(t,e){var a=t,n=e;return a&&a.value===n.value&&(a.dup||(a.suffix=a.id,a.dup=!0),n.dup||(n.suffix=n.id,n.dup=!0)),e}),null),a.callbackData.names=e,a.collectResponse()},idCallback:function(t){var e,a=this;e=t.map((function(t){var e=t.Source_Field;return"AC"!==e&&"ID"!==e||(e="UniProt"),{label:t.Synonym,suffix:e,value:t.Synonym,type:e,category:"Identifiers",id:t.Primary_Accession}})),e.sort((function(t,e){return t.label>e.label?1:-1})),a.callbackData.ids=e,a.collectResponse()},pdbCallback:function(t){var e,a=this;e=t.map((function(t){return{label:t.Synonym,suffix:"PDB",type:"PDB",value:t.Synonym,category:t.Category,id:t.Synonym}})),a.callbackData.pdbIDs=e,a.collectResponse()}}}),mt=gt,ft=Object(I["a"])(mt,ht,pt,!1,null,null,null),vt=ft.exports,yt={components:{SearchOrganism:dt,SearchProtein:vt},name:"SearchPanel",data:function(){return{search:a("20d9")}},methods:{fillin:function(t){document.getElementById("protein_syn_input").value=t,setTimeout((function(){window.location.href="/P04637"}),300)},selectOrganism:function(t){},placeholderText:function(t,e){var a=document.querySelector("#organism_syn_input"),n=document.querySelector("#protein_syn_input");a.placeholder=t,a.setAttribute("size",a.getAttribute("placeholder").length),n.placeholder=e,n.setAttribute("size",n.getAttribute("placeholder").length),et()("#organism_syn_input").focus((function(){et()(this).attr("placeholder","Specify an organism"),a.setAttribute("size",a.getAttribute("placeholder").length)})).blur((function(){et()(this).attr("placeholder",t),a.setAttribute("size",a.getAttribute("placeholder").length)})),et()("#protein_syn_input").focus((function(){et()(this).attr("placeholder","Specify a protein"),n.setAttribute("size",n.getAttribute("placeholder").length)})).blur((function(){et()(this).attr("placeholder",e),n.setAttribute("size",n.getAttribute("placeholder").length)}))}}},bt=yt,wt=(a("5f92"),Object(I["a"])(bt,X,K,!1,null,null,null)),St=wt.exports,_t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"scrollable",attrs:{"data-intro":"UniProt summary of the specified protein's function.","data-position":"right"}},[t._m(0),t.uniprotDesc?e("div",{attrs:{id:"uniProtDesc"}}):t._e(),t._l(t.descriptions,(function(a,n){return e("div",{key:n,staticClass:"expandable"},[e("expandable-text-line",{attrs:{"use-hover":""},domProps:{innerHTML:t._s("<strong>"+a[0]+"</strong>:"+a[1])}})],1)}))],2)},xt=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"none"},attrs:{id:"gsyns"}},[e("p",[t._v("Genes: ")])])}],At=(a("a4d3"),a("e01a"),a("02a1")),Ct={name:"AboutUniprot",components:{ExpandableTextLine:At["a"]},data:function(){return{uniprotDesc:null,sections:[],descriptions:[],a:[1,2,3],tightSections:[],desc:null,list:[]}},computed:Object(w["a"])(Object(w["a"])({},Object(x["b"])(["getStructure"])),{},{sequence:function(){return this.$store.state.currentSequence}}),watch:{sequence:function(t){var e=this;t.length>0&&(e.uniprotDesc=t.description,e.updateUniprotInfo(e.uniprotDesc))}},methods:{updateUniprotInfo:function(t){var e=this;e.list=[],e.tightSections=[];var a=/\n[A-Z ]+:.*?$/;function n(){if(t&&t.length>0){var r=t.match(a);null!==r?(e.sections.unshift(r[0].split(": ")),t=t.replace(r[0],""),n()):e.sections.unshift(t.split(": "))}}function r(t){for(var a=null,n=0;n<t.length;n++)if(n<t.length-2){var r=t[n][0],s=t[n+1][0];if(s===r)null===a&&(a="<ul>"),a+="<li>"+t[n][1]+"</li>";else if(null===a)e.tightSections.push(t[n]);else{a+="<li>"+t[n][1]+"</li></ul>";var i=[r,a];e.tightSections.push(i),a=null}}else null===a?e.tightSections.push(t[n]):(a+="<li>"+t[n][1]+"</li></ul>",i=[r,a],e.tightSections.push(i),a=null);return e.tightSections}n(),this.sections.forEach((function(t){if(-1!==t[1].indexOf("URL=")){var e="",a="",n="",r="",s=t[1].split(";");s.forEach((function(t){t=t.split("="),-1!==t[0].indexOf("URL")&&(a=t[1]),-1!==t[0].indexOf("Name")&&(n=t[1]),-1!==t[0].indexOf("Note")&&(r=t[1])})),e="<a href="+a+' title="'+r+'" target="_blank">'+n+"</a>",t[1]=e}}));var s=r(e.sections);s.forEach((function(t){var a="";if(t.length>2){for(var n=1;n<t.length;n++)a=a+" "+t[n];t[1]=a}e.list.push(t)})),e.descriptions=e.list}}},kt=Ct,It=(a("8385"),Object(I["a"])(kt,_t,xt,!1,null,"7c383769",null)),Pt=It.exports,Ot={name:"Sequence",components:{SearchPanel:St,AboutUniprot:Pt},props:["showSequencePanel"],watch:{showSequencePanel:function(t){t?(document.querySelector("#Sequence").style.opacity=1,document.querySelector("#Sequence").style.display="flex"):(document.querySelector("#Sequence").style.opacity=0,document.querySelector("#Sequence").style.display="none")}}},qt=Ot,Dt=(a("e106"),Object(I["a"])(qt,Q,$,!1,null,"4c266b70",null)),Mt=Dt.exports,Tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"panel overlay about level3",attrs:{id:"Alignment"}},[e("div",{staticClass:"scrollable"},[t.data.alignment?e("p",{staticClass:"spacer"},[t._v("")]):t._e(),e("p",[t._v("What you see in the 3D viewer is the experimentally-determined structure of "+t._s(t.pdbName)+" from "),e("a",{attrs:{href:"http://www.rcsb.org/pdb/explore.do?structureId={{}}",target:"_blank"}},[t._v(" PDB entry "+t._s(t.pdbId))]),t._v(" chain "+t._s(t.chainId)+". ")]),e("p",[t._v(" The full-length sequence of the protein you specified ("+t._s(t.uniprotName)+") has been aligned onto the sequence used to determine this PDB structure.")]),e("p",[t._v(" Overall, the two sequences align with "+t._s(t.score)+"% identity; any amino acid substitutions are indicated using dark coloring (see legend).")]),e("p",{staticClass:"quality"},[t._v(" This alignment has an HHblits E-value of "+t._s(t.evalueString)+"  "),e("nobr",[t._v("10"),e("sup",[t._v(t._s(t.power))])]),t._v(", which is considered to be "+t._s(t.quality)+". Based on cross-validation, the likelihood that your specified protein ("+t._s(t.uniprotName)+") adopts a structure similar to that shown is estimated to be "+t._s(t.precisiontxt)+"%.")],1),e("p",[t._v("Note that the structure shown is taken directly from the PDB; it has not been derived by ab-initio or comparative modeling.")]),t.data.alignment?e("div",[e("p",[e("b",[t._v("Alignment:")]),e("br"),e("pre",[t._v(t._s(t.data.alignment))])])]):t._e()])])},Lt=[],Vt={name:"AboutAlignment",computed:{data:function(){return{alignment:s["a"].state.alignment}},pdbChainData:function(){return s["a"].state.pdbChainData}},data:function(){return{pdbName:null,pdbId:null,chainId:null,score:null,qualClass:null,evalueString:null,quality:null,uniprotName:null,precisiontxt:null,power:null}},props:["showAlignmentPanel"],watch:{showAlignmentPanel:function(t){t?(document.querySelector("#Alignment").style.opacity=1,document.querySelector("#Alignment").style.display="flex"):(document.querySelector("#Alignment").style.opacity=0,document.querySelector("#Alignment").style.display="none")},pdbChainData:function(t){var e=this;t.pdbName&&(e.pdbName=t.pdbName,e.pdbId=t.pdb_id,e.chainId=t.pdb_chain,e.score=t.score,e.qualClass=t.qualClass,e.evalueString=t.evalueString,e.quality=t.quality,e.uniprotName=t.uniprotName,e.precisiontxt=t.precisiontxt,e.power=t.power)}},methods:{resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(t){t.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(t){t.style.display="none"}))}},mounted:function(){this.resetSelection()}},Et=Vt,Rt=(a("0735"),Object(I["a"])(Et,Tt,Lt,!1,null,"719899c4",null)),Bt=Rt.exports,jt=function(){var t=this;t._self._c;return t._m(0)},Nt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"panel overlay about level3",attrs:{id:"Structure"}},[e("div",{staticClass:"scrollable",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[e("span",{staticClass:"content",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[e("span",{staticStyle:{display:"none"},attrs:{id:"biounitDisplay"}},[e("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitLeft",title:"Navigate to other assemblies"}},[t._v("<")]),t._v(" "),e("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitType"}},[t._v("biounit")]),t._v(" "),e("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitCount"}},[t._v("x/x")]),t._v("  "),e("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitRight",title:"Navigate to other assemblies"}},[t._v(">")]),e("a",{attrs:{id:"helpBiounit",href:"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit",target:"_blank",title:"Go to PDB to view explanation of assembly"}},[e("span",{staticClass:"help roundButton"})])]),e("span",{staticStyle:{display:"none"},attrs:{id:"aboutPDBHider","data-intro":"PubMed Information about PDB structure","data-position":"left"}},[e("p",{attrs:{id:"classification"}},[t._v("Classification unavailable")]),e("h4",{attrs:{id:"reference_title"}},[t._v("Title unavailable")]),e("p",{attrs:{id:"reference_link"}},[e("a",{attrs:{href:"#"}},[t._v("PubMed Link unavailable")])]),e("p",{attrs:{id:"molecule",title:"View this structure in Aquaria","data-intro":"Information about currently focused PDB chain.","data-position":"left"}},[e("strong",[t._v("Molecule: ")]),e("span",{staticClass:"text"},[t._v("unavailable")])])]),e("p",{attrs:{id:"organism"}},[e("strong",[t._v("Organism: ")]),e("span",{staticClass:"text"},[t._v("unavailable")])]),e("p",{attrs:{id:"small_molecules"}},[e("strong",[t._v("Small molecules: ")]),e("span",{staticClass:"text"},[t._v("unavailable")])]),e("p",{attrs:{id:"method"}},[e("strong",[t._v("Method: ")]),e("span",{staticClass:"text"},[t._v("unavailable")])]),e("p",{attrs:{id:"resolution"}},[e("strong",[t._v("Resolution: ")]),e("span",{staticClass:"text"},[t._v("unavailable")])]),e("p",{attrs:{id:"pdb"}},[e("strong",[t._v("Protein Data Bank: ")]),e("span",{staticClass:"text"},[t._v("unavailable")])])])])])}],Ft={name:"AboutPdb",props:["showPDBPanel"],watch:{showPDBPanel:function(t){t?(document.querySelector("#Structure").style.opacity=1,document.querySelector("#Structure").style.display="flex"):(document.querySelector("#Structure").style.opacity=0,document.querySelector("#Structure").style.display="none")}}},Ht=Ft,Ut=(a("89ce"),Object(I["a"])(Ht,jt,Nt,!1,null,"5a1a1652",null)),Gt=Ut.exports,zt=function(){var t=this;t._self._c;return t._m(0)},Zt=[function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"structure-viewer"}},[e("span",{attrs:{id:"threeDSpan"}},[e("div",{attrs:{id:"threeDSpan-inner"}})])])}],Yt={name:"StructureViewer",mounted:function(){function t(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(t.length)if(navigator.platform===t.pop()||screen.width>=300&&screen.width<=600)return!0}var e=t();if(e){var a=Math.max(window.innerHeight),n=document.body;document.addEventListener("scroll",(function(t){var e=Math.max(window.innerHeight);e-50>a?n.classList.contains("ios-toolbar")||n.classList.add("ios-toolbar"):n.classList.contains("ios-toolbar")&&n.classList.remove("ios-toolbar")}))}}},Wt=Yt,Jt=(a("4210"),Object(I["a"])(Wt,zt,Zt,!1,null,null,null)),Qt=Jt.exports,$t=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"tabs rel level6"},[e("div",{staticClass:"tab",attrs:{id:"Structures"},on:{click:t.renderClusters,mouseenter:function(e){t.activateStructs=!0},mouseleave:function(e){t.activateStructs=!1}}},[e("span",{staticClass:"icon"},[e("img",{attrs:{src:t.MS}})]),t.activateStructs||t.showStructures||t.showFeatures?e("span",{staticClass:"panelTitle"},[t._v(" Matching Structures "),t.getStructCount>0?e("span",{staticClass:"counter"},[t._v(" "+t._s(t.getStructCount.toLocaleString()))]):t._e()]):t._e()]),e("MatchingStructures",{attrs:{showPanel:t.showStructures}}),e("div",{staticClass:"tab",attrs:{id:"Features"},on:{click:t.renderFeatures,mouseenter:function(e){t.activateFeats=!0},mouseleave:function(e){t.activateFeats=!1}}},[e("span",{staticClass:"icon"},[e("img",{attrs:{src:t.FT}})]),t.activateFeats||t.showFeatures||t.showStructures?e("span",{staticClass:"panelTitle"},[t._v(" Features "),t.getFeatCount?e("span",{staticClass:"counter",attrs:{id:"featureCounter"}},[t._v(t._s(t.getFeatCount.toLocaleString()))]):t._e()]):t._e()]),e("Features",{attrs:{showPanel:t.showFeatures}})],1),t.showStructures||t.showFeatures?e("div",{staticClass:"level5",attrs:{id:"scrim"},on:{click:t.dismissPanel}}):t._e()])},Xt=[],Kt=function(){var t=this,e=t._self._c;return t.showPanel?e("div",{staticClass:"panel",attrs:{id:"msPanel"}},[e("div",{staticClass:"close intab",on:{click:t.closeTab}}),t._m(0),e("TreeView",{directives:[{name:"show",rawName:"v-show",value:t.showTree,expression:"showTree"}],staticClass:"level5",attrs:{id:"treeView",treeReady:t.prop,count:t.count,coordinates:t.treeCoordinates,parentElem:t.parentElem}}),e("NodeLoader",{directives:[{name:"show",rawName:"v-show",value:t.showLoader,expression:"showLoader"}],attrs:{coordinates:t.treeCoordinates,change:t.change}})],1):t._e()},te=[function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"vis"}},[e("div",{attrs:{id:"allclusters","data-intro":"Visual summary of all structures in PDB matching the specified protein, grouped by region of match.","data-position":"left"}})])}],ee=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"scrim level6",on:{click:t.hideTree}}),e("div",{staticClass:"level7",attrs:{id:"arc"}})])},ae=[],ne=a("2909"),re=(a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("a434"),a("00b4"),a("5698")),se=a.n(re),ie=a("9f50"),oe=a("fae8"),ce=a("7792"),le=a("d4ec"),ue=a("bee2"),de=a("1b1f"),he=function(){function t(e,a,n,r,s,i,o){Object(le["a"])(this,t),this.width=r,this.height=s,this.xScale=n,this.onTextClick=i,this.clustSize=0,this.onClusterItemClick=o,this.rank=a,this.cluster=e;var c=this.drawClusterContainer(e,a);"undefined"!==typeof c&&this.drawCluster(e,a)}return Object(ue["a"])(t,[{key:"updateCluster",value:function(t){var e=this;this.cluster=t,this.clustSize=t.cluster_size;var a=this.cluster.pdb_id.toLowerCase()+"_"+this.rank;"undefined"!==typeof this.nusvg&&this.nusvg.select("g#structure_"+a+" text").text((function(){return e.clustSize}))}},{key:"drawClusterContainer",value:function(t,e){var a=this,n=(t.members[0],t.pdb_chain[0]);if(0!==t.secondary_structure.length&&0!==t.secondary_structure[0].length){var r=this.xScale(t.secondary_structure[0][0].start),i=this.xScale(t.secondary_structure[0][t.secondary_structure[0].length-1].end),o=t.pdb_id.toLowerCase()+"_"+e;this.clustSize=t.cluster_size;var c=t.alignment_identity_score,l=0;this.clustSize>99&&(l=8),this.clustSize>999&&(l=18),this.clustSize<10&&(l=-6);var u=se.a.select("#allclusters").append("div").attr("id","out_"+o).attr("class","outer_container");u.append("svg").attr("width",40).attr("height",40).attr("viewBox","0 0 40 40").attr("preserveAspectRatio","none").append("text").attr("text-anchor","end").attr("class","percentage").attr("x",28).attr("y",26).text(c+"%"),this.nusvg=u.append("div").attr("id","c_"+o).attr("class","container").append("svg").attr("width",this.width+200).attr("height",this.height+30).attr("viewBox","0 0 "+(this.width+200)+" "+(this.height+30)).attr("preserveAspectRatio","none"),this.nusvg.append("g").attr("id","structure_"+o).attr("transform","translate("+(s["a"].state.margin.left+r)+",20)").on("mouseover",(function(){return se.a.select(this).call(a.mouseover,a)})).on("mouseout",(function(){return se.a.select(this).call(a.mouseout,a)})).append("rect").attr("transform","translate("+(i-r-5)+",5)").attr("class","handle").attr("width",32+l).attr("height",16).attr("rx",6),this.nusvg.select("g#structure_"+o).append("g").attr("class","cluster").attr("title","Click to load "+o.substr(0,4)+", chain "+n+" into structure view. Compared to the specified protein, this structure has "+c+"% sequence identity. ").attr("width",i-r+2).attr("height",26).on("click",(function(){return se.a.select(this.parentNode).call((function(t){console.log("ClusterRenderer.nusvg.select clicked! "+t),de.hidePanels(),a.onClusterItemClick(t)}))})),this.nusvg.select("g#structure_"+o+" g.cluster").append("rect").attr("class","cluster").attr("width",i-r+3).attr("height",26).attr("rx",6),this.nusvg.select("g#structure_"+o+" g.cluster").append("rect").attr("width",i-r).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion"),this.addThumbnails(o,r,i,l),this.nusvg.select("g#structure_"+o).append("text").attr("text-anchor","end").attr("fill","white").style("font-size","16px").attr("x",i-r+24+l).attr("y",13).attr("dx",-3).attr("dy",".35em");var d="Click to see "+a.clustSize+" structures in this cluster";return this.nusvg.select("g#structure_"+o+" text, g#structure_"+o).attr("class","expandable").attr("title",d),this.nusvg.select("g#structure_"+o+" text").on("click",(function(){a.onTextClick(se.a.select(this.parentNode),this.getBoundingClientRect())})),u}console.log("ClusterRenderer.drawClusterContainer error: cannot draw cluster as it has no secondary structure: ",t)}},{key:"drawCluster",value:function(t,e){var a=this;t.secondary_structure[0].forEach((function(n,r){n.start=+n.start,n.end=+n.end,a.drawClusterResidues(t,e,n)})),this.setConservation(e,t)}},{key:"drawClusterResidues",value:function(t,e,a){for(var n=t.secondary_structure[0][0].start,r=0,i=a.start;i<=a.end;i++){var o=t.conservationArray[0][i];if(i==a.end||o!==t.conservationArray[0][i+1]){var c=this.nusvg.select("g#structure_"+t.pdb_id.toLowerCase()+"_"+e+" g.cluster").append("g").attr("class","residue "+a.type).attr("id","r_"+e+"_"+i).attr("transform","translate("+(i-n-r)*s["a"].state.srw+",8)").append("rect").attr("class",o).attr("width",s["a"].state.srw*(r+1)).attr("height",10);"SHEET"==a.type&&(c.attr("height",14).attr("transform","translate(0,-2)"),i==a.end&&(c.attr("width",s["a"].state.srw*r),this.nusvg.select("g.residue#r_"+e+"_"+i).append("svg:polygon").attr("class",o).attr("transform","translate("+s["a"].state.srw*r+",0)").attr("points",s["a"].state.srw+",0 0,-6 0,16 "+s["a"].state.srw+",10"))),"HELIX"==a.type&&this.nusvg.select("g.residue#r_"+e+"_"+i+" rect").attr("height",16).attr("class",o).attr("transform","translate(0,-3)"),r=0}else r++}}},{key:"setConservation",value:function(t,e){for(var a=[],n=this,r=0;r<e.seq_end.length-1;r++){var s=[];s[0]=e.seq_end[r]+1,s[1]=e.seq_start[r+1]-1,a.push(s)}this.nusvg.selectAll("g.residue").data(a).each((function(e){for(var a=e[0];a<=e[1];a++)n.nusvg.select("g.residue#r_"+t+"_"+a+" rect").attr("height",1).attr("transform","translate(0,5)").attr("class","insertion")}))}},{key:"addThumbnails",value:function(t,e,a,n){var r=t.substring(0,4).toUpperCase();se.a.select("g#structure_"+t+" g.cluster").append("line").attr("x1",a-e+6+n).attr("y1",13).attr("x2",this.width-e+60).attr("y2",13).attr("class","connector").attr("stroke-width",1),se.a.select("g#structure_"+t).append("g").attr("class","thumbnail").attr("transform","translate("+(this.width-e+28)+",-18)").append("circle").attr("cx",30).attr("cy",30).attr("r",16).attr("fill","#FFF").attr("stroke","#797979").attr("stroke-width",2),se.a.select("g#structure_"+t+" g.thumbnail").append("clipPath").attr("id","path_"+t).append("circle").attr("cx",30).attr("cy",30).attr("r",15).attr("clip-rule","evenodd");se.a.select("g#structure_"+t+" g.thumbnail").append("image").attr("width","30px").attr("height","30px").attr("x",15).attr("y",15).attr("xlink:href","https://www.ebi.ac.uk/pdbe/static/entry/"+r.toLowerCase()+"_assembly_1_chain_front_image-200x200.png").attr("clip-path","url(#path_"+t+")")}},{key:"mouseover",value:function(t,e){e.origin=se.a.select("#"+t.attr("id")+" g.thumbnail").attr("transform");var a=parseFloat(e.origin.substring(e.origin.indexOf("(")+1,e.origin.indexOf(","))),n=t.attr("id").substr(9);se.a.select("#"+t.attr("id")+" g.cluster, #"+t.attr("id")).classed("active",!0),se.a.select("#"+t.attr("id")+" g.thumbnail").attr("transform","translate("+(a+32)+", -18)"),se.a.select("#"+t.attr("id")+" g.thumbnail circle").attr("r",30),se.a.select("#"+t.attr("id")+" g.thumbnail #path"+n+" circle").attr("r",29),se.a.select("#"+t.attr("id")+" g.thumbnail image").attr("width","60px").attr("height","60px").attr("x",0).attr("y",0)}},{key:"mouseout",value:function(t,e){var a=t.attr("id").substr(9);se.a.select("#"+t.attr("id")+" g.cluster, #"+t.attr("id")).classed("active",!1),se.a.select("#"+t.attr("id")+" g.thumbnail").attr("transform",e.origin),se.a.select("#"+t.attr("id")+" g.thumbnail circle").attr("r",16),se.a.select("#"+t.attr("id")+" g.thumbnail #path"+a+" circle").attr("r",15),se.a.select("#"+t.attr("id")+" g.thumbnail image").attr("width","30px").attr("height","30px").attr("x",15).attr("y",15)}}]),t}(),pe=[];function ge(t,e){var a=parseInt(t.attr("id").substr(15));s["a"].commit("setTreeData",a),s["a"].commit("setTreeCoordinates",e)}function me(t,e){var a=[];a.cluster=parseInt(e),a.member=0,s["a"].commit("setPdbIndex",a),document.querySelector("g.loaded")&&document.querySelector("g.loaded").classList.remove("loaded"),se.a.select("div.container.loaded").classed("loaded",!1),se.a.select("g#structure_"+t+"_"+e).classed("loaded",!0),se.a.select("div#c_"+t+"_"+e).classed("loaded",!0)}function fe(t){g=0;var e=t.length;d=document.getElementById("structure-viewer").offsetWidth-s["a"].state.margin.right-s["a"].state.margin.left-50,h=40-s["a"].state.margin.top-s["a"].state.margin.bottom+35,p=se.a.scale.linear().domain([1,e]).range([1,d]),s["a"].commit("setSrw",p(100)/100),document.querySelector("#vis > .ruler")&&document.querySelector("#vis > .ruler").remove(),_e("vis")}function ve(t){m=t;for(var e=0;e<t.length;e++)pe[e].updateCluster(t[e])}function ye(){pe=[],m=[],fe(s["a"].state.Matches.sequences[0]);var t=s["a"].state.Matches.clusters;t.forEach((function(t){be(t)})),ve(t),me()}function be(t){var e=new he(t,g,p,d,h,(function(t,e){console.log("ShowMatchingStructures.addCluster.onclick",e),ge(t,e)}),Se,"#allclusters");pe.push(e),g++}function we(t){return parseInt(t.attr("id").substr(15))}function Se(t){history.pushState("",document.title,window.location.pathname+window.location.search);var e=t.attr("id").substr(10,4),a=we(t);me(e,a),console.log("ShowMatchingStructures.clusterItemClick","shortId: "+e,"cluster-number: "+a,m[a]);var n=m[a].members[0];A["b"](n)}function _e(t){d=document.getElementById("structure-viewer").offsetWidth-s["a"].state.margin.right-s["a"].state.margin.left-50;var e=se.a.select("#"+t).insert("div",":first-child").attr("class","ruler").attr("data-intro","Graphical representation of the specified protein's sequence").attr("data-position","left").append("svg").attr("width",parseInt(d+s["a"].state.margin.left)).attr("viewBox","0 0 "+parseInt(d+s["a"].state.margin.left)+" 15").attr("preserveAspectRatio","none").attr("height",15).append("g").attr("transform","translate("+s["a"].state.margin.left+",0)");e.append("g").attr("class","x axis").call(se.a.svg.axis().scale(p).orient("bottom").tickSize(4,2,6).tickPadding(2));for(var a=[],n=se.a.selectAll("#vis div.ruler g.x text")[0],r=0;r<n.length;r++)a.push(+n[r].textContent);a=a.filter(xe),a.push(s["a"].state.Matches.sequences[0].length),a.unshift(1),se.a.select("#"+t+" div.ruler g.x").call(se.a.svg.axis().scale(p).orient("bottom").tickSize(4,2,6).tickPadding(2).tickValues(a)),se.a.selectAll("g.x text").attr("text-anchor","end")}function xe(t){var e=s["a"].state.Matches.sequences[0].length;return 1!==t&&t!==e&&t*s["a"].state.srw<e*s["a"].state.srw-30}var Ae=10,Ce=450,ke=450,Ie=14,Pe=new RegExp(/(p\.)?[A-Za-z]+[0-9]+[A-Za-z\*\_\?\[\]\(\)\%\=\.]+/),Oe={name:"TreeView",props:["treeReady","count","coordinates","parentElem"],data:function(){return{pdbs:[],up:a("31c8"),down:a("62bc")}},computed:Object(w["a"])({},Object(x["b"])(["getGene","getOrganism","getMatches"])),watch:{treeReady:function(t,e){var a=this;a.coordinates.clientX+Ce+5>=window.innerWidth&&window.innerWidth>500?document.querySelector(a.parentElem+" #arc").style.left=window.innerWidth-Ce-5+"px":a.coordinates.clientX+Ce+5>=window.innerWidth?document.querySelector(a.parentElem+" #arc").style.left="50px":document.querySelector(a.parentElem+" #arc").style.left=a.coordinates.clientX+"px",document.querySelector(a.parentElem+" #arc").style.top=a.coordinates.clientY-400+"px",!0===this.$parent.showLoader?this.$parent.showLoader=!1:this.$parent.showTree=!1,console.log(a.count),console.log("Prop changed: ",t," | was: ",e);var n=t,r=n[0];if(re["selectAll"](a.parentElem+" #arc > *").remove(),n.length>Ae){var s=a.chunk(n,Ae);a.generateArc(s,r,0)}else a.generateArc(n,r)}},methods:{hideTree:function(){s["a"].commit("setTreeData",null),this.$parent.showTree=!1},nodeClick:function(t){var e=this,a=t[2].children[0],n=0;if(a.name=t[2].label,a.length=t[2].children.length,t[2].children.length>Ae){var r=e.chunk(t[2].children,Ae);e.generateArc(r,a,n)}else n+=1,this.generateArc(t[2].children,a)},chunk:function(t,e){var a,n=[];t=(a=[]).concat.apply(a,Object(ne["a"])(t));while(t.length)n.push(t.splice(0,e));return n},reversePdbArray:function(t){var e=[];return t.forEach((function(t){e.unshift(t)})),e},generateArc:function(t,e,a){var n,r,s,i,o,c=this,l=60;if(void 0!==a?(o=t,r=o[a]):(o=c.reversePdbArray(t),r=o),Object.prototype.hasOwnProperty.call(r[0],"children")){void 0!==a&&null!==document.querySelector("svg#tree")&&document.querySelector("svg#tree").remove();var u=re["select"](c.parentElem+" #arc").append("svg").attr("id","tree").attr("width",Ce).attr("height",ke);i=c.createLinks(u,"parent",o,e,a)}else document.querySelectorAll("outerElem").forEach((function(t){return t.remove()})),document.querySelectorAll("[id^=children_]").forEach((function(t){return t.parentNode.removeChild(t)})),u=re["select"](c.parentElem+" #arc").append("svg").attr("id","children_"+r[0].pdb_id+"_"+a).attr("width",Ce).attr("height",ke),i=c.createLinks(u,"child",o,e,a);if(s=i.nodes,u=i.svg,Object.prototype.hasOwnProperty.call(r[0],"children")?(s.shift(),n=re["select"]("svg#tree").selectAll("g#gParent").data(s).enter()):(e.dx=s[1][0]-l,e.dy=s[1][1]-Ie/2,s.push([s[1][0]-l,s[1][1],e,"parent"]),document.querySelector("#tree").classList.add("hide"),s.shift(),n=re["select"]("svg#children_"+r[0].pdb_id+"_"+a).selectAll("g").data(s).enter()),n=n.append("g").attr("class",(function(t,e){if(t.length>1)return Object.prototype.hasOwnProperty.call(t[2],"children")?"outerElem":"innerElem"})).attr("id",(function(t,e){if(t.length>1)return Object.prototype.hasOwnProperty.call(t[2],"children")?"out_"+t[2].children[0].pdb_id:void 0!==t[3]&&t[3].includes("parent")?"parentNode":"in_"+t[2].pdb_id})).attr("width",Ie).attr("height",Ie).on("click",(function(t,e){if(e>=0)if(Object.prototype.hasOwnProperty.call(t[2],"children"))c.nodeClick(t);else if(void 0===t[3]){var a=window.location.search;history.pushState("",document.title,"/"+c.getOrganism+"/"+c.getGene+"/"+t[2].pdb_id+"/"+t[2].pdb_chain+a),c.getMatches.clusters.forEach((function(e,a){if(e.members.length>1)e.members.forEach((function(n){if(n.pdb_id===t[2].pdb_id&&n.pdb_chain[0]===t[2].pdb_chain)return A["b"](n),me(e.pdb_id,a),null}));else if(e.members[0].pdb_id===t[2].pdb_id&&e.members[0].pdb_chain[0]===t[2].pdb_chain)return e.E_value=e.members[0].E_value,A["b"](e),me(e.pdb_id,a),null})),Pe.test(a)&&c.waitForElement()}else document.querySelector("#tree").classList.remove("hide"),document.querySelectorAll("[id^=children_]").forEach((function(t){return t.parentNode.removeChild(t)}))})),Object.prototype.hasOwnProperty.call(r[0],"children"))n.append("rect").attr("transform",(function(t){return"translate("+t[0]+","+(t[1]-Ie/2)+")"})).attr("class","label").attr("width",(function(t,e){return t[2].children?t[2].children.length>9?32:26:0})).attr("height",(function(t,e){return t[2].children?16:0})).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none");else{var d=re["select"]("g#parentNode").selectAll("g").data([e]).enter();d.append("text").attr("x",(function(t){return t.dx-40-20})).attr("dy",(function(t){return t.dy+40})).attr("class","nbr_label").text((function(t){return t.name.length>15?t.name.substr(0,15)+"...":t.name})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),d.append("rect").attr("transform",(function(t){return"translate("+t.dx+","+t.dy+")"})).attr("class","label").attr("width",(function(t,e){return t.length?t.length>9?32:26:0})).attr("height",16).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none"),d.append("text").attr("x",(function(t){return t.dx+Ie+2})).attr("dy",(function(t){return t.dy+Ie-1})).attr("class","nbr_label").text((function(t){return t.length})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)}n.append("circle").attr("cx",(function(t){return t[0]})).attr("cy",(function(t){return t[1]})).attr("r",Ie).style("fill","white").style("stroke","#999999").style("stroke-width","1"),n.append("clipPath").attr("id","clip_"+function(t,e){return e}).append("circle").attr("cx",(function(t){return t[0]})).attr("cy",(function(t){return t[1]})).attr("r",Ie).attr("clip-rule","evenodd"),n.append("image").attr("width",2*(Ie-1)+"px").attr("height",2*(Ie-1)+"px").attr("x",(function(t){return t[0]-13})).attr("y",(function(t){return t[1]-13})).attr("clip-path",(function(t,e){var a=" ";return t[2].pdb_id&&(a="url(#clip_"+t[2].pdb_id+")"),t[2].children&&t[2].children[0].pdb_id&&(a="url(#clip_"+t[2].children[0].pdb_id+")"),a})).attr("xlink:href",(function(t,e){var a=" ";return t[2].pdb_id&&"undefined"===typeof t[2].children&&(a=t[2].pdb_id.toUpperCase()),t[2].children&&t[2].children[0].pdb_id&&(a=t[2].children[0].pdb_id.toUpperCase())," "===a?" ":"https://www.ebi.ac.uk/pdbe/static/entry/"+a.toLowerCase()+"_assembly_1_chain_front_image-200x200.png"})),n.append("text").attr("x",(function(t){return t[0]+Ie+2})).attr("dy",(function(t){return t[1]+Ie/2-1})).attr("class","nbr_label").text((function(t,e){if(t[2].label&&"undefined"!==t[2].label){var a=t[2].label;return t[2].label.length>30&&(a=t[2].label.substr(0,15)+" ... "+t[2].label.substr(t[2].label.length-15)),t[2].children?t[2].children.length+"      "+a:" "}if(void 0===t[3])return t[2].pdb_id+"-"+t[2].pdb_chain})).attr("title",(function(t,e){return t[2].label_long?t[2].label_long:t[2].label})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)},createLinks:function(t,e,a,n,r){var s,i=[],o=0,c=[],l={},u=this,d=40;void 0!==r?(s=a[r],s=u.reversePdbArray(s)):s=a,"child"===e&&(o=60);var h=ke-d;c.push([10,h]);for(var p=0;p<s.length;p++)c.push([80+o,h-p*d]),c[p+1].push(s[p]);if(i.push(ie["a"]()({source:c[0],target:c[1]})),s.length>1){var g=[{xpoint:30+o,ypoint:h},{xpoint:45+o,ypoint:h-10},{xpoint:47+o,ypoint:h-20}],m=oe["a"]().x((function(t){return t.xpoint})).y((function(t){return t.ypoint})).curve(ce["a"]);t.append("path").attr("d",m(g)).attr("fill","none").attr("class",(function(){return"outerElem"})).attr("stroke","#76c276").style("stroke-width",2);for(var f=2;f<c.length;f++){var v=[{xpoint:47+o,ypoint:c[f][1]+10},{xpoint:55+o,ypoint:c[f][1]},{xpoint:80+o,ypoint:c[f][1]}];t.append("path").attr("d",m(v)).attr("fill","none").attr("stroke","#76c276").style("stroke-width",2).attr("class",(function(t){return"outerElem"}))}t.append("line").style("stroke","#76c276").style("stroke-width",2).attr("x1",47+o).attr("y1",h+10-(c.length-2)*d).attr("x2",47+o).attr("y2",h-20).attr("class",(function(){return 1===e?"outerElem":"innerElem"}))}return t.append("path").attr("d",i).attr("stroke","#76c276").attr("fill","none").style("stroke-width",2),a.length>1&&(r+1<a.length&&(t.append("circle").attr("cx",80+o).attr("cy",h+30).attr("r",10).style("fill","#00b2ff"),t.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",h+21).attr("xlink:href",u.down).on("click",(function(){r<a.length-1&&u.generateArc(a,n,r+1)})),t.append("text").attr("x",95+o).attr("dy",h+35).attr("class","nbr_label").text("Next "+a[r+1].length).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)),r+1>1&&(t.append("circle").attr("cx",80+o).attr("cy",ke-c.length*d+10).attr("r",10).style("fill","#00b2ff"),t.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",ke-c.length*d+1).attr("xlink:href",u.up).on("click",(function(){r-1>=0&&u.generateArc(a,n,r-1)})),t.append("text").attr("x",95+o).attr("dy",ke-c.length*d+Ie).attr("class","nbr_label").text("Previous").attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500))),t.append("rect").attr("x",0).attr("y",400).attr("rx",6).attr("ry",6).attr("width",u.coordinates.width+2).attr("height",u.coordinates.height).style("fill","orange").attr("class","handle").on("click",(function(){u.hideTree()})),t.append("text").attr("x",3).attr("dy",415).attr("class","nbr_label").text(u.count).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),l.nodes=c,l.links=i,l.svg=t,l},waitForElement:function(){var t=this;s["a"].commit("setIsCustomFeature",!0),"none"!==document.getElementById("waitingFrame").style.display?setTimeout(t.waitForElement,5):(window.AQUARIA.passFeature(window.AQUARIA.customfeatureSet,window.AQUARIA.customfeatureSetioid),re["selectAll"]("svg.loaded rect.feature").attr("fill","#a4abdf"),re["select"]("svg.loaded").classed("loaded",!1))}}},qe=Oe,De=(a("9c0e"),Object(I["a"])(qe,ee,ae,!1,null,null,null)),Me=De.exports,Te=function(){var t=this,e=t._self._c;return e("div",{staticClass:"scrim level6",attrs:{id:"nodeLoader"},on:{click:t.hideLoader}},[e("img",{attrs:{src:t.loader}})])},Le=[],Ve={name:"NodeLoader",data:function(){return{loader:a("ae7d")}},props:["coordinates","change"],watch:{change:function(t,e){var a=this;document.querySelectorAll("#nodeLoader > img").forEach((function(t){t.style.marginLeft=a.coordinates.clientX+"px",t.style.marginTop=a.coordinates.clientY-10+"px"}))}},methods:{hideLoader:function(){this.$parent.showLoader=!1,this.$parent.showTree=!1}}},Ee=Ve,Re=(a("9734"),Object(I["a"])(Ee,Te,Le,!1,null,"d0db7e78",null)),Be=Re.exports,je={name:"MatchingStructures",components:{TreeView:Me,NodeLoader:Be},data:function(){return{showTree:!1,prop:null,count:0,treeCoordinates:{},change:0,showLoader:!1,parentElem:".panel"}},props:["showPanel"],watch:{sequence:function(t,e){e.accession!==t.accession&&null!==e.accession&&window.scrollBy(0,100)},treeData:function(t){var e=this;if(null!==t){e.change=e.change+1;var a=e.getTreeCoordinates;e.treeCoordinates.clientX=a.left,e.treeCoordinates.clientY=a.top,e.treeCoordinates.width=a.width,e.treeCoordinates.height=a.height,e.showLoader=!0;var n="".concat(window.BACKEND,"/get_secondary_clusters/");n=n+e.getStructure.accession+"/"+e.getStructure.pdb+"/"+e.getStructure.chain+"/"+t,st()({method:"get",url:n}).then((function(t){e.showTree=!0,e.prop=t.data,e.count=0,t.data.forEach((function(t){e.count+=t.children.length}))}))}else e.showTree=!1}},computed:Object(w["a"])({data:function(){return{hash:s["a"].state.hash,prop:null}},sequence:function(){return s["a"].state.structure},treeData:function(){return s["a"].state.treeData}},Object(x["b"])(["getMatches","getTreeCoordinates","getStructure"])),methods:{closeTab:function(){window.scrollBy(0,100),S["hidePanels"]()}},mounted:function(){var t=this;if(t.getMatches&&Object.hasOwnProperty.call(t.getMatches,"clusters"))for(var e=document.querySelectorAll("[id ^= structure_] > text"),a=0;a<e.length;a++)e[a].addEventListener("click",(function(){var t=this.parentElement.id;console.log(t)}))},updated:function(){ye()}},Ne=je,Fe=(a("64c8"),Object(I["a"])(Ne,Kt,te,!1,null,null,null)),He=Fe.exports,Ue=function(){var t=this,e=t._self._c;return t.showPanel?e("div",{staticClass:"panel",attrs:{id:"ftPanel"}},[e("div",{staticClass:"close",on:{click:t.closeTab}}),e("div",{attrs:{id:"featurePanel"}},[t.getfeatureSets?e("div",{staticClass:"ui-sortable",attrs:{id:"groupedFeatures"}},t._l(t.getfeatureSets,(function(a){return e("div",{key:a[0],staticClass:"featureCollection ui-sortable-handle",attrs:{id:a[0]},on:{click:function(e){return t.toggleTrack(a[0])}}},[e("div",{staticClass:"featureHeader",on:{mouseover:function(e){return t.hightlight(a[0])},mouseout:function(e){return t.removeHightlight(a[0])}}},[e("p",{attrs:{id:"arrow"}},[t._v("")]),e("p",{staticClass:"featureName"},[t._v(t._s(a[0]))]),e("div",{staticClass:"info",on:{mouseover:function(e){return t.showInfo(a,e)}}},[t._v("?")])]),e("div",{staticClass:"featureTrack ui-sortable",staticStyle:{cursor:"move"}})])})),0):t._e(),e("br")])]):t._e()},Ge=[],ze=(a("b64b"),a("ce4a")),Ze=a("ae8a"),Ye=a("2ef0"),We=a.n(Ye),Je=a("29c86"),Qe=["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"];function $e(){s["a"].commit("setPopupCoordinates",0)}function Xe(t,e){var a="";if(t.urls.length>0){a="<p>";for(var n=0;n<t.urls.length;n++)a+="<a href='"+t.urls[n].href+"' target='_blank'>"+t.urls[n].text+"</a><br>";a+="</p>"}var r="";t.name.includes("&#8201;&#8594;&#8201;")&&(r=t.name.replace(/^.*\(/,""),r=r.replace(/\&.*$/,""));var i="<div id='buttons_eachAa'> <b>See also:</b><p class='pAaColor'> "+r+" &rarr;</p>";Qe.forEach((function(e,a){if(e!=r){var n=ta(e,t.desc,t.start);i=i+"<button id='btnVI_"+e+"'",i=1==n?i+"class='btnAaBold_b'> <b>"+e+"</b> ":i+" class='btnAaBold'> "+e,i+="</button>"}})),i+="</div>";var o=t.desc+"<br>"+a,c="<b>"+t.label+"</b>";t.name.includes("span_missenseHeading")?(s["a"].commit("setIsDefaultFeature",!1),t.start!=t.end?(s["a"].commit("setVariant",t.start+"-"+t.end),s["a"].commit("setPopupTitle",t.label),Ke(t.start+"-"+t.end,t.label)):(s["a"].commit("setVariant",t.start),s["a"].commit("setPopupTitle",t.label),Ke(t.start,t.label))):(s["a"].commit("setVariant",-1),s["a"].commit("setIsDefaultFeature",!0),c=t.start===t.end?c+"( Residue "+t.start+") ":c+"( Residues "+t.start+"-"+t.end+") ",s["a"].commit("setPopupTitle",c),s["a"].commit("setPopupText",o),s["a"].commit("setVariantIdx",-1),s["a"].commit("setPopupCoordinates",document.querySelector("#"+e.id).getBoundingClientRect()),s["a"].commit("setPopupType","coveragemap")),t.hasOwnProperty("hc_go")&&t.hasOwnProperty("hc_ec")&&t.hasOwnProperty("hc_species")?(console.log("CATH plot data"),console.log(t),ea(t).then((function(){aa()}))):(console.log("CATH plot no data"),console.log(t))}function Ke(t,e){var a=s["a"].getters.getVariantResidues;if(a.hasOwnProperty(t)&&a[t].hasOwnProperty("theOrigFeatStr"))for(var n=0;n<a[t].theOrigFeatStr.length;n++)if(e.includes(a[t].theOrigFeatStr[n])){s["a"].commit("setVariantIdx",n);break}}function ta(t,e,a){var n="<toReplace_varInfo_"+t+">",r="</toReplace_varInfo_"+t+">",i=e.indexOf(n),o=e.lastIndexOf(r),c=e.substring(i,o),l=s["a"].state.variantStructs.variantStructs;return!!(c.match("UniProt")||c.match("FunVar")||c.match("COSMIC")||l.hasOwnProperty(a)&&l[a].hasOwnProperty(t)&&l[a][t].hasOwnProperty("pdbs")&&l[a][t]["pdbs"].length>0)}function ea(t){return new Promise((function(e,a){"undefined"!==typeof t.hc_go&&t.hc_go.hasOwnProperty("data")&&t.hc_go.data.hasOwnProperty("series")&&t.hc_go.data.series.length>=2?na("hc_go_div",t.hc_go.data.series[0].data,t.hc_go.data.series[1].data,"",t.hc_go.data.series[0].size,t.hc_go.data.series[0].dataLabels.color,t.hc_go.data.series[0].dataLabels.distance,t.hc_go.data.series[1].innerSize,t.hc_go.data.series[0].name,t.hc_go.data.series[1].name,t.hc_go.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_div"))})).catch((function(t){console.log("CATH plot: 2"),ra("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+t)}))})):(ra("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>"})),console.log("CATH plot: 3")),"undefined"!==typeof t.hc_ec&&t.hc_ec.hasOwnProperty("data")&&t.hc_ec.data.hasOwnProperty("series")&&t.hc_ec.data.series.length>=2?na("hc_ec_div",t.hc_ec.data.series[0].data,t.hc_ec.data.series[1].data,"",t.hc_ec.data.series[0].size,t.hc_ec.data.series[0].dataLabels.color,t.hc_ec.data.series[0].dataLabels.distance,t.hc_ec.data.series[1].innerSize,t.hc_ec.data.series[0].name,t.hc_ec.data.series[1].name,t.hc_ec.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_div"))})).catch((function(t){ra("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+t)}))})):ra("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>"})).catch((function(){})),"undefined"!==typeof t.hc_species&&t.hc_species.hasOwnProperty("data")&&t.hc_species.data.hasOwnProperty("series")&&t.hc_species.data.series.length>=2?na("hc_species_div",t.hc_species.data.series[0].data,t.hc_species.data.series[1].data,"",t.hc_species.data.series[0].size,t.hc_species.data.series[0].dataLabels.color,t.hc_species.data.series[0].dataLabels.distance,t.hc_species.data.series[1].innerSize,t.hc_species.data.series[0].name,t.hc_species.data.series[1].name,t.hc_species.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_div"))})).catch((function(t){ra("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+t)}))})):ra("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>"})),e()}))}function aa(){var t=document.getElementsByClassName("highcharts-pie-series");for(var e in t)if(t.hasOwnProperty(e)){var a=t[e].getElementsByTagName("path");for(var n in a)if(a.hasOwnProperty(n)){var r=a[n].getAttribute("fill");a[n].removeAttribute("fill"),a[n].setAttribute("style","fill:"+r)}}}function na(t,e,a,n,r,s,i,o,c,l,u){return new Promise((function(d,h){ra(t).then((function(){try{Je.chart(t,{chart:{type:"pie",margin:0},title:{text:n},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"%"},series:[{name:c,data:e,size:r,dataLabels:{enabled:!1,formatter:function(){return this.y>3?this.point.name:null},color:s,distance:i}},{name:l,data:a,innerSize:o,dataLabels:{enabled:!1,formatter:function(){return this.y>1?"<b>"+this.point.name+":</b> "+this.y+"%":null},color:u},id:"versions"}],responsive:{rules:[{condition:{maxWidth:100},chartOptions:{series:[{},{id:"versions",dataLabels:{enabled:!1}}]}}]}}),d()}catch(h){console.log("Highcharts error"),console.log(h),d(),console.log("In the highcharts plotting function")}}))}))}function ra(t){return new Promise((function(e,a){document.getElementById(t)&&document.getElementById(t).remove();var n=document.createElement("div");document.getElementById("superFamCharts").append(n),n.id=t,n.style="width: 100px; height: 100px; margin: 0 auto; background-color: white;",e()}))}var sa=0,ia=0;function oa(t){document.querySelector("#featurePanel > .ruler")&&document.querySelector("#featurePanel > .ruler").remove(),_e("featurePanel"),t.forEach((function(t){var e=se.a.select("#"+t[0].replace(/\s/g,"\\ ")),a=e.select(".featureTrack").selectAll("div");for(var n in t[1])"Added Features"==t[0]&&t[1][n].hasOwnProperty("SeqHash")&&""!=t[1][n].SeqHash&&t[1][n].SeqHash!=s["a"].state.Matches.sequences[0].uniprot_hash||a.data([t[1][n]]).enter().append("div").attr("class","track").attr("id",(function(t){return"track_"+t.Category})).html((function(t){if(""!=t.Type){if("UniProt"==t.Server||"PredictProtein"==t.Server||"CATH"==t.Server||"SNAP2"==t.Server||"COSMIC"==t.Server||"FunVar"==t.Server)var e="Curated Features";else e=t.Server;return"<p><span class='featureSetName'>"+t.Category+'</span> <i class="featureSetName_">('+t.Type.replace(/_/g," ")+")</i> &nbsp;&nbsp; <span class='info'>?</span>  <span class='source'>"+e.replace(/[sS]$/,"")+"</span> </p> <span class='tooltiptext'>"+t.Description+"</span>"}return e="UniProt"==t.Server||"PredictProtein"==t.Server||"CATH"==t.Server||"SNAP2"==t.Server||"COSMIC"==t.Server||"FunVar"==t.Server?"Curated Features":t.Server,'<p><span class="featureSetName">'+t.Category+"</span> &nbsp;&nbsp; <span class='info'>?</span> <span class='source'>"+e.replace(/[sS]$/,"")+"</span></p> <span class='tooltiptext'>"+t.Description+"</span>"})).each(ca)}))}function ca(t,e){var a=t.Tracks;for(var n in a){var r=se.a.select(this),i=ua(r);i.attr("id","ftrack_"+sa+"_"+n).on("click",(function(){if("loaded"==se.a.select(this).attr("class"))s["a"].commit("setLoadedFeature",{set:null,track:null}),se.a.select("svg.loaded").classed("loaded",!1),document.querySelector(".featureHeader").click(),ze["b"](),$e(),S["hidePanels"]();else{document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove(),"Added Features"!=t.Server&&s["a"].commit("setIsCustomFeature",!1);var e=se.a.select(this).attr("id").split("_")[2];s["a"].commit("setLoadedFeature",{set:t,track:e}),se.a.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),se.a.select("svg.loaded").classed("loaded",!1),se.a.select(this).attr("class","loaded"),S["hidePanels"]()}})).on("mouseover",(function(){se.a.select(this).selectAll("rect.feature").attr("fill",(function(){return se.a.select(this).attr("color")}))})).on("mouseout",(function(){"loaded"!==se.a.select(this).attr("class")&&se.a.select(this).selectAll("rect.feature").attr("fill","#a4abdf")})).append("rect").attr("width",ia+s["a"].state.margin.left).attr("height",25).attr("class","bg").attr("fill","none"),se.a.select("svg#ftrack_"+sa+"_"+n).append("g").attr("transform","translate("+s["a"].state.margin.left+",0)").append("rect").attr("width",ia).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion"),la(t,a,n)}sa++}function la(t,e,a){for(var n in e[a]){var r=s["a"].state.featCount+1;s["a"].commit("setFeatCount",r),se.a.select("#ftrack_"+sa+"_"+a+" g").append("rect").attr("width",(function(){return(e[a][n].size+1)*s["a"].state.srw>2?(e[a][n].size+1)*s["a"].state.srw:2})).attr("height",14).attr("id","feature_"+sa+"_"+a+"_"+n).attr("transform","translate("+e[a][n].start*(s["a"].state.srw-.0085)+",6)").attr("color",e[a][n].color).attr("fill","#a4abdf").attr("fill-opacity",(function(){return"single_track"==t.Class?.3:1})).attr("class","feature").on("mouseover",(function(){se.a.select(this).attr("stroke-width","2px").attr("stroke","white"),Xe(e[this.id.split("_")[2]][this.id.split("_")[3]],this)})).on("mouseout",(function(){se.a.select(this).attr("stroke-width","0px"),$e()}))}}function ua(t){var e=document.getElementById("structure-viewer").offsetWidth-s["a"].state.margin.right-s["a"].state.margin.left;ia=document.getElementById("structure-viewer").offsetWidth-s["a"].state.margin.right;var a=40-s["a"].state.margin.top-s["a"].state.margin.bottom+35,n=t.append("svg").attr("width",ia).attr("height",a).attr("viewBox","0 0 "+e+" "+a).attr("preserveAspectRatio","none");return n}var da,ha,pa,ga={name:"Features",props:["showPanel"],data:function(){return{jAlignment:null,jController:null,accession:""}},computed:Object(w["a"])({Loader:function(){return s["a"].state.Loader},sideChain:function(){return s["a"].state.sidechain}},Object(x["b"])(["getfeatureSets","getcompleteServerNum","getLoadedFeature","getCoverageMap"])),watch:{showPanel:function(t){console.log(t)},getcompleteServerNum:function(t,e){var a=this,n=this.$store.state.aggregatedAnnotations,r=this.$store.state.completeExtServers;t!==e&&(a.groupFeatureSets(n,r),a.getCoverageMap&&Object.keys(a.$route.query).length>0&&a.checkAddedFeature())},Loader:function(t){var e=this;t||(e.$store.state.structure.accession!==e.accession&&(e.accession=e.$store.state.structure.accession,e.fetch_features(this.$store.state.Matches.sequences)),(Object.keys(e.$route.query).length>0||e.getLoadedFeature.set)&&s["a"].commit("setLoadedFeature",{set:e.getLoadedFeature.set,track:0}),window.addEventListener("hashchange",(function(t){return e.updateSelection(window.location.hash)}),{}))},getLoadedFeature:function(t){t.set?(ze["a"](t.set,t.track),null!==this.sideChain&&ze["c"](this.sideChain)):ze["b"]()},getCoverageMap:function(t){var e=this;t&&(e.getLoadedFeature.set||e.checkAddedFeature())}},methods:{closeTab:function(){window.scrollBy(0,100),S["hidePanels"]()},clearResidues:function(){_["embededJolecule"].controller.clearSelectedResidues()},toggleTrack:function(t){var e=document.getElementById(t).lastChild;t=t.replace(/\s/g,"\\ "),"block"!==e.style.display?(e.style.display="block",document.querySelector("#"+t+" #arrow").innerText=""):(e.style.display="none",document.querySelector("#"+t+" #arrow").innerText="")},hightlight:function(t){document.querySelector("#"+t.replace(/\s/g,"\\ ")+" > .featureHeader").style.background="#bebebe"},removeHightlight:function(t){document.querySelector("#"+t.replace(/\s/g,"\\ ")+" > .featureHeader").style.background="#ccc"},showInfo:function(t,e){s["a"].commit("setPopupTitle",t[0]),s["a"].commit("setPopupText",t[1][0].About),s["a"].commit("setIsDefaultFeature",!0),s["a"].commit("setPopupType","featureInfo"),s["a"].commit("setVariantIdx",-1),s["a"].commit("setPopupCoordinates",e.srcElement.getBoundingClientRect())},fetch_features:function(t){var e=[],a=[];t.forEach((function(t){e.push(t.primary_accession),a.push(t.uniprot_hash)})),Ze["a"](e)},groupFeatureSets:function(t,e){if(t.length>0){var a=t||a,n=We.a.groupBy(a,(function(t){return t.Server}));n=Object.keys(n).map((function(t){return[String(t),n[t]]})),(null===s["a"].getters.getfeatureSets||s["a"].getters.getfeatureSets.length<n.length)&&s["a"].commit("setfeatureSets",n)}},checkAddedFeature:function(){var t=this,e=this.$store.state.featureSets?this.$store.state.featureSets:[];e.length>0&&e.forEach((function(e){e[0].includes("Added")&&null===t.getLoadedFeature.set&&s["a"].commit("setLoadedFeature",{set:e[1][0],track:0})}))},updateSelection:function(t){V["d"]()}},updated:function(){fe(this.$store.state.Matches.sequences[0]),oa(this.getfeatureSets)}},ma=ga,fa=(a("a3c1"),Object(I["a"])(ma,Ue,Ge,!1,null,null,null)),va=fa.exports,ya={name:"Tabs",components:{MatchingStructures:He,Features:va},data:function(){return{MS:a("39b5"),FT:a("9db5"),activateStructs:!1,activateFeats:!1,showStructures:!1,showFeatures:!1}},computed:Object(w["a"])({},Object(x["b"])(["getFeatCount","getStructCount","getMatches"])),methods:{renderClusters:function(){this.$parent.appendHash("Structures"),this.showStructures=!0,this.showFeatures=!1,this.activateTab("Structures"),this.inactivateTab("Features")},renderFeatures:function(){this.$parent.appendHash("Features"),this.showFeatures=!0,this.showStructures=!1,this.activateTab("Features"),this.inactivateTab("Structures")},dismissPanel:function(){this.showStructures=!1,this.showFeatures=!1,this.$parent.dropFragment(),this.hideTabs()},activateTab:function(t){document.querySelector("#"+t).style.display="block",document.querySelectorAll(".tab").forEach((function(t){t.classList.remove("active")})),document.querySelector("#"+t).classList+=" active"},inactivateTab:function(t){document.querySelectorAll(".tab").forEach((function(t){t.classList.remove("inactive")})),document.querySelector("#"+t).classList+=" inactive"},hideTabs:function(){document.querySelectorAll(".tab").forEach((function(t){t.classList.remove("inactive")})),document.querySelectorAll(".tab").forEach((function(t){t.classList.remove("active")}))}},mounted:function(){var t=this;window.location.hash.toLowerCase().includes("structures")&&(t.showStructures=!0),window.location.hash.toLowerCase().includes("features")&&(t.showFeatures=!0)}},ba=ya,wa=(a("060d"),Object(I["a"])(ba,$t,Xt,!1,null,"5f19305b",null)),Sa=wa.exports,_a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"rel",attrs:{id:"map"}},[e("FeatureMap",{attrs:{drawFeature:t.drawFeature}}),t.showLoader?e("mapLoader"):t._e()],1)},xa=[],Aa=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"featureMap"}})},Ca=[],ka={name:"FeatureMap",props:["drawFeature"],data:function(){return{seqLength:0,scale:null,coverageMapsrw:0,residueColor:null}},computed:Object(w["a"])({getLoadedFeature:function(){return s["a"].state.loadedFeature}},Object(x["b"])(["getVariantResidues","getLoadedFeature","getVariantIdx","getVariant","getMatches"])),watch:{getLoadedFeature:function(){var t=this;null===t.getLoadedFeature.set?document.querySelectorAll('[id^="feature_residue_').forEach((function(t){t.remove()})):document.querySelector('[id^="feature_residue_')?(document.querySelectorAll('[id^="feature_residue_').forEach((function(t){t.remove()})),t.drawMap(t.getLoadedFeature)):t.drawMap(t.getLoadedFeature)}},methods:{drawMap:function(t){var e=this;this.setScales(),t.set.Tracks[0].forEach((function(t,a){t.start=+t.start,t.end=+t.end,e.drawFeatureResidues(t)})),!this.$store.getters.getIsDefaultFeature&&this.getVariantResidues&&(e.loadPopup(t),console.log("The data here is "+e.getVariantIdx+" "+e.getVariant),console.log(t))},loadPopup:function(t){var e=this,a=Object.keys(e.getVariantResidues).sort((function(t,a){return e.getVariantResidues[t].order-e.getVariantResidues[a].order})),n=a[0],r='[id^="feature_residue_'+n+'"]',i=document.querySelector(r);t.set.Tracks[0].forEach((function(t){if(e.getVariantResidues[t.start]){var a=e.getVariantResidues[t.start];s["a"].commit("setPopupTitle",t.label),s["a"].commit("setPopupText",a),s["a"].commit("setVariantIdx",0),s["a"].commit("setIsDefaultFeature",!1),s["a"].commit("setVariant",t.start),null!=i&&s["a"].commit("setPopupCoordinates",i.getBoundingClientRect())}}))},setScales:function(){this.seqLength=this.getMatches.sequences[0].length,this.scale=re["scale"].linear().domain([1,this.seqLength]).range([1,window.innerWidth]),this.coverageMapsrw=this.scale(this.seqLength)/this.seqLength},drawFeatureResidues:function(t){for(var e=this,a="",n="",r="",i=t.start;i<=t.end;i++){var o='[id^="residue_'+i+'"]',c=document.querySelector(o),l=document.querySelector(o+"> rect");if("undefined"!==c&&"undefined"!==l&&null!=c&&null!=l){c.id.includes("Dark")?(n=15,r=20):(n=25,r=document.querySelector(o+"> rect").getBoundingClientRect().height);var u=re["select"]("#map > #coverageMap > g");u.append("g").attr("id","feature_residue_"+i+"_"+document.querySelector(o).id.split("_")[3]).append("rect").attr("width",e.coverageMapsrw).attr("height",r).attr("transform",(function(){var t=document.querySelector(o+"> rect").getBoundingClientRect().height;return 18===t?"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+",17)":14===t?"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+",19)":19===t?"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+",16)":"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+","+n+")"})).attr("fill",t.color).on("mouseover",(function(n){e.residueColor=re["select"](this).style("fill"),re["select"](this).attr("stroke","white").attr("stroke-width",1),c.id.includes("Dark")?s["a"].commit("setPopupTitle",t.label+": Dark region"):s["a"].commit("setPopupTitle",t.label),t.desc!==t.label?e.getVariantResidues[t.start]?(a=e.getVariantResidues[t.start],s["a"].commit("setPopupText",a),s["a"].commit("setVariantIdx",0),s["a"].commit("setVariant",t.start)):t.desc.length>0&&"undefined"!==t.desc?(a=t.desc+" </br> ",a+="Structures with residue "+this.parentElement.id.split("_")[1]+": ",s["a"].commit("setPopupText",a),s["a"].commit("setVariant",-1),s["a"].commit("setIsDefaultFeature",!1)):s["a"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[2]+": "):(s["a"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[2]+": "),s["a"].commit("setVariant",-1)),s["a"].commit("setIsDefaultFeature",!1),s["a"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["a"].commit("setPopupCoordinates",this.getBoundingClientRect()),s["a"].commit("setPopupType","coveragemap")})).on("mouseout",(function(){re["select"](this).attr("stroke",e.residueColor).attr("stroke-width",0)}))}}}}},Ia=ka,Pa=(a("e6fc"),Object(I["a"])(Ia,Aa,Ca,!1,null,null,null)),Oa=Pa.exports,qa=function(){var t=this;t._self._c;return t._m(0)},Da=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"animated"},[e("div",{staticClass:"innerGradient"})])}],Ma={name:"mapLoader"},Ta=Ma,La=(a("f113"),Object(I["a"])(Ta,qa,Da,!1,null,"6934c327",null)),Va=La.exports,Ea=50,Ra=200,Ba=[61,28],ja={name:"CoverageMap",components:{FeatureMap:Oa,mapLoader:Va},data:function(){return{seqLength:0,scale:null,coverageMapsrw:0,residueColor:null,densityScale:null,darkRegions:[],myArray:[1],coverageMapData:null,drawFeature:!1,showLoader:!0,structure:{accession:null},docFrag:null}},computed:Object(w["a"])({getLoadedFeature:function(){return s["a"].state.loadedFeature},secondaryStructure:function(){return s["a"].state.secondaryStructure},sequence:function(){return s["a"].state.currentSequence},loader:function(){return s["a"].state.Loader}},Object(x["b"])(["getGene","getStructure","getOneAaCodes","getThreeAaCodes","getLoadedFeature","getSequences","getCoveragemapOverlay","getPdbIndex"])),watch:{getCoveragemapOverlay:function(t){this.showLoader=t},getLoadedFeature:function(t){var e=this,a=Object(A["c"])(e.getStructure.pdb,e.getStructure.chain),n=s["a"].state.Matches.clusters[a.cluster].members[a.member];null===t.set&&(e.drawFeature=!1),!document.querySelector("#map > #coverageMap")&&e.getStructure.accession?e.updateUI():(e.setStructFeatmap(n),e.drawFeature=!0)},secondaryStructure:function(t,e){var a=this;if(!e||t[1]!==e[1])if(document.querySelector("#map > #coverageMap")){var n=Object(A["c"])(a.getStructure.pdb,a.getStructure.chain),r=s["a"].state.Matches.clusters[n.cluster].members[n.member];a.selectStructmap(r)}else a.getPdbIndex.member>=0&&a.getStructure.accession&&a.updateUI()},sequence:function(t,e){var a=this,n=!1;if(e?e.primary_accession!==t.primary_accession?n=!0:e.sequence===t.sequence&&s["a"].commit("setCoveragemapOverlay",!1):n=!0,n){document.querySelector("#map > #coverageMap")&&document.querySelector("#map > #coverageMap").remove(),a.init(t.primary_accession);var r={selector:[t.primary_accession],selectPDB:this.$store.state.structure.pdb,selectChain:this.$store.state.structure.chain},i="".concat(window.BACKEND,"/get_3D_alignment");st()({method:"get",url:i,params:r}).then((function(t){var e=t.data;e.secondary_structure.push(r.selectPDB+"-"+r.selectChain),s["a"].commit("setSecondaryStructure",e.secondary_structure)}))}},loader:function(t){var e=this;if(!t){var a=new V["a"](_["embededJolecule"]);a.addEventListener("viewcommit",(function(){!document.querySelector("#map > #coverageMap")&&e.getStructure.accession&&e.updateUI()}))}}},mounted:function(){var t=this;this.getStructure.accession&&t.init(t.getStructure.accession)},methods:{updateUI:function(){var t=this;if(!document.querySelector("#map > #coverageMap")){t.drawMap(t.coverageMapData),document.querySelector("#map").appendChild(t.docFrag);var e=Object(A["c"])(t.getStructure.pdb,t.getStructure.chain),a=s["a"].state.Matches.clusters[e.cluster].members[e.member];null!==t.getLoadedFeature.set?(t.setStructFeatmap(a),t.drawFeature=!0):t.selectStructmap(a),s["a"].commit("setCoverageMap",!0),s["a"].commit("setCoveragemapOverlay",!1)}},init:function(t){var e=this;s["a"].commit("setCoveragemapOverlay",!0);var a="".concat(window.BACKEND,"/getCoverageMap"),n={selector:[t]};st()({method:"get",url:a,params:n}).then((function(t){console.log(t.data),e.coverageMapData=t.data}))},drawMap:function(t){var e=this;da=e.renderSVG(),da.append("rect").attr("id","selection"),this.drawLine(da),this.setScales(t),this.drawDarkRegions(t),t.secondaryStructures.forEach((function(a){a.start=+a.start,a.end=+a.end,e.drawResidues(a,t)}))},setScales:function(t){var e=this;this.seqLength=t.seqLength,this.scale=re["scale"].linear().domain([1,this.seqLength]).range([1,window.innerWidth]),this.coverageMapsrw=this.scale(t.seqLength)/t.seqLength;var a=Math.max.apply(Math,Object(ne["a"])(t.densityMap));e.densityScale=a<=Ra?re["scale"].linear().domain([Math.log(1),Math.log(Ra)]).range(Ba):re["scale"].linear().domain([Math.log(1),Math.log(Math.max.apply(Math,Object(ne["a"])(t.densityMap)))]).range(Ba)},drawLine:function(t){t.append("line").style("stroke","#434343").attr("x1",1).attr("y1",26).attr("x2",window.innerWidth).attr("y2",26)},renderSVG:function(){this.docFrag=document.createDocumentFragment();var t=re["select"](this.docFrag).append("svg").attr("id","coverageMap").attr("height",Ea).attr("width","100%").attr("viewBox","0, 0, "+window.innerWidth+","+Ea).attr("preserveAspectRatio","none"),e=t.append("g");return e},drawResidues:function(t,e){var a=da,n="",r="",i=this;if("SHEET"===t.Type)var o=18,c=17,l="sheet";else"COIL"===t.Type?(o=14,c=19,l="coil"):(o=19,c=16,l="helix");for(var u=t.start;u<=t.end;u++){var d="hsl(0, 0%,"+i.densityScale(Math.log(e.densityMap[u-1]))+"%)";a.append("g").attr("id","residue_"+u+"_"+t.Type+"_"+e.densityMap[u-1]).append("rect").attr("transform","translate("+(u*i.coverageMapsrw-i.coverageMapsrw)+","+c+")").attr("width",(function(){return i.coverageMapsrw<.5?i.coverageMapsrw+.25:i.coverageMapsrw})).attr("height",o).attr("fill",d).attr("class",l).attr("stroke-width",1).on("mouseover",(function(t){i.residueColor=re["select"](this).style("fill"),re["select"](this).attr("stroke","white").attr("stroke-width",1);var e=this.parentElement.id.split("_")[1];s["a"].commit("setRes",e);var a=i.getSequences[0].sequence[e-1],o=i.getOneAaCodes.indexOf(a),c=i.getThreeAaCodes[o];if(r='<span style="font-weight: 700;">'+i.getGene+"</span> sequence: "+c+""+e,this.parentElement.id.includes("active")){var l=_["joleculeAlignment"],u=_["embededJolecule"].controller,d=l.mapSeqResToPdbResOfChain(0,e,i.getStructure.chain),h=u.soup.findResidueIndices(0,d[1],d[2]),p=u.soup.getResidueProxy().load(h).resType;p=p.substr(0,1)+p.substr(1).toLowerCase(),n=i.getStructure.pdb+"-"+i.getStructure.chain+" structure: "+p+"-"+d[2]+"</br> Structures with residue "+this.parentElement.id.split("_")[1]+": "}else n="Structures with residue "+this.parentElement.id.split("_")[1]+": ";s["a"].commit("setPopupTitle",r),s["a"].commit("setPopupText",n),s["a"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["a"].commit("setPopupCoordinates",this.getBoundingClientRect()),s["a"].commit("setPopupType","coveragemap")})).on("mouseout",(function(){setTimeout((function(){document.getElementById("loadedPin").classList.contains("loadedPin_active")||(s["a"].commit("setPopupCoordinates",0),s["a"].commit("setPopupType",null))}),5e3),re["select"](this).attr("stroke",i.residueColor).attr("stroke-width",0)}))}},selectStructmap:function(t){var e=this;re["selectAll"]('[id^="residue_"')[0].map((function(t,a){var n=t.id.split("_")[3];t.id.includes("active")&&(t.id=t.id.split("_active")[0]),re["select"](t).select("rect").attr("fill","hsl(0, 0%,"+e.densityScale(Math.log(n))+"%)")}));var a=s["a"].getters.getSecondaryStructure[0],n=t.seq_start[0],r=t.seq_end[t.seq_start.length-1],i=(r-n)*e.coverageMapsrw+e.coverageMapsrw;document.querySelector("#map > #coverageMap > rect")&&document.querySelector("#map > #coverageMap > rect").remove(),re["select"]("#map > #coverageMap > g").select("rect#selection").attr("width",i).attr("height",30).attr("transform","translate("+(n*e.coverageMapsrw-e.coverageMapsrw)+",11)").attr("fill","white").attr("stroke","#434343").attr("stroke-width",1).attr("rx",6).attr("ry",6),a.map((function(t){if(t.end)var a=t.start,n=t.end,r=t.type;else a=t.split("\n")[0].split(":")[1].split("-")[0],n=t.split("\n")[0].split(":")[1].split("-")[1],r=t.split("\n")[0].split(":")[0];for(var s=a;s<=n;s++){var i='[id^="residue_'+s+'_"]';if(re["select"](i+"> rect").attr({fill:e.getStructureColor(r)}),document.querySelector(i))document.querySelector(i).id=document.querySelector(i).id+"_active";else{var o={Type:"COIL"};o.start=s,o.end=s,e.drawResidues(o,e.coverageMapData),document.querySelector(i).id=document.querySelector(i).id+"_active"}}}))},setStructFeatmap:function(t){var e=this;re["selectAll"]('[id^="residue_"')[0].map((function(t,a){var n=t.id.split("_")[3];re["select"](t).select("rect").attr("fill","hsl(0, 0%,"+e.densityScale(Math.log(n))+"%)")}));var a=s["a"].getters.getSecondaryStructure[0],n=t.seq_start[0],r=t.seq_end[t.seq_start.length-1],i=(r-n)*e.coverageMapsrw+e.coverageMapsrw;document.querySelector("#map > #coverageMap > rect")&&document.querySelector("#map > #coverageMap > rect").remove(),re["select"]("#map > #coverageMap > g > #selection").attr("width",i).attr("height",30).attr("transform","translate("+(n*e.coverageMapsrw-e.coverageMapsrw)+",11)").attr("fill","white").attr("stroke","#434343").attr("stroke-width",1).attr("rx",6).attr("ry",6),a.map((function(t){if(t.end)var e=t.start,a=t.end;else e=t.split("\n")[0].split(":")[1].split("-")[0],a=t.split("\n")[0].split(":")[1].split("-")[1];for(var n=e;n<=a;n++){var r='[id^="residue_'+n+'_"]';re["select"](r+"> rect").attr({fill:"#cccccc"})}}))},getStructureColor:function(t){return"SHEET"===t?"#f6c719":"COIL"===t?"#6f9e52":"#6491b6"},drawDarkRegions:function(t){var e=[],a=this,n=da;return t.densityMap.forEach((function(t,e){if(0===t){var r=e+1;n.append("g").attr("id","residue_"+r+"_Dark_0").append("rect").attr("transform","translate("+(r*a.coverageMapsrw-a.coverageMapsrw)+",14)").attr("width",(function(){return a.coverageMapsrw<.5?a.coverageMapsrw+.25:a.coverageMapsrw})).attr("height",30).attr("fill","#434343").attr("opacity",0).attr("stroke-width",1).on("mouseover",(function(t){a.residueColor=re["select"](this).style("fill"),re["select"](this).attr("stroke","white").attr("stroke-width",1),s["a"].commit("setPopupTitle","Residue "+this.parentElement.id.split("_")[1]+" : Dark region"),s["a"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[1]+": "),s["a"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["a"].commit("setPopupCoordinates",this.getBoundingClientRect()),s["a"].commit("setPopupType","coveragemap")})).on("mouseout",(function(){setTimeout((function(){document.getElementById("loadedPin").classList.contains("loadedPin_active")||(s["a"].commit("setPopupCoordinates",0),s["a"].commit("setPopupType",null))}),5e3),re["select"](this).attr("stroke",a.residueColor).attr("stroke-width",0)}))}})),e}}},Na=ja,Fa=(a("3214"),Object(I["a"])(Na,_a,xa,!1,null,"093b5745",null)),Ha=Fa.exports,Ua=a("8ac5"),Ga=function(){var t=this,e=t._self._c;return t.data.error?e("div",{staticClass:"ErrorPanel overlay level3",attrs:{id:"AboutError"}},[e("a",{staticClass:"close",attrs:{href:"#"},on:{click:t.loadLastSuccess}}),e("div",[e("p",{staticClass:"thetitle"},[t._v(t._s(t.data.error))]),e("p",{staticClass:"intro1"},[t._v(t._s(t.data.errorMsg)+" "),t.data.errorMsg?e("br"):t._e(),t._v(" "),t.data.errorMsg?e("br"):t._e(),t._v(" Press 'Report Issue' to tell the Aquaria team, or press 'OK' to return to previous structure.")]),e("div",[e("md-button",{staticClass:"md-raised md-primary",attrs:{href:t.lastURL}},[t._v("OK")]),e("md-button",{staticClass:"md-raised md-primary",attrs:{href:t.issuesURL,target:"_blank"}},[t._v("Report Issue")])],1)])]):t._e()},za=[],Za={name:"Errors",data:function(){return{issues:"",title:"",changes:"https://github.com/aqclient/dev.aqclient.github.io/issues/new?labels=enhancement",logo:a("3198")}},computed:{data:function(){return{message:s["a"].state.message,error:s["a"].state.error,errorMsg:s["a"].state.errorMsg}},issuesURL:function(){return'https://github.com/aqclient/dev.aqclient.github.io/issues/new?title=Problem with this page&labels=bug&body=<a href="'+encodeURIComponent(window.location.href)+'">'+this.data.error+"</a>"},pageUrl:function(){return window.location.href},lastURL:function(){return window.location.origin}},methods:{loadLastSuccess:function(){window.location.pathname=localStorage.getItem("LastSuccess")?localStorage.getItem("LastSuccess"):"/P04637"}}},Ya=Za,Wa=(a("41ff"),Object(I["a"])(Ya,Ga,za,!1,null,"72919d45",null)),Ja=Wa.exports,Qa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"HelpPanel hide dialouge-window overlay level7",attrs:{id:"UserHelp"}},[e("a",{staticClass:"close",attrs:{href:"#"},on:{click:t.closeHelp}}),e("div",{staticClass:"fill",attrs:{id:"fullwindow-video"}},t._l(t.videos,(function(a){return e("youtube",{key:a.id,ref:"youtube",refInFor:!0,staticClass:"hide",attrs:{id:a.id,"video-id":a.id},on:{paused:function(e){return t.paused(e)},ended:function(e){return t.finished(e)}}})})),1),e("div",{attrs:{id:"contents"}},[e("p",{staticClass:"thetitle"},[t._v(t._s(t.data.title))]),e("p",{staticClass:"intro"},[t._v("Watch tutorial videos to get started.")]),e("p",{staticClass:"intro"},[t._v("Skip watching tutorial videos and start using Aquaria.")]),t.data.newUser?t._e():e("Playlist",{attrs:{playlist:t.videos}}),t.data.newUser?e("div",[e("youtube",{ref:"youtube",attrs:{id:"intro-video","video-id":"FAQ3yVGYSzY"},on:{playing:function(e){return t.playing(e)},paused:function(e){return t.paused(e)},ended:function(e){return t.finished(e)}}})],1):t._e(),e("a",{attrs:{href:"#",id:"skip"},on:{click:t.closeHelp}},[t._v("Skip > ")])],1)])},$a=[],Xa=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"playlists"}},t._l(t.playlist,(function(a){return e("span",{key:a.id,attrs:{id:a.id},on:{click:function(e){return t.play(a.id)}}},[e("div",{staticClass:"thumbnail-container"},[e("img",{attrs:{src:"https://img.youtube.com/vi/"+a.id+"/0.jpg"}}),e("button",{staticClass:"btn"},[t._v("")])]),e("p",[t._v(t._s(a.title))])])})),0)},Ka=[],tn={name:"Playlist",props:["playlist"],methods:{play:function(t){document.querySelector("#contents").className=" hide",document.getElementById(t).className+=" show",document.getElementById("UserHelp").classList.remove("overlay"),document.getElementById("UserHelp").classList.remove("level7"),document.getElementById("UserHelp").classList.remove("dialouge-window"),document.getElementById("UserHelp").className+=" fullwindow";for(var e=0;e<this.$parent.$children.length;e++)if(this.$parent.$children[e].$attrs.id===t)var a=e;this.$parent.$children[a].player.playVideo()}}},en=tn,an=(a("08a3"),Object(I["a"])(en,Xa,Ka,!1,null,null,null)),nn=an.exports,rn={name:"UserHelp",components:{Playlist:nn},data:function(){return{videos:[{id:"FAQ3yVGYSzY",title:"Introduction to Aquaria"},{id:"UZNEmPOaVrA",title:"How to Calculate Distances"}]}},computed:{data:function(){return{title:s["a"].state.helpTitle,newUser:s["a"].state.newUser}}},methods:{closeHelp:function(){var t=this;if(document.querySelector("iframe.show")){var e=document.querySelector("iframe.show").id;document.getElementById("contents").classList.remove("hide"),document.getElementById(e).classList.remove("show"),document.getElementById("UserHelp").className+=" dialouge-window",document.getElementById("UserHelp").className+=" overlay",document.getElementById("UserHelp").className+=" level7",document.getElementById("UserHelp").classList.remove("fullwindow");var a={h:{}};a.h.id=e,t.paused(a)}else document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",S["RemoveOverlay"](),document.querySelector("#helpbtn").classList.contains("active")&&t.toggleActive(document.querySelector("#helpbtn"))},toggleActive:function(t){"lnk active"===t.className?t.className="lnk":t.className="lnk active"},getIndex:function(t){for(var e=0;e<this.$refs.youtube.length;e++)if(this.$refs.youtube[e].$attrs.id===t)return e},playing:function(t){if(ha=t.h.id,this.$refs.youtube.length)pa=this.getIndex(ha),this.$refs.youtube[pa].player.playVideo();else{this.$refs.youtube.player.playVideo();var e=document.querySelector("#intro-video"),a=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;a&&a.bind(e)()}},paused:function(t){ha=t.h.id,document.querySelector("iframe.active")?this.closeHelp():(this.$refs.youtube.length?(pa=this.getIndex(ha),this.$refs.youtube[pa].player.pauseVideo()):this.$refs.youtube.player.pauseVideo(),(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&document.exitFullscreen())},finished:function(t){ha=t.h.id,this.$refs.youtube.length?(pa=this.getIndex(ha),this.$refs.youtube[pa].player.stopVideo()):this.$refs.youtube.player.stopVideo(),document.querySelector("iframe.active")&&document.querySelector("#UserHelp a.close").click(),document.exitFullscreen(),this.closeHelp()}}},sn=rn,on=(a("8cb2"),Object(I["a"])(sn,Qa,$a,!1,null,null,null)),cn=on.exports,ln=function(){var t=this,e=t._self._c;return t.loader?e("div",{attrs:{id:"waitingFrame"}},[e("div",{attrs:{id:"waitinghtml"}},[e("img",{attrs:{src:t.overlay}}),e("p",{attrs:{id:"appletMessage"}},[t._v(" "+t._s(t.loaderMsg)+" ")])])]):t._e()},un=[],dn={name:"Loader",data:function(){return{overlay:a("8673")}},computed:{loader:function(){return s["a"].state.Loader},loaderMsg:function(){return s["a"].state.LoaderMsg}}},hn=dn,pn=(a("801d"),Object(I["a"])(hn,ln,un,!1,null,"cb681734",null)),gn=pn.exports,mn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"level6",attrs:{id:"popupshell"}},[e("div",{staticClass:"level4",style:{visibility:t.data.popupTitle?"visible":"hidden"},attrs:{id:"popupbody"}},[e("div",{attrs:{id:"popupheader"},on:{mousedown:function(e){return t.dragMouseDown(e)}}},[e("span",{staticClass:"loadedPin",attrs:{id:"loadedPin"},on:{click:function(e){return t.togglePinBehaviour()}}}),e("span",{domProps:{innerHTML:t._s(t.getPopupTitle)}}),e("span",{staticClass:"x",attrs:{id:"x_close"},on:{click:t.hidePopup}})]),t.getPopupText?e("div",{attrs:{id:"content"}},[t.isVariant?e("div",{staticClass:"aaLightBg"},[t.defaultDesc?e("p",{attrs:{id:"spanDefaultDesc"}},[t._v(" "+t._s(t.defaultDesc)+" ")]):t._e(),t._l(t.oneAaCodes,(function(a){return e("div",{key:a,style:{display:a===t.variant?"block":"none"},attrs:{id:"divVarInfo_"+a}},[t._l(t.getAaDataAsArr(a),(function(a){return e("expandable-text-line",{key:a,attrs:{"use-click":""},domProps:{innerHTML:t._s(a+".")}})})),e("i",[t._v("Structures with "+t._s(t.getOldAa())+t._s(t.getVarDisplay())+t._s(a)+":")]),t._v(" "),e("span",{class:t.getIsShownVar(t.variant),on:{click:function(e){return t.showTreeView(e,a)}}},[t._v(t._s(t.getPdbCount(a)))])],2)})),e("hr",{staticClass:"anAaHr",attrs:{id:"anAaHr",hidden:t.isHrHidden()}}),e("div",{attrs:{id:"divPosInfo"}},[e("span",{staticClass:"weight700",domProps:{innerHTML:t._s(t.getResInfo())}}),e("br"),t._l(t.getPosInfoDataAsArr(),(function(a,n){return e("span",{key:n},[e("expandable-text-line",{attrs:{"use-click":""}},[e("i",[e("span",{domProps:{innerHTML:t._s(n)}}),t._v(": ")]),t._l(a,(function(a){return e("span",{key:a,domProps:{innerHTML:t._s(a+". ")}})}))],2)],1)})),e("i",[t._v("Structures with residue "+t._s(t.getVariant)+": ")]),e("span",{class:t.getIsShownRes(),on:{click:function(e){return t.showTreeView(e)}}},[t._v(t._s(t.getTotalPdbCount))])],2)],2):t._e(),t.isVariant||t.getInfoPopup?t._e():e("div",{staticClass:"aaLightBg"},[e("i",{domProps:{innerHTML:t._s(t.getPopupText)}}),t.getIsDefaultFeature?t._e():e("span",{class:t.getTotalPdbCount>0?"hasStruct":"noStruct",on:{click:function(e){t.getTotalPdbCount>0&&t.showTreeView(e,null,t.getPopupText.replace(/\D/g,""))}}},[t._v(" "+t._s(t.getTotalPdbCount)+" ")])])]):t._e(),e("div",{staticClass:"btnsDiv",style:{display:t.isVariant?"block":"none"}},[e("span",[t._v("See also:")]),t._v(" "),e("span",{staticClass:"pAaColor"},[t._v(" "+t._s(t.getOldAa())+"  ")]),t._l(t.oneAaCodes,(function(a){return e("button",{key:a,class:t.getIfBoldInfoPres(a),attrs:{id:"btnVarInfo_"+a},on:{click:function(e){return t.highlightAa(a)}}},[t._v(t._s(a))])}))],2)]),e("TreeView",{directives:[{name:"show",rawName:"v-show",value:t.showTree,expression:"showTree"}],staticClass:"level5",attrs:{id:"treeView",treeReady:t.prop,count:t.count,coordinates:t.treeCoordinates,parentElem:t.parentElem}}),e("NodeLoader",{directives:[{name:"show",rawName:"v-show",value:t.showLoader,expression:"showLoader"}],attrs:{coordinates:t.treeCoordinates,change:t.change}}),e("img",{staticClass:"show",style:{visibility:t.data.popupTitle?"visible":"hidden"},attrs:{src:t.popupTail,id:"popupTail"}})],1)},fn=[],vn=a("53ca"),yn={name:"PopUp",components:{TreeView:Me,ExpandableTextLine:At["a"],NodeLoader:Be},watch:{popupCoordinates:function(t){var e=this;this.setDefault(),null!==t&&0!==t?("object"===Object(vn["a"])(s["a"].state.popupText)?(e.handleVariantPopup(),e.togglePinBehaviour()):e.isVariant=!1,this.PopupPos=t):e.hidePopup()}},data:function(){return{popupTail:a("4c7a"),oneAaCodes:["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"],threeAaCodes:["Ala","Cys","Asp","Glu","Phe","Gly","His","Ile","Lys","Leu","Met","Asn","Pro","Gln","Arg","Ser","Thr","Val","Trp","Tyr"],isVariant:!1,variant:null,defaultDesc:null,treeCoordinates:{},change:0,showTree:!1,isShowTreeViewClicked:!1,prop:null,showLoader:!1,count:0,PopupPos:null,pos:[0,0,0,0],hasVariant:!1,hasResidue:!1,parentElem:"#popupshell"}},computed:Object(w["a"])(Object(w["a"])({popupCoordinates:function(){return s["a"].state.popupCoordinates},data:function(){return{variantStructs:s["a"].state.variantStructs,variantResidues:s["a"].state.variantResidues,popupTitle:s["a"].state.popupTitle,popupText:s["a"].state.popupText,residue:s["a"].state.residue,popupCoordinates:s["a"].state.popupCoordinates}}},Object(x["b"])(["getGene","getTotalPDBres","getVariant","getVariantStructs","getVariantResidues","getPopupTitle","getPopupText","getServersDone","getVariantIdx","getMatches","getStructure","getInfoPopup","getIsDefaultFeature"])),{},{getTotalPdbCount:function(){var t=this;if(t.isVariant){for(var e=0,a=0;a<t.oneAaCodes.length;a++)t.getVariantStructs&&t.getVariant&&Object.hasOwnProperty.call(t.getVariantStructs,t.getVariant)&&Object.hasOwnProperty.call(t.getVariantStructs[t.getVariant],t.oneAaCodes[a])&&Object.hasOwnProperty.call(t.getVariantStructs[t.getVariant][t.oneAaCodes[a]],"pdbs")&&(e+=t.getVariantStructs[t.getVariant][t.oneAaCodes[a]].pdbs.length);return e}return t.getTotalPDBres}}),created:function(){var t=this;window.addEventListener("click",(function(e){if(!t.$el.contains(e.target)&&e.target.parentElement&&t.getPopupTitle&&!e.target.parentElement.id.includes("tree")){var a=document.getElementById("loadedPin");if(a.classList.contains("loadedPin")){var n=document.getElementById("x_close");n.click()}}}))},methods:{setPopupPos:function(t){var e=document.querySelector("#popupTail"),a=document.querySelector("#popupbody"),n=document.querySelector("#popupshell");this.getPopupTitle.includes("Dark")&&(t.y=t.y+20);var r=t.x-e.getBoundingClientRect().width/2+t.width/2;e.style.left=r+"px",t.height<=2?n.style.top=t.y-t.height-e.getBoundingClientRect().height+"px":t.height>=18?n.style.top=t.y-t.height+5+"px":n.style.top=t.y-t.height+"px",n.style.left=r-10+"px";var s=n.getBoundingClientRect().x+a.getBoundingClientRect().width;s>window.innerWidth&&(n.style.left=window.innerWidth-a.getBoundingClientRect().width+7+"px"),a.getBoundingClientRect().x<0&&(n.style.left="-10px"),a.getBoundingClientRect().y<0?(e.classList.contains("topTail")||(e.classList+=" topTail"),a.style.top=e.getBoundingClientRect().height-2+"px"):e.classList.contains("topTail")&&e.getBoundingClientRect().y-a.getBoundingClientRect().height>0&&(e.classList.remove("topTail"),a.style.top=null)},hidePopup:function(){var t=this;this.isShowTreeViewClicked?this.isShowTreeViewClicked=!1:s["a"].commit("setPopupTitle",""),this.getVariantStructs&&t.resetToInitVar()},setDefault:function(){var t=document.getElementById("loadedPin");t.classList.contains("loadedPin_active")&&(t.classList.remove("loadedPin_active"),t.classList.add("loadedPin"));var e=document.getElementById("popupTail");e.classList.contains("hide")&&(e.classList.remove("hide"),e.classList.add("show")),document.getElementById("popupshell").classList.remove("fade")},handleVariantPopup:function(){this.isVariant=!0,this.variant=this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase(),this.defaultDesc=this.getDefaultDesc(),this.handleInitAa()},showTreeView:function(t,e,a){this.isShowTreeViewClicked=!0;var n=this,r=t.srcElement.getBoundingClientRect();if(n.treeCoordinates.clientX=r.left,n.treeCoordinates.clientY=r.top,n.treeCoordinates.width=r.width,n.treeCoordinates.height=r.height,n.change=n.change+1,n.showLoader=!0,n.getVariantStructs&&Object.hasOwnProperty.call(n.getVariantStructs,n.getVariant)){n.count=e?n.getPdbCount(e):n.getTotalPdbCount;var s="".concat(window.BACKEND,"/secondaryClusteringByResidue"),i={};i.selector=[n.getStructure.accession],i.sortedKeys=a?[parseInt(a)]:[n.getVariant],e&&(i.aaCode=e),st()({method:"get",url:s,params:i}).then((function(t){console.log(t.data),n.showTree=!0,n.prop=t.data}))}else{s="".concat(window.BACKEND,"/secondaryClusteringByResidue"),n.count=n.getTotalPdbCount,i={},i.selector=[n.getStructure.accession];var o=t.srcElement.parentElement.innerText.split(":");o.length>2?i.sortedKeys=[parseInt(o[1].split("residue ")[1])]:i.sortedKeys=[parseInt(o[0].split("residue ")[1])],st()({method:"get",url:s,params:i}).then((function(t){console.log(t.data),n.showTree=!0,n.prop=t.data}))}return 0},getOldAa:function(){return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"oldAa")?this.getVariantResidues[this.getVariant].oldAa:""},highlightAa:function(t){this.variant=t.toUpperCase();for(var e=0;e<this.oneAaCodes.length;e++)document.getElementById("btnVarInfo_"+this.oneAaCodes[e]).classList.remove("selCol");if(document.getElementById("btnVarInfo_"+t.toUpperCase()).classList+=" selCol",document.querySelector("#varSpe_toRep")&&(document.querySelector("#varSpe_toRep").innerText=t),document.querySelector("#newAa")){var a=this.oneAaCodes.indexOf(t);document.querySelector("#newAa").innerText=this.threeAaCodes[a]}},getIfBoldInfoPres:function(t){var e=!1;if(Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],t))for(var a=0;a<this.getVariantResidues[this.getVariant][t].length;a++)this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")&&this.getVariantStructs[this.getVariant][t].pdbs.length>0&&(e=!0);if(this.getVariantResidues&&this.getVariant>0)return!0===e?t.toUpperCase().includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())?"btnAaBold_b selCol":"btnAaBold_b":t.toUpperCase().includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())?"btnAaBold selCol":"btnAaBold"},getAaDataAsArr:function(t){var e=[];if(Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],t)){for(var a=0;a<this.getVariantResidues[this.getVariant][t].length;a++);return this.getVariantResidues[this.getVariant][t]}return e},resetToInitVar:function(){document.getElementById("urlVariant")&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"theOrigFeatStr")&&this.getVariantIdx>-1&&(document.getElementById("urlVariant").innerHTML=this.getVariantResidues[this.getVariant].theOrigFeatStr[this.getVariantIdx]),document.getElementById("consInfo")&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"consequent")&&this.getVariantIdx>-1&&(document.getElementById("consInfo").innerHTML=this.getVariantResidues[this.getVariant].consequent[this.getVariantIdx]),this.handleInitAa(),document.getElementById("spanDefaultDesc")&&(document.getElementById("spanDefaultDesc").hidden=!1),!0===this.isHrHidden()&&(document.getElementById("anAaHr").hidden=!0)},getVarDisplay:function(){return"string"===typeof this.getVariant&&this.getVariant.match("-")?this.getVariant.split("-")[0]:this.getVariant},getIsShownVar:function(t){if(this.getMatches&&Object.hasOwnProperty.call(this.getMatches,"Selected_PDB")&&Object.hasOwnProperty.call(this.getMatches.Selected_PDB,"pdb_id")&&Object.hasOwnProperty.call(this.getMatches.Selected_PDB,"pdb_chain")){var e=this.getMatches.Selected_PDB.pdb_id+":"+this.getMatches.Selected_PDB.pdb_chain;return this.getVariant&&this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")&&this.getVariantStructs[this.getVariant][t].pdbs.includes(e)?"selCol_padded":this.getVariant&&this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")&&!this.getVariantStructs[this.getVariant][t].pdbs.includes(e)?"noSelCol_padded":""}},getIsShownRes:function(){console.log("The variant structs is "),console.log(this.getVariantStructs);var t=location.href.split("?"),e=t[0].split("/");console.log("This is ... "+e[e.length-2]+":"+e[e.length-1]+" "+this.variant+" "+this.getVariant);var a=e[e.length-2]+":"+e[e.length-1];if(this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)){for(var n=Object.keys(this.getVariantStructs[this.getVariant]),r=!1,s=0;s<n.length;s++)if(Object.prototype.hasOwnProperty.call(this.getVariantStructs[this.getVariant][n[s]],"pdbs")&&this.getVariantStructs[this.getVariant][n[s]].pdbs.includes(a))return r=!0,"selCol_padded";if(!1===r)return"noSelCol_padded"}},getPdbCount:function(t){return this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")?this.getVariantStructs[this.getVariant][t].pdbs.length:0},isHrHidden:function(){var t=this.getDefaultDesc(),e=!1;return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"newAas")&&this.getVariantIdx>-1&&this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())&&(e=!0),""===t&&!1===e},getDefaultDesc:function(){return this.getVariant&&this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"defaultDesc")&&this.getVariantIdx>-1?this.getVariantResidues[this.getVariant].defaultDesc[this.getVariantIdx]:""},getPosInfoDataAsArr:function(){return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"positionInfo")?this.getVariantResidues[this.getVariant].positionInfo:[]},handleInitAa:function(){var t=this;if(console.log("handleInitAa runs "),console.log(this.getVariantIdx),Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"newAas")&&this.getVariantIdx>-1&&this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase()))t.highlightAa(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase());else{this.getOldAa();for(var e=0;e<this.oneAaCodes.length;e++){var a=document.getElementById("divVarInfo_"+this.oneAaCodes[e]);"undefined"!==typeof a&&null!==a&&(document.getElementById("divVarInfo_"+this.oneAaCodes[e]).hidden=!0,document.getElementById("btnVarInfo_"+this.oneAaCodes[e]).classList.remove("selCol")),this.oneAaCodes[e]}t.updateSpanAa("")}},updateSpanAa:function(t){if(console.log("Value to display is "+t+this.getVariantIdx),document.getElementById("span_missenseHeading"))if(this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"isOne")&&this.getVariantIdx>-1&&!0===this.getVariantResidues[this.getVariant].isOne[this.getVariantIdx]){var e=this.oneAaCodes.indexOf(t);document.getElementById("newAa").innerHTML=-1!==e?this.threeAaCodes[e]:""}else document.getElementById("newAa").innerHTML=t},togglePinBehaviour:function(){var t=document.getElementById("loadedPin");t.classList.contains("loadedPin_active")?(t.classList.remove("loadedPin_active"),t.classList.add("loadedPin")):t.classList.contains("loadedPin")&&(t.classList.remove("loadedPin"),t.classList.add("loadedPin_active"))},dragMouseDown:function(t){t=t||window.event,t.preventDefault(),this.pos[2]=t.clientX,this.pos[3]=t.clientY,document.onmouseup=this.closeDragElement,document.onmousemove=this.elementDrag},elementDrag:function(t){t=t||window.event,t.preventDefault();var e=document.getElementById("popupshell");this.pos[0]=this.pos[2]-t.clientX,this.pos[1]=this.pos[3]-t.clientY,this.pos[2]=t.clientX,this.pos[3]=t.clientY,e.style.top=e.offsetTop-this.pos[1]+"px",e.style.left=e.offsetLeft-this.pos[0]+"px";var a=document.getElementById("popupTail");a.classList.contains("show")&&(a.classList.remove("show"),a.classList.add("hide"))},closeDragElement:function(){document.onmouseup=null,document.onmousemove=null},getResInfo:function(){var t=_["joleculeAlignment"],e=_["embededJolecule"].controller,a=t.mapSeqResToPdbResOfChain(0,this.getVariant,this.getStructure.chain);if(a){var n=e.soup.findResidueIndices(0,a[1],a[2]),r=e.soup.getResidueProxy().load(n).resType;return r=r.substr(0,1)+r.substr(1).toLowerCase(),this.getGene+" residue "+this.getVariant+'<span style="font-weight: 400; color: #a6a5a6;"> ('+this.getStructure.pdb+"-"+this.getStructure.chain+" residue "+r+"-"+a[2]+")"}return document.querySelector('[id^="residue_'+this.getVariant)?this.getGene+" residue "+this.getVariant+'<span style="font-weight: 400; color: #a6a5a6;">':this.getGene+" residue "+this.getVariant+'<span style="font-weight: 400; color: #a6a5a6;"> ( Dark region )'}},updated:function(){null!==this.PopupPos&&this.setPopupPos(this.PopupPos)}},bn=yn,wn=(a("50b2"),a("3b90"),Object(I["a"])(bn,mn,fn,!1,null,"11448065",null)),Sn=wn.exports,_n=a("5e83"),xn={name:"Wrapper",components:{GdprConsentModal:_n["a"],Header:U,Sequence:Mt,AboutAlignment:Bt,AboutPdb:Gt,StructureViewer:Qt,Tabs:Sa,CoverageMap:Ha,PopUp:Sn,AboutAquaria:Ua["a"],Errors:Ja,UserHelp:cn,Loader:gn,Scrim:J},props:["urlRequest"],data:function(){return{pdbOnly:!1,showSequenceInfo:!1,showScrim:!1,showAlignmentInfo:!1,showStructureInfo:!1,showHelpIcon:!0,showAboutAquaria:!1}},computed:{data:function(){return{hash:s["a"].state.hash,arrayOfVideos:["https://youtu.be/FAQ3yVGYSzY?list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e","https://www.youtube.com/watch?v=UZNEmPOaVrA&list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e&index=2"]}},hash:function(){return s["a"].state.hash},residueSelected:function(){return s["a"].state.residueSelected},accession:function(){return s["a"].state.structure.accession}},watch:{hash:function(t){history.replaceState(null,null,"".concat(window.location.origin).concat(window.location.pathname).concat(window.location.search,"#").concat(t))},residueSelected:function(t){var e=this;document.querySelector("#toggle-toolbar-button").style.display="none",t?e.showSelectedState():e.showInitialState()},accession:function(t){var e=this;t||(t=""),t.length>0?e.pdbOnly=!1:e.pdbOnly=!0}},methods:{appendHash:function(t){if(""!==window.location.hash&&window.location.hash.includes("(")&&window.location.hash.includes("%")||s["a"].commit("setHash",t),window.location.hash.includes("(")||window.location.hash.includes("%")||window.location.hash.match(/[A-Z]?[0-9]/)){var e=window.location.hash.split("#")[1];e.includes("&")&&(e=e.split("&").length>1?e.includes("%")?e.split("%")[0]+"%":e.includes(")")?e.split(")")[0]+")":"":e.split("&")[0]),s["a"].commit("setHash",e+"&"+t)}},dropFragment:function(){if(window.location.hash.length>1)if(window.location.hash.includes("(")||window.location.hash.includes("%")||window.location.hash.match(/[A-Z]?[0-9]/)){var t="",e=window.location.hash.split("#")[1];e.includes("&")&&(e.split("&").length>1?(t=e.includes("%")?e.split("%")[0]+"%":e.includes(")")?e.split(")")[0]+")":"",t=t.length<1&&e.match(/[A-Z]?[0-9]/)?e.split("&")[0]:t):t=e.split(")")[0]+")"),s["a"].commit("setHash",t)}else s["a"].commit("setHash","")},showInitialState:function(){document.querySelector(".jolecule-embed-footer").style.visibility="hidden",document.querySelector("#color-legend").style.visibility="hidden",document.querySelector("#color-legend").style.bottom="105px",document.querySelector("#threeDSpan-inner").style.height="100%",document.querySelector("#coverageMap")&&(document.querySelector("#coverageMap").style.display="block"),document.querySelector("#map")&&(document.querySelector("#map").style.visibility="visible"),document.querySelector("div.tabs")&&(document.querySelector("div.tabs").style="")},showSelectedState:function(){document.querySelector(".jolecule-embed-footer").style.display="flex",document.querySelector(".jolecule-embed-footer").style.visibility="visible",document.querySelector("#color-legend").style.bottom="105px",document.querySelector("#color-legend").style.visibility="visible",document.querySelector("#threeDSpan-inner").style.height="100%",document.querySelector("#coverageMap")&&(document.querySelector("#coverageMap").style.display="none"),document.querySelector("#map")&&(document.querySelector("#map").style.visibility="hidden"),document.querySelector("div.tabs")&&(document.querySelector("div.tabs").style.top="-1.1rem"),document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.bottom="105px";var t=document.getElementById("popupTail");t.classList.contains("show")&&(t.classList.remove("show"),t.classList.add("hide"))},closeHelp:function(){var t=this;document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",document.querySelector(".dimmer").style.display="none",document.querySelector("#helpbtn").classList.contains("active")&&(S["RemoveOverlay"](),t.toggleActive(document.querySelector("#helpbtn")))},checkPhone:function(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(t.length)if(navigator.platform===t.pop()||screen.width>=300&&screen.width<=600)return!0},inspectHeight:function(){document.querySelector("#heightinspector").innerHTML="reset";var t=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+t+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight},dismissPanel:function(){document.querySelector("#scrim").className="hide",this.$store.commit("setScrim",!1)},toggleActive:function(t){"lnk active"===t.className&&(t.className="lnk")}},mounted:function(){var t=this,e=this;_["initialisePanel3d"](),window.scrollBy(0,100),this.$props.urlRequest.uniprotAccession?(e.showInitialState(),A["f"]([this.$props.urlRequest.uniprotAccession],this.$props.urlRequest.pdbID,this.$props.urlRequest.chain)):(e.pdbOnly=!0,s["a"].commit("setResidueSelected",!1),A["g"](this.$props.urlRequest.pdbID));var a=new V["a"](_["embededJolecule"]);a.addEventListener("viewchange",(function(e){t.pose=V["c"](),t.view=e})),a.addEventListener("viewcommit",(function(){return V["e"]()})),window.addEventListener("resize",(function(){window.scrollBy(0,100),document.querySelectorAll("#vis > .ruler").forEach((function(t){return t.remove()})),document.querySelectorAll("#vis > #allclusters .outer_container").forEach((function(t){return t.remove()})),ye();var t=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+t+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight})),setTimeout((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}),1500)},updated:function(){}},An=xn,Cn=(a("f5e2"),Object(I["a"])(An,n,r,!1,null,null,null));e["default"]=Cn.exports},ae7d:function(t,e,a){t.exports=a.p+"img/node.cac6f4f6.gif"},b335:function(t,e,a){t.exports=a.p+"img/aquaria-menu.1a89fbab.svg"},b3c8:function(t,e,a){(function(t){a("ac1f"),a("5319"),t.fn.digits=function(){return this.each((function(){t(this).text(t(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))}))},t(document).ready((function(){t("#protein_syn_input, #organism_syn_input").focus((function(){t(".infocus").removeClass("infocus"),t("#searchByName").addClass("infocus")})),t("#help3D").hide()})),t((function(){t(document).tooltip({position:{my:"right top+15",at:"right center",collision:"none"}},{show:{delay:1200}})}))}).call(this,a("1157"))},b895:function(t,e,a){},c127:function(t,e,a){},d11f:function(t,e,a){},d9f0:function(t,e,a){},e106:function(t,e,a){"use strict";a("3bba")},e6fc:function(t,e,a){"use strict";a("0053")},ead7:function(t,e,a){},ef57:function(t,e,a){},f09b:function(t,e,a){},f113:function(t,e,a){"use strict";a("feaf")},f235:function(t,e,a){},f5e2:function(t,e,a){"use strict";a("f09b")},feaf:function(t,e,a){},ff44:function(t,e,a){"use strict";a("ef57")}}]);
//# sourceMappingURL=wrapper.1c3f3030.js.map