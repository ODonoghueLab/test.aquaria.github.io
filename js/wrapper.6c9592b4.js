(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wrapper"],{"0e04":function(t,e,n){"use strict";var a=n("e333"),r=n.n(a);r.a},1:function(t,e){},"1a77":function(t,e,n){t.exports=n.p+"img/icon-large.53f00b7d.png"},"1a98":function(t,e,n){"use strict";var a=n("db00"),r=n.n(a);r.a},2787:function(t,e,n){},2847:function(t,e,n){},"3d0a":function(t,e,n){"use strict";var a=n("fe0e"),r=n.n(a);r.a},"5ec7":function(t,e,n){},"5f14":function(t,e,n){"use strict";var a=n("d0b0"),r=n.n(a);r.a},7829:function(t,e,n){},"7fb8":function(t,e,n){},"8d84":function(t,e,n){"use strict";var a=n("bb36"),r=n.n(a);r.a},"8f89":function(t,e,n){"use strict";var a=n("7829"),r=n.n(a);r.a},9966:function(t,e,n){"use strict";var a=n("2787"),r=n.n(a);r.a},a00a:function(t,e,n){},a98f:function(t,e,n){"use strict";var a=n("2847"),r=n.n(a);r.a},ae0b:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"wrapper"}},[n("Content"),n("Footer"),n("BadBrowser")],1)},r=[],o=(n("57aa"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"content"}},[n("Controls"),n("Center",{attrs:{id:"center"}})],1)}),i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"controls"}},[n("Logo"),n("AffordanceMode")],1)},c=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"logo-intro"}},[a("div",{attrs:{id:"logo"}},["mobile"===t.$mq||"tablet"===t.$mq||"laptop"===t.$mq?a("img",{attrs:{src:n("1a77"),alt:"Aquaria Logo"},on:{click:function(e){return t.showAbout()}}}):t._e(),t._m(0)]),"laptop"===t.$mq?a("p",{attrs:{id:"intro"}}):t._e()])},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wait"}},[a("img",{attrs:{id:"gif",src:n("6679"),alt:"Loading",title:"Loading data..."}})])}],d=n("4360"),p=n("1157"),h=n.n(p),f={name:"Logo",methods:{showAbout:function(){0===document.getElementsByClassName("dimmer").length?(h()("body").append('<div class="dimmer"></div>'),h()("div.dimmer").on("click",(function(){h()("div#about_overlay, div#help_overlay").hide(),h()("div.dimmer").remove()}))):h()("div.dimmer").remove(),h()("div#about_overlay").slideToggle("slow")},showExplanations:function(){h()("div.dimmer").remove(),h()("div#about_overlay, div#help_overlay").hide(),h()("body, #gallery").css("margin-top","5em"),h()("div.container").first().hide(),h()("div.outer_container").first().append("<div id='tree_helper' class='chardinjs-helper-layer chardinjs-relative-position'></div>"),h()("#tree_helper").html('<img src="/images/tree-overlay.png" />'),h()("body").chardinJs("start")}},computed:{data:function(){return d["a"].state.message}}},m=f,v=(n("9966"),n("2877")),w=Object(v["a"])(m,l,u,!1,null,"37ab1ca4",null),b=w.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"affordance_mode"}},[n("h3",{attrs:{id:"gene_name"},on:{click:function(e){return t.showPanels()}}}),n("Title3D",{attrs:{id:"title3D"}}),n("SearchPanel",{attrs:{id:"searchByName"}}),n("Gallery",{attrs:{id:"gallery"}}),n("AboutUniprot",{attrs:{id:"uniprot"}})],1)},_=[],k=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"searchByName"}},[n("h3",[t._v("Specify a Protein")]),n("form",{attrs:{id:"myform",name:"myform",ACTION:"#",method:"post"}},[n("p",{attrs:{id:"input1"}},[n("input",{staticClass:"search",attrs:{type:"text",id:"protein_syn_input",name:"protein_syn_input",placeholder:"Protein name/ID",autocomplete:"on","data-intro":"START HERE - specify a protein name (or UniProt identifier, or PDB ID), then press 'Enter'.","data-position":"right"}})]),n("p"),n("p",{attrs:{id:"input2"}},[n("input",{staticClass:"search",attrs:{type:"text",id:"organism_syn_input",name:"organism_syn_input",placeholder:"Organism",autocomplete:"on","data-intro":"Enter an organism name (human is default).","data-position":"right"}})])])])}],y={name:"SearchPanel",methods:{fillin:function(t){document.getElementById("protein_syn_input").value=t,setTimeout((function(){window.location.href="/P04637"}),300)}}},A=y,S=(n("e8c9"),Object(v["a"])(A,k,x,!1,null,null,null)),E=S.exports,C=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},R=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{attrs:{id:"titleBar3Dview","data-intro":"3D view: initially shows PDB structure estimated to be most relevant for the specified protein. Hue is used to indicate secondary structure: yellow = strand, blue = helix, and green = coil. Lightness is used to indicate amino acid substitutions between the specified protein and PDB structure: slightly dark = conserved, very dark = non-conserved, white = insertions, and semi-transparent = other chains. <br><p>&nbsp;</p>\n<div class='bg_helpdoc'>\n<table id='helptable'><tr><td>\n<h2>Videos</h2>\n<p><a target='_blank' href='http://youtu.be/FAQ3yVGYSzY'>Quick introduction (6:16)</a></p>\n<p><a target='_blank' href='http://youtu.be/PIs1qyV_dIQ'>General overview (44:25)</a></p>\n<p><a target='_blank' href='http://youtu.be/XU_6TWM9ke8'>Leap Motion controller (2:18)</a></p>\n<h2>Installation</h2>\n<p><a target='_blank' href='https://docs.google.com/document/d/1waNOvw442Bwncx_FlMJAATH35aJxXpxu0iRcrZt8hrQ/pub'>On Mac OS</a></p>\n<p><a target='_blank' href='https://docs.google.com/document/d/1wZo-76MEPyoDj-9uAxHyz4y2f4_6ZR89uJcPBQvVUQc/pub'>On Windows</a></p>\n<h2>Documentation</h2>\n<p><a target='_blank' href='/help/Aquaria3D_QR_v1.pdf'>Mouse & keyboard controls</a></p>\n<p><a target='_blank' href='https://docs.google.com/document/d/1566Ub_-WAXMcuOA8gmb2-X9JmYfWuZarrgneNVaBQd8/pub'>Aquaria API</a></p>\n</td><td>\n<h2>Publication</h2>\n<p><a target='_blank' href='http://nature.com/articles/nmeth.3258'>O&rsquo;Donoghue et al., Nature Methods (2015)</a></p>\n<h2>Forum</h2>\n<p><a target='_blank' href='https://www.biostars.org/t/aquaria'>View forum</a></p>\n<p><a target='_blank' href='https://www.biostars.org/p/new/post/?tag_val=aquaria'>Ask a question</a></p>\n<h2>Bugs</h2>\n<p><a target='_blank' href='https://github.com/ODonoghueLab/Aquaria/issues'>View known bugs</a></p>\n<p><a target='_blank' href='https://github.com/ODonoghueLab/Aquaria/issues/new' >Report new bug</a></p>\n</td></tr></table>\n</div>\n","data-position":"bottom"}},[t._v("3D structure "),n("span",{staticClass:"explanation",attrs:{id:"structureviewerexplanation"}}),n("div",{staticClass:"rightHeaderBar"},[n("a",{attrs:{href:"javascript:;",title:"Toggle full window view","data-intro":"Full window","data-position":"bottom"}},[n("span",{staticClass:"roundButton",staticStyle:{display:"inline-block"},attrs:{id:"expander"}})]),n("a",{staticClass:"launchApplicationLink",attrs:{href:"#",target:"_blank",title:"Launch stand-alone Java application","data-intro":"Standalone application","data-position":"top"}},[n("span",{staticClass:"applauncher roundButton",staticStyle:{display:"inline-block"}})])])])}],T={name:"Title3D"},I=T,P=(n("3d0a"),Object(v["a"])(I,C,R,!1,null,"645e07b7",null)),V=P.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel",attrs:{id:"about","data-intro":"UniProt summary of the specified protein's function.","data-position":"right"}},[t._m(0),n("div",{attrs:{id:"psyns"}},[n("p",[t._v("(example: "),n("a",{attrs:{href:"#"},on:{click:function(e){return t.fillin("p53")}}},[t._v("p53")]),t._v(" or "),n("a",{attrs:{href:"#"},on:{click:function(e){return t.fillin("P04637")}}},[t._v("P04637")]),t._v(")")])]),t._m(1),t._m(2),n("div",{attrs:{id:"uniProtDesc"}})])},D=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",[t._v("About "),n("span",{staticClass:"explanation"},[t._v(" Uniprot ID")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"none"},attrs:{id:"gsyns"}},[n("p",[t._v("Genes: ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"osyns"}},[n("p")])}],U={name:"AboutUniprot"},B=U,q=(n("0e04"),Object(v["a"])(B,O,D,!1,null,"2590993c",null)),F=q.exports,N=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},L=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"gallery"}},[n("div",{staticClass:"panel",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[n("h3",[t._v("About "),n("span",{staticClass:"explanation"},[t._v(" PDB")])]),n("span",{staticClass:"content",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[n("span",{staticStyle:{display:"none"},attrs:{id:"biounitDisplay"}},[n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitLeft",title:"Navigate to other assemblies"}},[t._v("<")]),t._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitType"}},[t._v("biounit")]),t._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitCount"}},[t._v("x/x")]),t._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitRight",title:"Navigate to other assemblies"}},[t._v(">")]),n("a",{attrs:{id:"helpBiounit",href:"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit",target:"_blank",title:"Go to PDB to view explanation of assembly"}},[n("span",{staticClass:"help roundButton"})])]),n("span",{staticStyle:{display:"none"},attrs:{id:"aboutPDBHider","data-intro":"PubMed Information about PDB structure","data-position":"left"}},[n("p",{attrs:{id:"classification"}},[t._v("Classification unavailable")]),n("h4",{attrs:{id:"reference_title"}},[t._v("Title unavailable")]),n("p",{attrs:{id:"reference_link"}},[n("a",{attrs:{href:"#"}},[t._v("PubMed Link unavailable")])]),n("p",{attrs:{id:"molecule",title:"View this structure in Aquaria","data-intro":"Information about currently focused PDB chain.","data-position":"left"}},[n("strong",[t._v("Molecule: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])])]),n("p",{attrs:{id:"organism"}},[n("strong",[t._v("Organism: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])]),n("p",{attrs:{id:"small_molecules"}},[n("strong",[t._v("Small molecules: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])]),n("p",{attrs:{id:"method"}},[n("strong",[t._v("Method: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])]),n("p",{attrs:{id:"resolution"}},[n("strong",[t._v("Resolution: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])]),n("p",{attrs:{id:"pdb"}},[n("strong",[t._v("Protein Data Bank: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])])])])])}],$={name:"Gallery"},j=$,H=(n("1a98"),Object(v["a"])(j,N,L,!1,null,"035c6330",null)),Q=H.exports,M={name:"AffordanceMode",components:{SearchPanel:E,AboutUniprot:F,Gallery:Q,Title3D:V},mounted:function(){var t=h()("#affordance_mode").width()/2-h()("#searchByName").width()/2;t+="px",h()("#searchByName").css({"margin-left":t})},methods:{showPanels:function(){0===document.getElementsByClassName("dimmer").length?(h()("body").append('<div class="dimmer"></div>'),h()("#gene_name").hide(),h()("div.dimmer").on("click",(function(){h()("#searchByName, #title3D,#uniprot, #gallery").hide(),h()("div.dimmer").remove(),h()("#gene_name").show()}))):h()("div.dimmer").remove(),h()("#searchByName, #title3D").slideToggle("slow")}}},z=M,J=(n("c519"),Object(v["a"])(z,g,_,!1,null,"31defa9f",null)),W=J.exports,X={name:"Controls",components:{Logo:b,AffordanceMode:W}},G=X,Z=(n("d390"),Object(v["a"])(G,s,c,!1,null,"62c0f173",null)),Y=Z.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("StructureViewer",{attrs:{id:"structureviewer"}}),n("Structures",{staticClass:"panel",attrs:{id:"structurematches","data-intro":" ","data-position":"top"}}),n("AboutAquaria")],1)},tt=[],et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("XRButton"),t._m(0),t._m(1)],1)},nt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aquariaWarning",attrs:{id:"updateJava3D"}},[n("p",[n("strong",[t._v("Aquaria needs to update your Java3D.")])]),n("form",{attrs:{action:"/downloads/AquariaSetupMac.dmg"}},[n("p",[t._v("1. "),n("button",{attrs:{id:"myButton",type:"submit"}},[t._v("Download Aquaria Setup")])])]),n("p",[t._v("2. After downloading, run AquariaSetupMac.dmg from your Downloads folder.")]),n("p",[t._v("3. Restart your browser once the setup is finished.")]),n("br"),n("p",[t._v("For more information see "),n("a",{attrs:{href:"https://docs.google.com/document/d/1waNOvw442Bwncx_FlMJAATH35aJxXpxu0iRcrZt8hrQ/pub",target:"_blank"}},[t._v("Aquaria help")]),t._v(".")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"threedcontent resizable",attrs:{id:"threeD"}},[n("span",{attrs:{id:"threeDSpan"}}),n("iframe",{attrs:{src:"/html/waiting.html",frameBorder:"0",name:"waitingFrame",id:"waitingFrame",scrolling:"no",allowtransparency:"true"}},[n("p",[t._v("Your browser does not support iframes.")])]),n("iframe",{staticStyle:{bottom:"20px",left:"20px"},attrs:{src:"/html/selectionText.html",frameBorder:"0",name:"selectionText",id:"selectionText",scrolling:"no",allowtransparency:"true"}},[n("p",[t._v("Your browser does not support iframes.")])])])}],at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.dataReceived&&!t.isOpen?n("img",{staticClass:"xr-menu-button",attrs:{src:"/images/ar-button.png"},on:{click:function(e){return t.open()}}}):t._e(),t.isOpen?n("div",{staticClass:"column xr-modal"},[n("div",{staticClass:"column inner-modal"},[n("div",{staticClass:"row modal-header"},[n("div"),n("h1",[t._v("XR Options")]),n("button",{on:{click:function(e){return t.close()}}},[t._v("X")])]),n("div",{staticClass:"column modal-content"},[n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.downloadGltf()}}},[t._v("Download GLTF (.glb)")]),n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.downloadUsd()}}},[t._v("Download USD (.usdz)")]),t.sceneViewer?n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.openInSceneViewer()}}},[t._v("Open in Scene Viewer")]):t._e(),t.quickLook?n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.openInQuickLook()}}},[t._v("Open in AR Quick Look")]):t._e(),t.psvrEnabled?n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.psvrExport()}}},[t._v("Send to PSVR")]):t._e(),t.hevsPlatform?n("button",{staticClass:"xr-item default-button",attrs:{disabled:!!t.hevsAsset},on:{click:function(e){t.close(),t.hevsExport()}}},[t._v(t._s(t.hevsAsset?"Connected to HEVS":"Send to HEVS"))]):t._e(),t.advancedViewerEnabled?n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.openInAdvancedViewer()}}},[t._v("Open in Advanced Viewer")]):t._e(),n("canvas",{ref:"qr",staticClass:"xr-qr"})])])]):t._e()])},rt=[],ot=(n("99af"),n("4160"),n("caad"),n("c975"),n("d81d"),n("b0c0"),n("a9e3"),n("25eb"),n("b680"),n("b64b"),n("d3b7"),n("ac1f"),n("25f0"),n("2532"),n("3ca3"),n("841c"),n("1276"),n("498a"),n("4c53"),n("159b"),n("ddb0"),n("2b3d"),n("3835")),it=(n("96cf"),n("1da1")),st=(n("7db0"),n("c740"),n("a15b"),n("fb6a"),n("5319"),n("bc3a")),ct=n.n(st),lt=Number.parseInt("45")||40,ut={supportsSceneViewer:/(android)/i.test(navigator.userAgent),supportsQuickLook:document.createElement("a").relList.supports("ar"),supportsMixedReality:/(Windows NT 10.0)/i.test(navigator.userAgent)};function dt(t){var e=window.AQUARIA.groupedFeatures.find((function(e){var n=Object(ot["a"])(e,1),a=n[0];return a===t})),n=Object(ot["a"])(e,2),a=n[1];return{featureSets:a,name:t}}function pt(t,e,n){var a=0,r=Math.max(n,0);return a=Math.max(t.featureSets.findIndex((function(t){return t.Type===e.Type&&t.Category===e.Category})),0),[a,r]}function ht(t,e,n,a){var r=document.createElement("a");r.href=St(t,e,{format:n,featureTrackToBake:a}),r.download="".concat(t,".").concat(e,".").concat(n),r.click()}function ft(t,e,n){var a=St(t,e,{format:"usdz",featureTrackToBake:n});Pt(a)}function mt(t,e,n){var a=St(t,e,{featureTrackToBake:n}),r="".concat(t,".").concat(e);It(a,r)}function vt(t,e,n){return wt.apply(this,arguments)}function wt(){return wt=Object(it["a"])(regeneratorRuntime.mark((function t(e,n,a){var r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=St(e,n,{format:"gltf"}),o={modelUri:r,fileName:"".concat(e,".").concat(n),collection:a},t.next=4,ct.a.post("".concat("https://aquaria.ws:8012","/xr/sendToPSVR"),o);case 4:if(i=t.sent,!(i.status>=400)){t.next=9;break}throw new Error(i.data);case 9:return t.abrupt("return",i.data.result);case 10:case"end":return t.stop()}}),t)}))),wt.apply(this,arguments)}function bt(t,e,n){return gt.apply(this,arguments)}function gt(){return gt=Object(it["a"])(regeneratorRuntime.mark((function t(e,n,a){var r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=St(n,a,{rescale:!1}),o={hevsPlatform:e,modelUri:r,name:"".concat(n,".").concat(a)},t.next=4,ct.a.post("".concat("https://aquaria.ws:8012","/xr/sendToHEVS"),o);case 4:if(i=t.sent,!(i.status>=400)){t.next=9;break}throw new Error(i.data);case 9:return t.abrupt("return",i.data.assetId);case 10:case"end":return t.stop()}}),t)}))),gt.apply(this,arguments)}function _t(t,e,n,a,r,o){return kt.apply(this,arguments)}function kt(){return kt=Object(it["a"])(regeneratorRuntime.mark((function t(e,n,a,r,o,i){var s,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return s={hevsPlatform:e,assetId:n,collection:a,featureSetIndex:r,trackName:o,skipUpload:i},t.next=4,ct.a.post("".concat("https://aquaria.ws:8012","/xr/setHEVSFeature"),s);case 4:if(c=t.sent,!(c.status>=400)){t.next=7;break}throw new Error(c.data);case 7:t.next=15;break;case 9:return l={hevsPlatform:e,assetId:n},t.next=12,ct.a.post("".concat("https://aquaria.ws:8012","/xr/clearHEVSFeature"),l);case 12:if(u=t.sent,!(u.status>=400)){t.next=15;break}throw new Error(u.data);case 15:case"end":return t.stop()}}),t)}))),kt.apply(this,arguments)}function xt(t,e,n,a){return yt.apply(this,arguments)}function yt(){return yt=Object(it["a"])(regeneratorRuntime.mark((function t(e,n,a,r){var o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={hevsPlatform:e,assetId:n,pose:a,view:r},t.next=3,ct.a.post("".concat("https://aquaria.ws:8012","/xr/setHEVSView"),o);case 3:if(i=t.sent,!(i.status>=400)){t.next=6;break}throw new Error(i.data);case 6:case"end":return t.stop()}}),t)}))),yt.apply(this,arguments)}function At(t,e){var n=document.createElement("a");n.href="".concat("https://ie.csiro.au/apps/aquaria-export-preview","?protein=").concat(t,"&pdb=").concat(e),n.target="_",n.click()}function St(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={format:"glb",featureTrackToBake:null,rescale:!0},r=Object.assign(a,n),o="".concat("https://ie.csiro.au/services/aquaria-export","/").concat(t,"/").concat(e,".").concat(r.format),i=new URLSearchParams;if(!1===n.rescale&&i.append("rescale","false"),n.featureTrackToBake){var s=n.featureTrackToBake.map((function(t){var e="".concat(t.color.replace("#",""),"-").concat(t.start);return t.start!==t.end&&(e="".concat(e,"-").concat(t.end)),e}));i.append("f",s.join(","))}var c=i.toString();return c?"".concat(o,"?").concat(i):o}function Et(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=n&&n.length>lt?n.slice(0,lt):n,r=St(t,e,{format:"$FORMAT",featureTrackToBake:a});return r}function Ct(t){ut.supportsQuickLook?Pt(t.replace("$FORMAT","usdz")):ut.supportsSceneViewer&&It(t.replace("$FORMAT","glb"),"Aquaria Auto-XR")}function Rt(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=window.AQUARIA.panel3d.embededJolecule.soupWidget.camera.position.clone(),n=window.AQUARIA.panel3d.embededJolecule.soupWidget.camera.quaternion.clone();return t&&(e.x=-e.x,n.set(n.z,n.w,n.x,n.y)),{position:[e.x,e.y,e.z],orientation:[n.x,n.y,n.z,n.w]}}function Tt(){return window.AQUARIA.panel3d.embededJolecule.soupView}function It(t,e){var n="com.google.android.googlequicksearchbox",a="android.intent.action.VIEW",r="ar_preferred",o="https://developers.google.com/ar",i="intent://arvr.google.com/scene-viewer/1.0?file=".concat(t,"&mode=").concat(r,"&title=").concat(e,"#Intent;scheme=https;package=").concat(n,";action=").concat(a,";S.browser_fallback_url=").concat(o,";end;"),s=document.createElement("a");s.href=i,s.click()}function Pt(t){var e=document.createElement("a");e.href=t,e.rel="ar",e.appendChild(document.createElement("img")),e.click()}var Vt=n("d055"),Ot=n.n(Vt),Dt=n("f7fe"),Ut=n.n(Dt),Bt=n("5a89"),qt=",",Ft=2,Nt=new URLSearchParams(location.search),Lt=Number.parseInt(Nt.has("HEVS_UPDATE_INTERVAL")?Nt.get("HEVS_UPDATE_INTERVAL"):"1000")||1e3;if(Nt.has("xr")){var $t=Nt.get("xr");Nt.delete("xr"),history.replaceState(null,"","".concat(location.pathname,"?").concat(Nt.toString())),Ct($t)}var jt={name:"XRButton",components:{},data:function(){return{dataReceived:!1,pdbId:"none",proteinId:"none",quickLook:ut.supportsQuickLook,sceneViewer:ut.supportsSceneViewer,featuresActive:!1,featureSet:null,featureTrack:-1,featureCollection:null,isOpen:!1,view:null,pose:null,hevsPlatform:Nt.get("HEVS"),hevsAsset:null,hevsUploadedCollections:[],psvrEnabled:!!Nt.get("PSVR"),advancedViewerEnabled:!!Nt.get("dev")}},mounted:function(){var t,e=this;this.hevsViewUpdateDebounced=Ut()((function(){return e.hevsViewUpdate()}),Lt,{leading:!0,maxWait:Lt});var n=function(n,r,o){t(n,r,o),e.dataReceived=!0,e.featuresActive=!1,e.featureSet=null,e.featureTrack=-1,e.featureCollection=null,e.hevsUploadedCollections=[],e.proteinId=n,e.pdbId=r,a()};window.AQUARIA.chainSelected!==n&&(t=window.AQUARIA.chainSelected,window.AQUARIA.chainSelected=n),window.AQUARIA.onFeatureChange=function(t,n){t?(e.featuresActive=!0,e.featureSet=t,e.featureTrack=n,e.featureCollection=dt(t.Server)):(e.featuresActive=!1,e.featureSet=null,e.featureTrack=-1,e.featureCollection=null),e.hevsPlatform&&e.hevsAsset&&e.hevsFeatureUpdate()},function(){var t=function t(){requestAnimationFrame((function(){return t()}));try{var n=Tt(),a=Rt();e.pose||(e.pose=a,e.view=n);for(var r=!1,o=0;o<3;o++)if(a.position[o]!==e.pose.position[o]){r=!0;break}for(var i=0;i<4;i++)if(a.orientation[i]!==e.pose.orientation[i]){r=!0;break}r&&(e.pose=a,e.view=n)}catch(s){}};t()}();var a=function(){if(""!==window.location.search||""!==window.location.hash){console.log("loading view");var t=o();i(t.selected,t.pitch,t.yaw,t.roll,t.zoom)}};function r(){for(var t=window.AQUARIA.panel3d.embededJolecule.soupView,e=window.AQUARIA.panel3d.embededJolecule.soup,n={},a=e.getResidueProxy(),r=0;r<e.getResidueCount();r++)a.load(r),a.selected&&(n[a.chain]||(n[a.chain]=[]),n[a.chain].push(a.resNum));var o="#";for(var i in Object.keys(n).length>0&&(o="#"),n){o.length>1&&(o+=qt),o+=i;var s=n[i].sort(),c=0;while(c<s.length){c>0&&(o+=qt),o+=s[c];var l=1;while(c+l<s.length&&s[c+l]-s[c]===l)l++;l>1&&(o+="-"+s[c+l-1]),c+=l}}var u=t.currentView.cameraParams.position.clone().sub(t.currentView.cameraParams.focus).normalize(),d=t.currentView.cameraParams.up,p=d.clone().cross(u),h=u.clone().cross(p),f=new Bt["c"];f.set(p.x,h.x,u.x,0,p.y,h.y,u.y,0,p.z,h.z,u.z,0,0,0,0,1);var m=(new Bt["a"]).setFromRotationMatrix(f,"YXZ"),v=t.currentView.cameraParams.zoom/10,w="+";v<0&&(w="-");var b="".concat(o,"?(").concat(Bt["b"].radToDeg(m.y).toFixed(Ft),",").concat(Bt["b"].radToDeg(m.x).toFixed(Ft),",").concat(Bt["b"].radToDeg(m.z).toFixed(Ft),")&").concat(w).concat(v.toFixed(Ft));window.history.replaceState(null,null,window.location.origin+window.location.pathname+window.location.search+b)}function o(){var t=decodeURIComponent(window.location.href.substr(window.location.origin.length+window.location.pathname.length+window.location.search.length));if(0===t.length)return null;var e,n=t.indexOf("?"),a={},r="A",o=0,i=0,s=0;if("#"===t[0]){var c=0,l=t.substring(1,n);if(l.length>0){var u=l.split(",");for(c=0;c<u.length;c++){var d=u[c].split("-"),p=0;while(p<d[0].length){if(!isNaN(Number(d[0][p])))break;p++}p>0&&(r=d[0].substring(0,p),a[r]||(a[r]=[]),d[0]=d[0].substr(p));var h=Number(d[0].trim()),f=d.length>1?Number(d[1].trim()):NaN;if(isNaN(h))break;for(isNaN(f)&&(f=h);h<=f;h++)a[r].push(h)}}}if(-1!==n)for(var m=t.substr(n+1).split("&"),v=0;v<m.length;v++){var w=m[v].trim();if("("===w[0]){var b=w.substring(1,w.length-1),g=b.split(",");o=Number(g[0])||0,i=Number(g[1])||0,s=Number(g[2])||0}else"+"!==w[0]&&"-"!==w[0]||(e=parseFloat(w)||void 0)}return{selected:a,yaw:o,pitch:i,roll:s,zoom:e}}function i(t,e,n,a,r){var o=window.AQUARIA.panel3d.embededJolecule.soupView,i=window.AQUARIA.panel3d.embededJolecule.controller,s=[],c=function(e){s=s.concat(t[e].map((function(t){return window.AQUARIA.panel3d.embededJolecule.soup.findFirstResidue(e,t)})))};for(var l in t)c(l);i.clearSelectedResidues(),s.forEach((function(t){i.selectResidue(t.iRes,!0)}));var u=o.getZoomedOutViewOfSelection();r?r*=10:r=u.cameraParams.zoom;var d=u.cameraParams.focus,p=new Bt["a"](Bt["b"].degToRad(e),Bt["b"].degToRad(n),Bt["b"].degToRad(a),"YXZ"),h=d.clone().add(new Bt["d"](0,0,r).applyEuler(p)),f=new Bt["d"](0,1,0).applyEuler(p),m=window.AQUARIA.panel3d.embededJolecule.soupView,v=m.currentView.clone();v.cameraParams.focus.set(d.x,d.y,d.z),v.cameraParams.up.set(f.x,f.y,f.z),v.cameraParams.position=h,v.cameraParams.zoom=r,m.setTargetView(v)}window.addEventListener("keyup",(function(t){if("Digit1"===t.code)a();else if("Digit2"===t.code)i({A:[114,115,116,125]},0,0,0,8);else if("Digit3"===t.code){for(var e=window.AQUARIA.panel3d.embededJolecule.soup,n=[],r=e.getResidueProxy(),o=0;o<e.getResidueCount();o++)r.load(o),r.selected&&n.push(r.resNum);console.log("resNums: ",n)}})),window.addEventListener("mouseup",(function(){r()}))},computed:{currentFeatureTrack:function(){return this.featuresActive?this.featureSet.Tracks[this.featureTrack]:null}},watch:{pose:function(t){this.hevsAsset&&this.hevsViewUpdateDebounced()}},methods:{open:function(){var t=this;this.isOpen=!0;var e=Et(this.proteinId,this.pdbId,this.currentFeatureTrack),n=location.search?"".concat(location.href,"&xr=").concat(e):"".concat(location.href,"?xr=").concat(e);this.$nextTick((function(){return Ot.a.toCanvas(t.$refs.qr,n)}))},close:function(){this.isOpen=!1},downloadGltf:function(){ht(this.proteinId,this.pdbId,"glb",this.currentFeatureTrack,"".concat(this.proteinId).concat(this.pdbId,".glb"))},downloadUsd:function(){ht(this.proteinId,this.pdbId,"usdz",this.currentFeatureTrack,"".concat(this.proteinId).concat(this.pdbId,".usdz"))},openInQuickLook:function(){ft(this.proteinId,this.pdbId,this.currentFeatureTrack)},openInSceneViewer:function(){mt(this.proteinId,this.pdbId,this.currentFeatureTrack)},psvrExport:function(){var t=Object(it["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=this.featureCollection||dt(localStorage.getItem("featureOrder").split(",")[0]),console.log("[PSVR] Exporting Asset w/ ".concat(this.featureCollection?"ACTIVE":"DEFAULT/FIRST"," collection [").concat(e.name,"]")),t.next=5,vt(this.proteinId,this.pdbId,e);case 5:n=t.sent,console.log("[PSVR] Transfer successful, PSVR Response: [".concat(n,"]")),t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](0),console.warn("[PSVR] Transfer error"),console.dir(t.t0),alert("Send to PSVR failed (".concat(t.t0.message||"Unknown error",")"));case 14:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),hevsExport:function(){var t=Object(it["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("[HEVS] Exporting Asset"),t.next=4,bt(this.hevsPlatform,this.proteinId,this.pdbId);case 4:this.hevsAsset=t.sent,console.log("[HEVS] Transfer successful, HEVS Asset ID: [".concat(this.hevsAsset,"]")),this.featuresActive&&this.hevsFeatureUpdate(),this.hevsViewUpdate(),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.warn("[HEVS] Transfer error"),console.dir(t.t0),alert("Send to HEVS failed (".concat(t.t0.message||"Unknown error",")"));case 15:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),hevsFeatureUpdate:function(){var t=Object(it["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.featuresActive){t.next=10;break}return e=pt(this.featureCollection,this.featureSet,this.featureTrack),n=Object(ot["a"])(e,2),a=n[0],r=n[1],o=this.hevsUploadedCollections.includes(this.featureCollection.name),o||this.hevsUploadedCollections.push(this.featureCollection.name),console.log("[HEVS] Updating Feature Info [".concat(this.featureCollection.name," | Set ").concat(a," | Track ").concat(r,"]").concat(o?" (SKIPPING DATA UPLOAD)":"")),t.next=8,_t(this.hevsPlatform,this.hevsAsset,this.featureCollection,a,r,o);case 8:t.next=13;break;case 10:return console.log("[HEVS] Clearing Feature Info"),t.next=13,_t(this.hevsPlatform,this.hevsAsset,null,null,null);case 13:console.log("[HEVS] Feature update OK"),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),console.warn("[HEVS] Feature update error"),console.dir(t.t0);case 20:case"end":return t.stop()}}),t,this,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}(),hevsViewUpdate:function(){var t=Object(it["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("[HEVS] Updating View [".concat(this.pose.position[0],", ").concat(this.pose.position[1],", ").concat(this.pose.position[2],"], ").concat(this.pose.orientation[0],", ").concat(this.pose.orientation[1],", ").concat(this.pose.orientation[2],", ").concat(this.pose.orientation[3],"]")),t.next=4,xt(this.hevsPlatform,this.hevsAsset,this.pose,this.view);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),console.warn("[HEVS] View update error"),console.dir(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));function e(){return t.apply(this,arguments)}return e}(),openInAdvancedViewer:function(){At(this.proteinId,this.pdbId)}}},Ht=jt,Qt=Ht,Mt=(n("d418"),Object(v["a"])(Qt,at,rt,!1,null,"20ea3f23",null)),zt=Mt.exports,Jt={name:"StructureViewer",components:{XRButton:zt},mounted:function(){function t(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(t.length)if(navigator.platform===t.pop()||screen.width>=300&&screen.width<=600)return!0}var e=t();e&&(window.outerHeight-window.innerHeight>=80?(h()("#structureviewer").css({height:"88vh"}),window.scrollTo(0,0)):(h()("#structureviewer").css({height:"103vh"}),window.scrollTo(0,0)),window.addEventListener("resize",(function(){window.outerHeight-window.innerHeight>=80?(h()("#structureviewer").css({height:"88vh"}),window.scrollTo(0,0)):(h()("#structureviewer").css({height:"103vh"}),window.scrollTo(0,0))})))}},Wt=Jt,Xt=(n("8d84"),Object(v["a"])(Wt,et,nt,!1,null,"233e5a12",null)),Gt=Xt.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"tabs"}},[n("h3",{staticClass:"sub",attrs:{title:"Click to see clusters of matching structures",rel:"vis"},on:{click:function(e){return t.narrowpanel()}}},[t._v("Matching Structures | "),n("span",{staticClass:"explanation",attrs:{id:"structureexplanation"}})]),n("h3",{staticClass:"sub inactive",attrs:{title:"Click to see annotated features",rel:"featurelist",id:"h_featurelist","data-intro":"Provides access to sequence features.","data-position":"top"},on:{click:function(e){return t.widepanel()}}},[t._v("Features | "),n("span",{staticClass:"explanation",attrs:{id:"featureExplanation"}}),n("span",{staticClass:"counter",attrs:{id:"featureCounter"}})])]),n("MatchingStructures"),n("div",{staticClass:"toggled",attrs:{id:"ppi-diagram"}}),n("FeatureList")],1)},Yt=[],Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"content toggled",attrs:{id:"vis"}})},te=[],ee={name:"MatchingStructures"},ne=ee,ae=(n("5f14"),Object(v["a"])(ne,Kt,te,!1,null,null,null)),re=ae.exports,oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toggled",staticStyle:{display:"none"},attrs:{id:"featurelist"}})},ie=[],se={name:"FeatureList",methods:{}},ce=se,le=(n("b165"),Object(v["a"])(ce,oe,ie,!1,null,null,null)),ue=le.exports,de={name:"Structures",components:{MatchingStructures:re,FeatureList:ue},methods:{widepanel:function(){var t=window.innerWidth-55;h()("#structurematches").css({width:t}),h()('h3[rel="featurelist"]').css({"background-color":"#cccccc",color:"#484547"}),h()('h3[rel="vis"]').css({"background-color":"#999597",color:"white"})},narrowpanel:function(){var t=window.innerWidth-75;h()("#structurematches").css({width:t}),h()('h3[rel="featurelist"]').css({"background-color":"#999597",color:"white"}),h()('h3[rel="vis"]').css({"background-color":"#cccccc",color:"#484547"})}},mounted:function(){h()('h3[rel="vis"]').css({"background-color":"#cccccc",color:"#484547"})}},pe=de,he=(n("a98f"),Object(v["a"])(pe,Zt,Yt,!1,null,"390e7948",null)),fe=he.exports,me=n("1ff0"),ve={name:"Center",components:{StructureViewer:Gt,Structures:fe,AboutAquaria:me["a"]},mounted:function(){var t=window.innerWidth-75;h()("#structurematches").css({width:t}),h()("#threeDSpan-inner-sequence-widget-inner canvas").on("click",(function(){h()("#structurematches").show()}))}},we=ve,be=(n("eebd"),Object(v["a"])(we,K,tt,!1,null,"4018ecba",null)),ge=be.exports,_e={name:"Content",components:{Controls:Y,Center:ge}},ke=_e,xe=(n("b318"),Object(v["a"])(ke,o,i,!1,null,null,null)),ye=xe.exports,Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"footer"}})},Se=[],Ee={name:"Footer"},Ce=Ee,Re=Object(v["a"])(Ce,Ae,Se,!1,null,null,null),Te=Re.exports,Ie=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Pe=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bad_browser"}},[n("p",{attrs:{id:"starter"}},[n("img",{staticStyle:{display:"none"},attrs:{src:"/images/logo-large.png",width:"605",height:"167",alt:"Aquaria"}})]),n("h2",{staticStyle:{color:"crimson",display:"none"}},[t._v("Sorry, but Aquaria will not work with your browser!")])])}],Ve={name:"BadBrowser"},Oe=Ve,De=Object(v["a"])(Oe,Ie,Pe,!1,null,null,null),Ue=De.exports,Be={name:"Wrapper",components:{Content:ye,BadBrowser:Ue,Footer:Te},mounted:function(){setTimeout((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}),1500)}},qe=Be,Fe=(n("8f89"),Object(v["a"])(qe,a,r,!1,null,null,null));e["default"]=Fe.exports},b165:function(t,e,n){"use strict";var a=n("e2e4"),r=n.n(a);r.a},b318:function(t,e,n){"use strict";var a=n("d1f0"),r=n.n(a);r.a},bb36:function(t,e,n){},be68:function(t,e,n){},c519:function(t,e,n){"use strict";var a=n("7fb8"),r=n.n(a);r.a},d0b0:function(t,e,n){},d1f0:function(t,e,n){},d390:function(t,e,n){"use strict";var a=n("be68"),r=n.n(a);r.a},d418:function(t,e,n){"use strict";var a=n("5ec7"),r=n.n(a);r.a},d9a5:function(t,e,n){},db00:function(t,e,n){},e2e4:function(t,e,n){},e333:function(t,e,n){},e8c9:function(t,e,n){"use strict";var a=n("d9a5"),r=n.n(a);r.a},eebd:function(t,e,n){"use strict";var a=n("a00a"),r=n.n(a);r.a},fe0e:function(t,e,n){}}]);
//# sourceMappingURL=wrapper.6c9592b4.js.map