(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wrapper"],{"00e6":function(t,e,n){},"0e04":function(t,e,n){"use strict";var a=n("e333"),r=n.n(a);r.a},1:function(t,e){},"1a77":function(t,e,n){t.exports=n.p+"img/icon-large.53f00b7d.png"},"1a98":function(t,e,n){"use strict";var a=n("db00"),r=n.n(a);r.a},2787:function(t,e,n){},2847:function(t,e,n){},"39b5":function(t,e,n){t.exports=n.p+"img/MS-01.f169151b.svg"},"3d0a":function(t,e,n){"use strict";var a=n("fe0e"),r=n.n(a);r.a},"5ec7":function(t,e,n){},"5f14":function(t,e,n){"use strict";var a=n("d0b0"),r=n.n(a);r.a},6328:function(t,e,n){"use strict";var a=n("a9b1"),r=n.n(a);r.a},7829:function(t,e,n){},"7fb8":function(t,e,n){},"8f89":function(t,e,n){"use strict";var a=n("7829"),r=n.n(a);r.a},9966:function(t,e,n){"use strict";var a=n("2787"),r=n.n(a);r.a},"9db5":function(t,e,n){t.exports=n.p+"img/FT-01.e4a6c439.svg"},a00a:function(t,e,n){},a98f:function(t,e,n){"use strict";var a=n("2847"),r=n.n(a);r.a},a9b1:function(t,e,n){},ae0b:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"wrapper"}},[n("Content"),n("Footer"),n("BadBrowser")],1)},r=[],i=(n("57aa"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"content"}},[n("Controls"),n("Center",{attrs:{id:"center"}})],1)}),o=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"controls"}},[n("Logo"),n("AffordanceMode")],1)},c=[],u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"logo-intro"}},[a("div",{attrs:{id:"logo"}},["mobile"===t.$mq||"tablet"===t.$mq||"laptop"===t.$mq?a("img",{attrs:{src:n("1a77"),alt:"Aquaria Logo"},on:{click:function(e){return t.showAbout()}}}):t._e(),t._m(0)]),"laptop"===t.$mq?a("p",{attrs:{id:"intro"}}):t._e()])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wait"}},[a("img",{attrs:{id:"gif",src:n("6679"),alt:"Loading",title:"Loading data..."}})])}],d=n("4360"),p=n("1157"),f=n.n(p),h={name:"Logo",methods:{showAbout:function(){0===document.getElementsByClassName("dimmer").length?(f()("body").append('<div class="dimmer"></div>'),f()("div.dimmer").on("click",(function(){f()("div#about_overlay, div#help_overlay").hide(),f()("div.dimmer").remove()}))):f()("div.dimmer").remove(),f()("div#about_overlay").slideToggle("slow")},showExplanations:function(){f()("div.dimmer").remove(),f()("div#about_overlay, div#help_overlay").hide(),f()("body, #gallery").css("margin-top","5em"),f()("div.container").first().hide(),f()("div.outer_container").first().append("<div id='tree_helper' class='chardinjs-helper-layer chardinjs-relative-position'></div>"),f()("#tree_helper").html('<img src="/images/tree-overlay.png" />'),f()("body").chardinJs("start")}},computed:{data:function(){return d["a"].state.message}}},m=h,v=(n("9966"),n("2877")),b=Object(v["a"])(m,u,l,!1,null,"37ab1ca4",null),w=b.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"affordance_mode"}},[n("h3",{attrs:{id:"gene_name"},on:{click:function(e){return t.showPanels()}}}),n("Title3D",{attrs:{id:"title3D"}}),n("SearchPanel",{attrs:{id:"searchByName"}}),n("Gallery",{attrs:{id:"gallery"}}),n("AboutUniprot",{attrs:{id:"uniprot"}})],1)},_=[],x=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},k=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"searchByName"}},[n("h3",[t._v("Specify a Protein")]),n("form",{attrs:{id:"myform",name:"myform",ACTION:"#",method:"post"}},[n("p",{attrs:{id:"input1"}},[n("input",{staticClass:"search",attrs:{type:"text",id:"protein_syn_input",name:"protein_syn_input",placeholder:"Protein name/ID",autocomplete:"on","data-intro":"START HERE - specify a protein name (or UniProt identifier, or PDB ID), then press 'Enter'.","data-position":"right"}})]),n("p"),n("p",{attrs:{id:"input2"}},[n("input",{staticClass:"search",attrs:{type:"text",id:"organism_syn_input",name:"organism_syn_input",placeholder:"Organism",autocomplete:"on","data-intro":"Enter an organism name (human is default).","data-position":"right"}})])])])}],y={name:"SearchPanel",methods:{fillin:function(t){document.getElementById("protein_syn_input").value=t,setTimeout((function(){window.location.href="/P04637"}),300)}}},A=y,S=(n("e8c9"),Object(v["a"])(A,x,k,!1,null,null,null)),C=S.exports,E=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},T=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{attrs:{id:"titleBar3Dview","data-intro":"3D view: initially shows PDB structure estimated to be most relevant for the specified protein. Hue is used to indicate secondary structure: yellow = strand, blue = helix, and green = coil. Lightness is used to indicate amino acid substitutions between the specified protein and PDB structure: slightly dark = conserved, very dark = non-conserved, white = insertions, and semi-transparent = other chains. <br><p>&nbsp;</p>\n<div class='bg_helpdoc'>\n<table id='helptable'><tr><td>\n<h2>Videos</h2>\n<p><a target='_blank' href='http://youtu.be/FAQ3yVGYSzY'>Quick introduction (6:16)</a></p>\n<p><a target='_blank' href='http://youtu.be/PIs1qyV_dIQ'>General overview (44:25)</a></p>\n<p><a target='_blank' href='http://youtu.be/XU_6TWM9ke8'>Leap Motion controller (2:18)</a></p>\n<h2>Installation</h2>\n<p><a target='_blank' href='https://docs.google.com/document/d/1waNOvw442Bwncx_FlMJAATH35aJxXpxu0iRcrZt8hrQ/pub'>On Mac OS</a></p>\n<p><a target='_blank' href='https://docs.google.com/document/d/1wZo-76MEPyoDj-9uAxHyz4y2f4_6ZR89uJcPBQvVUQc/pub'>On Windows</a></p>\n<h2>Documentation</h2>\n<p><a target='_blank' href='/help/Aquaria3D_QR_v1.pdf'>Mouse & keyboard controls</a></p>\n<p><a target='_blank' href='https://docs.google.com/document/d/1566Ub_-WAXMcuOA8gmb2-X9JmYfWuZarrgneNVaBQd8/pub'>Aquaria API</a></p>\n</td><td>\n<h2>Publication</h2>\n<p><a target='_blank' href='http://nature.com/articles/nmeth.3258'>O&rsquo;Donoghue et al., Nature Methods (2015)</a></p>\n<h2>Forum</h2>\n<p><a target='_blank' href='https://www.biostars.org/t/aquaria'>View forum</a></p>\n<p><a target='_blank' href='https://www.biostars.org/p/new/post/?tag_val=aquaria'>Ask a question</a></p>\n<h2>Bugs</h2>\n<p><a target='_blank' href='https://github.com/ODonoghueLab/Aquaria/issues'>View known bugs</a></p>\n<p><a target='_blank' href='https://github.com/ODonoghueLab/Aquaria/issues/new' >Report new bug</a></p>\n</td></tr></table>\n</div>\n","data-position":"bottom"}},[t._v("3D structure "),n("span",{staticClass:"explanation",attrs:{id:"structureviewerexplanation"}}),n("div",{staticClass:"rightHeaderBar"},[n("a",{attrs:{href:"javascript:;",title:"Toggle full window view","data-intro":"Full window","data-position":"bottom"}},[n("span",{staticClass:"roundButton",staticStyle:{display:"inline-block"},attrs:{id:"expander"}})]),n("a",{staticClass:"launchApplicationLink",attrs:{href:"#",target:"_blank",title:"Launch stand-alone Java application","data-intro":"Standalone application","data-position":"top"}},[n("span",{staticClass:"applauncher roundButton",staticStyle:{display:"inline-block"}})])])])}],R={name:"Title3D"},I=R,P=(n("3d0a"),Object(v["a"])(I,E,T,!1,null,"645e07b7",null)),V=P.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel",attrs:{id:"about","data-intro":"UniProt summary of the specified protein's function.","data-position":"right"}},[t._m(0),n("div",{attrs:{id:"psyns"}},[n("p",[t._v("(example: "),n("a",{attrs:{href:"#"},on:{click:function(e){return t.fillin("p53")}}},[t._v("p53")]),t._v(" or "),n("a",{attrs:{href:"#"},on:{click:function(e){return t.fillin("P04637")}}},[t._v("P04637")]),t._v(")")])]),t._m(1),t._m(2),n("div",{attrs:{id:"uniProtDesc"}})])},D=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",[t._v("About "),n("span",{staticClass:"explanation"},[t._v(" Uniprot ID")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"none"},attrs:{id:"gsyns"}},[n("p",[t._v("Genes: ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"osyns"}},[n("p")])}],F={name:"AboutUniprot"},U=F,B=(n("0e04"),Object(v["a"])(U,O,D,!1,null,"2590993c",null)),q=B.exports,L=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},N=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"gallery"}},[n("div",{staticClass:"panel",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[n("h3",[t._v("About "),n("span",{staticClass:"explanation"},[t._v(" PDB")])]),n("span",{staticClass:"content",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[n("span",{staticStyle:{display:"none"},attrs:{id:"biounitDisplay"}},[n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitLeft",title:"Navigate to other assemblies"}},[t._v("<")]),t._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitType"}},[t._v("biounit")]),t._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitCount"}},[t._v("x/x")]),t._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitRight",title:"Navigate to other assemblies"}},[t._v(">")]),n("a",{attrs:{id:"helpBiounit",href:"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit",target:"_blank",title:"Go to PDB to view explanation of assembly"}},[n("span",{staticClass:"help roundButton"})])]),n("span",{staticStyle:{display:"none"},attrs:{id:"aboutPDBHider","data-intro":"PubMed Information about PDB structure","data-position":"left"}},[n("p",{attrs:{id:"classification"}},[t._v("Classification unavailable")]),n("h4",{attrs:{id:"reference_title"}},[t._v("Title unavailable")]),n("p",{attrs:{id:"reference_link"}},[n("a",{attrs:{href:"#"}},[t._v("PubMed Link unavailable")])]),n("p",{attrs:{id:"molecule",title:"View this structure in Aquaria","data-intro":"Information about currently focused PDB chain.","data-position":"left"}},[n("strong",[t._v("Molecule: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])])]),n("p",{attrs:{id:"organism"}},[n("strong",[t._v("Organism: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])]),n("p",{attrs:{id:"small_molecules"}},[n("strong",[t._v("Small molecules: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])]),n("p",{attrs:{id:"method"}},[n("strong",[t._v("Method: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])]),n("p",{attrs:{id:"resolution"}},[n("strong",[t._v("Resolution: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])]),n("p",{attrs:{id:"pdb"}},[n("strong",[t._v("Protein Data Bank: ")]),n("span",{staticClass:"text"},[t._v("unavailable")])])])])])}],$={name:"Gallery"},j=$,M=(n("1a98"),Object(v["a"])(j,L,N,!1,null,"035c6330",null)),H=M.exports,Q={name:"AffordanceMode",components:{SearchPanel:C,AboutUniprot:q,Gallery:H,Title3D:V},mounted:function(){var t=f()("#affordance_mode").width()/2-f()("#searchByName").width()/2;t+="px",f()("#searchByName").css({"margin-left":t})},methods:{showPanels:function(){0===document.getElementsByClassName("dimmer").length?(f()("body").append('<div class="dimmer"></div>'),f()("#gene_name").hide(),f()("div.dimmer").on("click",(function(){f()("#searchByName, #title3D,#uniprot, #gallery").hide(),f()("div.dimmer").remove(),f()("#gene_name").show()}))):f()("div.dimmer").remove(),f()("#searchByName, #title3D").slideToggle("slow")}}},z=Q,J=(n("c519"),Object(v["a"])(z,g,_,!1,null,"31defa9f",null)),W=J.exports,X={name:"Controls",components:{Logo:w,AffordanceMode:W}},G=X,Z=(n("d390"),Object(v["a"])(G,s,c,!1,null,"62c0f173",null)),Y=Z.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("StructureViewer",{attrs:{id:"structureviewer"}}),n("Structures",{staticClass:"panel",attrs:{id:"structurematches","data-intro":" ","data-position":"top"}}),n("AboutAquaria")],1)},tt=[],et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("XRButton"),t._m(0),n("span",{staticClass:"threedcontent resizable",attrs:{id:"threeD"}},[n("span",{attrs:{id:"threeDSpan"}}),n("Tabs"),t._m(1),t._m(2)],1)],1)},nt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aquariaWarning",attrs:{id:"updateJava3D"}},[n("p",[n("strong",[t._v("Aquaria needs to update your Java3D.")])]),n("form",{attrs:{action:"/downloads/AquariaSetupMac.dmg"}},[n("p",[t._v("1. "),n("button",{attrs:{id:"myButton",type:"submit"}},[t._v("Download Aquaria Setup")])])]),n("p",[t._v("2. After downloading, run AquariaSetupMac.dmg from your Downloads folder.")]),n("p",[t._v("3. Restart your browser once the setup is finished.")]),n("br"),n("p",[t._v("For more information see "),n("a",{attrs:{href:"https://docs.google.com/document/d/1waNOvw442Bwncx_FlMJAATH35aJxXpxu0iRcrZt8hrQ/pub",target:"_blank"}},[t._v("Aquaria help")]),t._v(".")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("iframe",{attrs:{src:"/html/waiting.html",frameBorder:"0",name:"waitingFrame",id:"waitingFrame",scrolling:"no",allowtransparency:"true"}},[n("p",[t._v("Your browser does not support iframes.")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("iframe",{staticStyle:{bottom:"20px",left:"20px"},attrs:{src:"/html/selectionText.html",frameBorder:"0",name:"selectionText",id:"selectionText",scrolling:"no",allowtransparency:"true"}},[n("p",[t._v("Your browser does not support iframes.")])])}],at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.dataReceived&&!t.isOpen?n("img",{staticClass:"xr-menu-button",attrs:{src:"/images/ar-button.png"},on:{click:function(e){return t.open()}}}):t._e(),t.isOpen?n("div",{staticClass:"column xr-modal"},[n("div",{staticClass:"column inner-modal"},[n("div",{staticClass:"row modal-header"},[n("div"),n("h1",[t._v("XR Options")]),n("button",{on:{click:function(e){return t.close()}}},[t._v("X")])]),n("div",{staticClass:"column modal-content"},[n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.downloadGltf()}}},[t._v("Download GLTF (.glb)")]),n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.downloadUsd()}}},[t._v("Download USD (.usdz)")]),t.sceneViewer?n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.openInSceneViewer()}}},[t._v("Open in Scene Viewer")]):t._e(),t.quickLook?n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.openInQuickLook()}}},[t._v("Open in AR Quick Look")]):t._e(),t.psvrEnabled?n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.psvrExport()}}},[t._v("Send to PSVR")]):t._e(),t.hevsPlatform?n("button",{staticClass:"xr-item default-button",attrs:{disabled:!!t.hevsAsset},on:{click:function(e){t.close(),t.hevsExport()}}},[t._v(t._s(t.hevsAsset?"Connected to HEVS":"Send to HEVS"))]):t._e(),t.advancedViewerEnabled?n("button",{staticClass:"xr-item default-button",on:{click:function(e){t.close(),t.openInAdvancedViewer()}}},[t._v("Open in Advanced Viewer")]):t._e(),n("canvas",{ref:"qr",staticClass:"xr-qr"})])])]):t._e()])},rt=[],it=(n("99af"),n("4160"),n("caad"),n("c975"),n("d81d"),n("b0c0"),n("a9e3"),n("25eb"),n("b680"),n("b64b"),n("d3b7"),n("ac1f"),n("25f0"),n("2532"),n("3ca3"),n("841c"),n("1276"),n("498a"),n("4c53"),n("159b"),n("ddb0"),n("2b3d"),n("3835")),ot=(n("96cf"),n("1da1")),st=(n("7db0"),n("c740"),n("a15b"),n("fb6a"),n("5319"),n("bc3a")),ct=n.n(st),ut=Number.parseInt("45")||40,lt={supportsSceneViewer:/(android)/i.test(navigator.userAgent),supportsQuickLook:document.createElement("a").relList.supports("ar"),supportsMixedReality:/(Windows NT 10.0)/i.test(navigator.userAgent)};function dt(t){var e=window.AQUARIA.groupedFeatures.find((function(e){var n=Object(it["a"])(e,1),a=n[0];return a===t})),n=Object(it["a"])(e,2),a=n[1];return{featureSets:a,name:t}}function pt(t,e,n){var a=0,r=Math.max(n,0);return a=Math.max(t.featureSets.findIndex((function(t){return t.Type===e.Type&&t.Category===e.Category})),0),[a,r]}function ft(t,e,n,a){var r=document.createElement("a");r.href=St(t,e,{format:n,featureTrackToBake:a}),r.download="".concat(t,".").concat(e,".").concat(n),r.click()}function ht(t,e,n){var a=St(t,e,{format:"usdz",featureTrackToBake:n});Pt(a)}function mt(t,e,n){var a=St(t,e,{featureTrackToBake:n}),r="".concat(t,".").concat(e);It(a,r)}function vt(t,e,n){return bt.apply(this,arguments)}function bt(){return bt=Object(ot["a"])(regeneratorRuntime.mark((function t(e,n,a){var r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=St(e,n,{format:"gltf"}),i={modelUri:r,fileName:"".concat(e,".").concat(n),collection:a},t.next=4,ct.a.post("".concat("https://test.aquaria.ws:8011","/xr/sendToPSVR"),i);case 4:if(o=t.sent,!(o.status>=400)){t.next=9;break}throw new Error(o.data);case 9:return t.abrupt("return",o.data.result);case 10:case"end":return t.stop()}}),t)}))),bt.apply(this,arguments)}function wt(t,e,n){return gt.apply(this,arguments)}function gt(){return gt=Object(ot["a"])(regeneratorRuntime.mark((function t(e,n,a){var r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=St(n,a,{rescale:!1}),i={hevsPlatform:e,modelUri:r,name:"".concat(n,".").concat(a)},t.next=4,ct.a.post("".concat("https://test.aquaria.ws:8011","/xr/sendToHEVS"),i);case 4:if(o=t.sent,!(o.status>=400)){t.next=9;break}throw new Error(o.data);case 9:return t.abrupt("return",o.data.assetId);case 10:case"end":return t.stop()}}),t)}))),gt.apply(this,arguments)}function _t(t,e,n,a,r,i){return xt.apply(this,arguments)}function xt(){return xt=Object(ot["a"])(regeneratorRuntime.mark((function t(e,n,a,r,i,o){var s,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return s={hevsPlatform:e,assetId:n,collection:a,featureSetIndex:r,trackName:i,skipUpload:o},t.next=4,ct.a.post("".concat("https://test.aquaria.ws:8011","/xr/setHEVSFeature"),s);case 4:if(c=t.sent,!(c.status>=400)){t.next=7;break}throw new Error(c.data);case 7:t.next=15;break;case 9:return u={hevsPlatform:e,assetId:n},t.next=12,ct.a.post("".concat("https://test.aquaria.ws:8011","/xr/clearHEVSFeature"),u);case 12:if(l=t.sent,!(l.status>=400)){t.next=15;break}throw new Error(l.data);case 15:case"end":return t.stop()}}),t)}))),xt.apply(this,arguments)}function kt(t,e,n,a){return yt.apply(this,arguments)}function yt(){return yt=Object(ot["a"])(regeneratorRuntime.mark((function t(e,n,a,r){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={hevsPlatform:e,assetId:n,pose:a,view:r},t.next=3,ct.a.post("".concat("https://test.aquaria.ws:8011","/xr/setHEVSView"),i);case 3:if(o=t.sent,!(o.status>=400)){t.next=6;break}throw new Error(o.data);case 6:case"end":return t.stop()}}),t)}))),yt.apply(this,arguments)}function At(t,e){var n=document.createElement("a");n.href="".concat("https://ie.csiro.au/apps/aquaria-export-preview","?protein=").concat(t,"&pdb=").concat(e),n.target="_",n.click()}function St(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={format:"glb",featureTrackToBake:null,rescale:!0},r=Object.assign(a,n),i="".concat("https://ie.csiro.au/services/aquaria-export","/").concat(t,"/").concat(e,".").concat(r.format),o=new URLSearchParams;if(!1===n.rescale&&o.append("rescale","false"),n.featureTrackToBake){var s=n.featureTrackToBake.map((function(t){var e="".concat(t.color.replace("#",""),"-").concat(t.start);return t.start!==t.end&&(e="".concat(e,"-").concat(t.end)),e}));o.append("f",s.join(","))}var c=o.toString();return c?"".concat(i,"?").concat(o):i}function Ct(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=n&&n.length>ut?n.slice(0,ut):n,r=St(t,e,{format:"$FORMAT",featureTrackToBake:a});return r}function Et(t){lt.supportsQuickLook?Pt(t.replace("$FORMAT","usdz")):lt.supportsSceneViewer&&It(t.replace("$FORMAT","glb"),"Aquaria Auto-XR")}function Tt(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=window.AQUARIA.panel3d.embededJolecule.soupWidget.camera.position.clone(),n=window.AQUARIA.panel3d.embededJolecule.soupWidget.camera.quaternion.clone();return t&&(e.x=-e.x,n.set(n.z,n.w,n.x,n.y)),{position:[e.x,e.y,e.z],orientation:[n.x,n.y,n.z,n.w]}}function Rt(){return window.AQUARIA.panel3d.embededJolecule.soupView}function It(t,e){var n="com.google.android.googlequicksearchbox",a="android.intent.action.VIEW",r="ar_preferred",i="https://developers.google.com/ar",o="intent://arvr.google.com/scene-viewer/1.0?file=".concat(t,"&mode=").concat(r,"&title=").concat(e,"#Intent;scheme=https;package=").concat(n,";action=").concat(a,";S.browser_fallback_url=").concat(i,";end;"),s=document.createElement("a");s.href=o,s.click()}function Pt(t){var e=document.createElement("a");e.href=t,e.rel="ar",e.appendChild(document.createElement("img")),e.click()}var Vt=n("d055"),Ot=n.n(Vt),Dt=n("f7fe"),Ft=n.n(Dt),Ut=n("5a89"),Bt=",",qt=2,Lt=new URLSearchParams(location.search),Nt=Number.parseInt(Lt.has("HEVS_UPDATE_INTERVAL")?Lt.get("HEVS_UPDATE_INTERVAL"):"1000")||1e3;if(Lt.has("xr")){var $t=Lt.get("xr");Lt.delete("xr"),history.replaceState(null,"","".concat(location.pathname,"?").concat(Lt.toString())),Et($t)}var jt={name:"XRButton",components:{},data:function(){return{dataReceived:!1,pdbId:"none",proteinId:"none",quickLook:lt.supportsQuickLook,sceneViewer:lt.supportsSceneViewer,featuresActive:!1,featureSet:null,featureTrack:-1,featureCollection:null,isOpen:!1,view:null,pose:null,hevsPlatform:Lt.get("HEVS"),hevsAsset:null,hevsUploadedCollections:[],psvrEnabled:!!Lt.get("PSVR"),advancedViewerEnabled:!!Lt.get("dev")}},mounted:function(){var t,e=this;this.hevsViewUpdateDebounced=Ft()((function(){return e.hevsViewUpdate()}),Nt,{leading:!0,maxWait:Nt});var n=function(n,r,i){t(n,r,i),e.dataReceived=!0,e.featuresActive=!1,e.featureSet=null,e.featureTrack=-1,e.featureCollection=null,e.hevsUploadedCollections=[],e.proteinId=n,e.pdbId=r,a()};window.AQUARIA.chainSelected!==n&&(t=window.AQUARIA.chainSelected,window.AQUARIA.chainSelected=n),window.AQUARIA.onFeatureChange=function(t,n){t?(e.featuresActive=!0,e.featureSet=t,e.featureTrack=n,e.featureCollection=dt(t.Server)):(e.featuresActive=!1,e.featureSet=null,e.featureTrack=-1,e.featureCollection=null),e.hevsPlatform&&e.hevsAsset&&e.hevsFeatureUpdate()},function(){var t=function t(){requestAnimationFrame((function(){return t()}));try{var n=Rt(),a=Tt();e.pose||(e.pose=a,e.view=n);for(var r=!1,i=0;i<3;i++)if(a.position[i]!==e.pose.position[i]){r=!0;break}for(var o=0;o<4;o++)if(a.orientation[o]!==e.pose.orientation[o]){r=!0;break}r&&(e.pose=a,e.view=n)}catch(s){}};t()}();var a=function(){if(""!==window.location.search||""!==window.location.hash){console.log("loading view");var t=i();o(t.selected,t.pitch,t.yaw,t.roll,t.zoom)}};function r(){for(var t=window.AQUARIA.panel3d.embededJolecule.soupView,e=window.AQUARIA.panel3d.embededJolecule.soup,n={},a=e.getResidueProxy(),r=0;r<e.getResidueCount();r++)a.load(r),a.selected&&(n[a.chain]||(n[a.chain]=[]),n[a.chain].push(a.resNum));var i="#";for(var o in Object.keys(n).length>0&&(i="#"),n){i.length>1&&(i+=Bt),i+=o;var s=n[o].sort(),c=0;while(c<s.length){c>0&&(i+=Bt),i+=s[c];var u=1;while(c+u<s.length&&s[c+u]-s[c]===u)u++;u>1&&(i+="-"+s[c+u-1]),c+=u}}var l=t.currentView.cameraParams.position.clone().sub(t.currentView.cameraParams.focus).normalize(),d=t.currentView.cameraParams.up,p=d.clone().cross(l),f=l.clone().cross(p),h=new Ut["c"];h.set(p.x,f.x,l.x,0,p.y,f.y,l.y,0,p.z,f.z,l.z,0,0,0,0,1);var m=(new Ut["a"]).setFromRotationMatrix(h,"YXZ"),v=t.currentView.cameraParams.zoom/10,b="+";v<0&&(b="-");var w="".concat(i,"?(").concat(Ut["b"].radToDeg(m.y).toFixed(qt),",").concat(Ut["b"].radToDeg(m.x).toFixed(qt),",").concat(Ut["b"].radToDeg(m.z).toFixed(qt),")&").concat(b).concat(v.toFixed(qt));window.history.replaceState(null,null,window.location.origin+window.location.pathname+window.location.search+w)}function i(){var t=decodeURIComponent(window.location.href.substr(window.location.origin.length+window.location.pathname.length+window.location.search.length));if(0===t.length)return null;var e,n=t.indexOf("?"),a={},r="A",i=0,o=0,s=0;if("#"===t[0]){var c=0,u=t.substring(1,n);if(u.length>0){var l=u.split(",");for(c=0;c<l.length;c++){var d=l[c].split("-"),p=0;while(p<d[0].length){if(!isNaN(Number(d[0][p])))break;p++}p>0&&(r=d[0].substring(0,p),a[r]||(a[r]=[]),d[0]=d[0].substr(p));var f=Number(d[0].trim()),h=d.length>1?Number(d[1].trim()):NaN;if(isNaN(f))break;for(isNaN(h)&&(h=f);f<=h;f++)a[r].push(f)}}}if(-1!==n)for(var m=t.substr(n+1).split("&"),v=0;v<m.length;v++){var b=m[v].trim();if("("===b[0]){var w=b.substring(1,b.length-1),g=w.split(",");i=Number(g[0])||0,o=Number(g[1])||0,s=Number(g[2])||0}else"+"!==b[0]&&"-"!==b[0]||(e=parseFloat(b)||void 0)}return{selected:a,yaw:i,pitch:o,roll:s,zoom:e}}function o(t,e,n,a,r){var i=window.AQUARIA.panel3d.embededJolecule.soupView,o=window.AQUARIA.panel3d.embededJolecule.controller,s=[],c=function(e){s=s.concat(t[e].map((function(t){return window.AQUARIA.panel3d.embededJolecule.soup.findFirstResidue(e,t)})))};for(var u in t)c(u);o.clearSelectedResidues(),s.forEach((function(t){o.selectResidue(t.iRes,!0)}));var l=i.getZoomedOutViewOfSelection();r?r*=10:r=l.cameraParams.zoom;var d=l.cameraParams.focus,p=new Ut["a"](Ut["b"].degToRad(e),Ut["b"].degToRad(n),Ut["b"].degToRad(a),"YXZ"),f=d.clone().add(new Ut["d"](0,0,r).applyEuler(p)),h=new Ut["d"](0,1,0).applyEuler(p),m=window.AQUARIA.panel3d.embededJolecule.soupView,v=m.currentView.clone();v.cameraParams.focus.set(d.x,d.y,d.z),v.cameraParams.up.set(h.x,h.y,h.z),v.cameraParams.position=f,v.cameraParams.zoom=r,m.setTargetView(v)}window.addEventListener("keyup",(function(t){if("Digit1"===t.code)a();else if("Digit2"===t.code)o({A:[114,115,116,125]},0,0,0,8);else if("Digit3"===t.code){for(var e=window.AQUARIA.panel3d.embededJolecule.soup,n=[],r=e.getResidueProxy(),i=0;i<e.getResidueCount();i++)r.load(i),r.selected&&n.push(r.resNum);console.log("resNums: ",n)}})),window.addEventListener("mouseup",(function(){r()}))},computed:{currentFeatureTrack:function(){return this.featuresActive?this.featureSet.Tracks[this.featureTrack]:null}},watch:{pose:function(t){this.hevsAsset&&this.hevsViewUpdateDebounced()}},methods:{open:function(){var t=this;this.isOpen=!0;var e=Ct(this.proteinId,this.pdbId,this.currentFeatureTrack),n=location.search?"".concat(location.href,"&xr=").concat(e):"".concat(location.href,"?xr=").concat(e);this.$nextTick((function(){return Ot.a.toCanvas(t.$refs.qr,n)}))},close:function(){this.isOpen=!1},downloadGltf:function(){ft(this.proteinId,this.pdbId,"glb",this.currentFeatureTrack,"".concat(this.proteinId).concat(this.pdbId,".glb"))},downloadUsd:function(){ft(this.proteinId,this.pdbId,"usdz",this.currentFeatureTrack,"".concat(this.proteinId).concat(this.pdbId,".usdz"))},openInQuickLook:function(){ht(this.proteinId,this.pdbId,this.currentFeatureTrack)},openInSceneViewer:function(){mt(this.proteinId,this.pdbId,this.currentFeatureTrack)},psvrExport:function(){var t=Object(ot["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=this.featureCollection||dt(localStorage.getItem("featureOrder").split(",")[0]),console.log("[PSVR] Exporting Asset w/ ".concat(this.featureCollection?"ACTIVE":"DEFAULT/FIRST"," collection [").concat(e.name,"]")),t.next=5,vt(this.proteinId,this.pdbId,e);case 5:n=t.sent,console.log("[PSVR] Transfer successful, PSVR Response: [".concat(n,"]")),t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](0),console.warn("[PSVR] Transfer error"),console.dir(t.t0),alert("Send to PSVR failed (".concat(t.t0.message||"Unknown error",")"));case 14:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),hevsExport:function(){var t=Object(ot["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("[HEVS] Exporting Asset"),t.next=4,wt(this.hevsPlatform,this.proteinId,this.pdbId);case 4:this.hevsAsset=t.sent,console.log("[HEVS] Transfer successful, HEVS Asset ID: [".concat(this.hevsAsset,"]")),this.featuresActive&&this.hevsFeatureUpdate(),this.hevsViewUpdate(),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.warn("[HEVS] Transfer error"),console.dir(t.t0),alert("Send to HEVS failed (".concat(t.t0.message||"Unknown error",")"));case 15:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),hevsFeatureUpdate:function(){var t=Object(ot["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.featuresActive){t.next=10;break}return e=pt(this.featureCollection,this.featureSet,this.featureTrack),n=Object(it["a"])(e,2),a=n[0],r=n[1],i=this.hevsUploadedCollections.includes(this.featureCollection.name),i||this.hevsUploadedCollections.push(this.featureCollection.name),console.log("[HEVS] Updating Feature Info [".concat(this.featureCollection.name," | Set ").concat(a," | Track ").concat(r,"]").concat(i?" (SKIPPING DATA UPLOAD)":"")),t.next=8,_t(this.hevsPlatform,this.hevsAsset,this.featureCollection,a,r,i);case 8:t.next=13;break;case 10:return console.log("[HEVS] Clearing Feature Info"),t.next=13,_t(this.hevsPlatform,this.hevsAsset,null,null,null);case 13:console.log("[HEVS] Feature update OK"),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),console.warn("[HEVS] Feature update error"),console.dir(t.t0);case 20:case"end":return t.stop()}}),t,this,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}(),hevsViewUpdate:function(){var t=Object(ot["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("[HEVS] Updating View [".concat(this.pose.position[0],", ").concat(this.pose.position[1],", ").concat(this.pose.position[2],"], ").concat(this.pose.orientation[0],", ").concat(this.pose.orientation[1],", ").concat(this.pose.orientation[2],", ").concat(this.pose.orientation[3],"]")),t.next=4,kt(this.hevsPlatform,this.hevsAsset,this.pose,this.view);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),console.warn("[HEVS] View update error"),console.dir(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));function e(){return t.apply(this,arguments)}return e}(),openInAdvancedViewer:function(){At(this.proteinId,this.pdbId)}}},Mt=jt,Ht=Mt,Qt=(n("d418"),Object(v["a"])(Ht,at,rt,!1,null,"20ea3f23",null)),zt=Qt.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabs"},[n("div",{staticClass:"tab",attrs:{id:"Structures"}},[n("a",{attrs:{href:"#Structures"}},[t._v("Matching Structures "),n("span",{staticClass:"icon"},[n("img",{attrs:{src:t.MS}})])])]),n("MatchingStructures",{staticClass:"panel"}),n("div",{staticClass:"tab",attrs:{id:"Features"}},[n("a",{attrs:{href:"#Features"}},[n("span",{staticClass:"icon"},[n("img",{attrs:{src:t.FT}})]),t._v(" Features")])]),n("FeatureList",{staticClass:"panel"})],1)},Wt=[],Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"content toggled",attrs:{id:"vis"}})},Gt=[],Zt={name:"MatchingStructures"},Yt=Zt,Kt=(n("5f14"),Object(v["a"])(Yt,Xt,Gt,!1,null,null,null)),te=Kt.exports,ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toggled",attrs:{id:"featurelist"}})},ne=[],ae={name:"FeatureList",methods:{}},re=ae,ie=(n("b165"),Object(v["a"])(re,ee,ne,!1,null,null,null)),oe=ie.exports,se={name:"Tabs",components:{MatchingStructures:te,FeatureList:oe},data:function(){return{MS:n("39b5"),FT:n("9db5")}}},ce=se,ue=(n("6328"),Object(v["a"])(ce,Jt,Wt,!1,null,"5c6c4e71",null)),le=ue.exports,de={name:"StructureViewer",components:{XRButton:zt,Tabs:le},mounted:function(){function t(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(t.length)if(navigator.platform===t.pop()||screen.width>=300&&screen.width<=600)return!0}var e=t();e&&(window.outerHeight-window.innerHeight>=80?(f()("#structureviewer").css({height:"88vh"}),window.scrollTo(0,0)):(f()("#structureviewer").css({height:"103vh"}),window.scrollTo(0,0)),window.addEventListener("resize",(function(){window.outerHeight-window.innerHeight>=80?(f()("#structureviewer").css({height:"88vh"}),window.scrollTo(0,0)):(f()("#structureviewer").css({height:"103vh"}),window.scrollTo(0,0))})))}},pe=de,fe=(n("fb38"),Object(v["a"])(pe,et,nt,!1,null,"4c0f1645",null)),he=fe.exports,me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"tabs"}},[n("h3",{staticClass:"sub",attrs:{title:"Click to see clusters of matching structures",rel:"vis"},on:{click:function(e){return t.narrowpanel()}}},[t._v("Matching Structures | "),n("span",{staticClass:"explanation",attrs:{id:"structureexplanation"}})]),n("h3",{staticClass:"sub inactive",attrs:{title:"Click to see annotated features",rel:"featurelist",id:"h_featurelist","data-intro":"Provides access to sequence features.","data-position":"top"},on:{click:function(e){return t.widepanel()}}},[t._v("Features | "),n("span",{staticClass:"explanation",attrs:{id:"featureExplanation"}}),n("span",{staticClass:"counter",attrs:{id:"featureCounter"}})])]),n("MatchingStructures"),n("div",{staticClass:"toggled",attrs:{id:"ppi-diagram"}}),n("FeatureList")],1)},ve=[],be={name:"Structures",components:{MatchingStructures:te,FeatureList:oe},methods:{widepanel:function(){var t=window.innerWidth-55;f()("#structurematches").css({width:t}),f()('h3[rel="featurelist"]').css({"background-color":"#cccccc",color:"#484547"}),f()('h3[rel="vis"]').css({"background-color":"#999597",color:"white"})},narrowpanel:function(){var t=window.innerWidth-75;f()("#structurematches").css({width:t}),f()('h3[rel="featurelist"]').css({"background-color":"#999597",color:"white"}),f()('h3[rel="vis"]').css({"background-color":"#cccccc",color:"#484547"})}},mounted:function(){f()('h3[rel="vis"]').css({"background-color":"#cccccc",color:"#484547"})}},we=be,ge=(n("a98f"),Object(v["a"])(we,me,ve,!1,null,"390e7948",null)),_e=ge.exports,xe=n("1ff0"),ke={name:"Center",components:{StructureViewer:he,Structures:_e,AboutAquaria:xe["a"]},mounted:function(){var t=window.innerWidth-75;f()("#structurematches").css({width:t}),f()("#threeDSpan-inner-sequence-widget-inner canvas").on("click",(function(){f()("#structurematches").show()}))}},ye=ke,Ae=(n("eebd"),Object(v["a"])(ye,K,tt,!1,null,"4018ecba",null)),Se=Ae.exports,Ce={name:"Content",components:{Controls:Y,Center:Se}},Ee=Ce,Te=(n("b318"),Object(v["a"])(Ee,i,o,!1,null,null,null)),Re=Te.exports,Ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"footer"}})},Pe=[],Ve={name:"Footer"},Oe=Ve,De=Object(v["a"])(Oe,Ie,Pe,!1,null,null,null),Fe=De.exports,Ue=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Be=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bad_browser"}},[n("p",{attrs:{id:"starter"}},[n("img",{staticStyle:{display:"none"},attrs:{src:"/images/logo-large.png",width:"605",height:"167",alt:"Aquaria"}})]),n("h2",{staticStyle:{color:"crimson",display:"none"}},[t._v("Sorry, but Aquaria will not work with your browser!")])])}],qe={name:"BadBrowser"},Le=qe,Ne=Object(v["a"])(Le,Ue,Be,!1,null,null,null),$e=Ne.exports,je={name:"Wrapper",components:{Content:Re,BadBrowser:$e,Footer:Fe},mounted:function(){document.querySelector("#header").remove(),setTimeout((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}),1500)}},Me=je,He=(n("8f89"),Object(v["a"])(Me,a,r,!1,null,null,null));e["default"]=He.exports},b165:function(t,e,n){"use strict";var a=n("e2e4"),r=n.n(a);r.a},b318:function(t,e,n){"use strict";var a=n("d1f0"),r=n.n(a);r.a},be68:function(t,e,n){},c519:function(t,e,n){"use strict";var a=n("7fb8"),r=n.n(a);r.a},d0b0:function(t,e,n){},d1f0:function(t,e,n){},d390:function(t,e,n){"use strict";var a=n("be68"),r=n.n(a);r.a},d418:function(t,e,n){"use strict";var a=n("5ec7"),r=n.n(a);r.a},d9a5:function(t,e,n){},db00:function(t,e,n){},e2e4:function(t,e,n){},e333:function(t,e,n){},e8c9:function(t,e,n){"use strict";var a=n("d9a5"),r=n.n(a);r.a},eebd:function(t,e,n){"use strict";var a=n("a00a"),r=n.n(a);r.a},fb38:function(t,e,n){"use strict";var a=n("00e6"),r=n.n(a);r.a},fe0e:function(t,e,n){}}]);
//# sourceMappingURL=wrapper.79cbcd7e.js.map