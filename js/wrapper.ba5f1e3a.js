(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wrapper"],{"009e":function(e,t,n){"use strict";var r=n("233e"),a=n.n(r);a.a},1:function(e,t){},"1a77":function(e,t,n){e.exports=n.p+"img/icon-large.53f00b7d.png"},"1e5e":function(e,t,n){e.exports=n.p+"img/search.8e085e9e.png"},"20d9":function(e,t,n){e.exports=n.p+"img/search_dark.012aee91.png"},"233e":function(e,t,n){},"2db4":function(e,t,n){"use strict";var r=n("4038"),a=n.n(r);a.a},"2f50":function(e,t,n){e.exports=n.p+"img/aquaria-menu.1a89fbab.svg"},"387e":function(e,t,n){"use strict";var r=n("3ff5"),a=n.n(r);a.a},"39b5":function(e,t,n){e.exports=n.p+"img/MS-01.f169151b.svg"},"3d75":function(e,t,n){},"3ff5":function(e,t,n){},4038:function(e,t,n){},"47b0":function(e,t,n){"use strict";var r=n("d2c9"),a=n.n(r);a.a},"50f1":function(e,t,n){"use strict";n.r(t),n.d(t,"hidePanel",(function(){return r})),n.d(t,"hidePanels",(function(){return a}));n("4160"),n("159b");function r(e,t){document.querySelector("#"+e).style.display="none",document.querySelector("#"+t).className="tab inactive"}function a(){document.querySelectorAll("div.dimmer").forEach((function(e){return e.remove()})),this.hidePanel("vis","Structures"),this.hidePanel("featurelist","Features"),document.querySelector("#Structures").className="tab",document.querySelector("#Features").className="tab"}},"5f14":function(e,t,n){"use strict";var r=n("d0b0"),a=n.n(r);a.a},"64e6":function(e,t,n){"use strict";var r=n("910e"),a=n.n(r);a.a},"6ecd":function(e,t,n){"use strict";var r=n("a5d3"),a=n.n(r);a.a},7829:function(e,t,n){},"79cf":function(e,t,n){},"7c9d":function(e,t,n){"use strict";n.r(t),n.d(t,"RenderMap",(function(){return i})),n.d(t,"updateCluster",(function(){return o})),n.d(t,"drawClusterContainer",(function(){return s})),n.d(t,"drawCluster",(function(){return c})),n.d(t,"drawResidues",(function(){return l})),n.d(t,"setConservation",(function(){return u}));n("4160"),n("159b");var r=n("5698"),a=n.n(r);function i(e,t){this.width=document.getElementById("structureviewer").offsetWidth/1.2-window.AQUARIA.margin.right-window.AQUARIA.margin.left,this.height=40-window.AQUARIA.margin.top-window.AQUARIA.margin.bottom+35;var n=window.AQUARIA.showMatchingStructures.sequence.length;this.xScale=a.a.scale.linear().domain([1,n]).range([1,this.width]),this.clustSize=0,this.rank=t,this.cluster=e;var r="#selectedCluster",i=this.drawClusterContainer(e,t,r);"undefined"!==typeof i&&this.drawCluster(e,t)}function o(e){var t=this;this.cluster=e,this.clustSize=e.cluster_size;var n=this.cluster.pdb_id.toLowerCase()+"_"+this.rank;"undefined"!==typeof this.nusvg&&this.nusvg.select("g#structure_"+n+" text").text((function(){return t.clustSize}))}function s(e,t,n){if(0!==e.secondary_structure.length&&0!==e.secondary_structure[0].length){var r=this.xScale(e.secondary_structure[0][0].start),i=this.xScale(e.secondary_structure[0][e.secondary_structure[0].length-1].end),o=e.pdb_id.toLowerCase()+"_"+t;this.clustSize=e.cluster_size;var s=0;this.clustSize>99&&(s=8),this.clustSize>999&&(s=18),this.clustSize<10&&(s=-6);var c=a.a.select(n).append("div").attr("id","out_"+o).attr("class","coverage_map_container");return this.nusvg=c.append("div").attr("id","c_"+o).attr("class","coveragemap").append("svg").attr("width","100vw").attr("height",this.height+30).attr("viewBox","0 0 "+this.width+" "+(this.height+30)).attr("preserveAspectRatio","none"),this.nusvg.append("rect").attr("width","100%").attr("height",1).attr("transform","translate(0,33)").attr("class","insertion"),this.nusvg.append("g").attr("id","structure_"+o).attr("transform","translate("+(window.AQUARIA.margin.left+r)+",20)"),this.nusvg.select("g#structure_"+o).append("g").attr("class","cluster").attr("height",26),this.nusvg.select("g#structure_"+o+" g.cluster").append("rect").attr("class","cluster").attr("width",i-r+3).attr("height",26).attr("rx",6),this.nusvg.select("g#structure_"+o).append("text").attr("text-anchor","end").attr("fill","white").attr("x",i-r+24+s).attr("y",13).attr("dx",-3).attr("dy",".35em"),c}console.log("ClusterRenderer.drawClusterContainer error: cannot draw cluster as it has no secondary structure: ",e)}function c(e,t){var n=this;e.secondary_structure[0].forEach((function(r,a){r.start=+r.start,r.end=+r.end,n.drawResidues(e,t,r)})),this.setConservation(e)}function l(e,t,n){for(var r=e.secondary_structure[0][0].start,a=0,i=n.start;i<=n.end;i++){var o=e.conservationArray[0][i];if(i===n.end||o!==e.conservationArray[0][i+1]){var s=this.nusvg.select("g#structure_"+e.pdb_id.toLowerCase()+"_"+t+" g.cluster").append("g").attr("class","residue "+n.type).attr("id","r_"+t+"_"+i).attr("transform","translate("+(i-r-a)*window.AQUARIA.srw+",8)").append("rect").attr("class",o).attr("width",window.AQUARIA.srw*(a+1)).attr("height",10);"SHEET"===n.type&&(s.attr("height",14).attr("transform","translate(0,-2)"),i===n.end&&(s.attr("width",window.AQUARIA.srw*a),this.nusvg.select("g.residue#r_"+t+"_"+i).append("svg:polygon").attr("class",o).attr("transform","translate("+window.AQUARIA.srw*a+",0)").attr("points",window.AQUARIA.srw+",0 0,-6 0,16 "+window.AQUARIA.srw+",10"))),"HELIX"===n.type&&this.nusvg.select("g.residue#r_"+t+"_"+i+" rect").attr("height",16).attr("class",o).attr("transform","translate(0,-3)"),a=0}else a++}}function u(e){for(var t=[],n=0;n<e.seq_end.length-1;n++){var r=[];r[0]=e.seq_end[n]+1,r[1]=e.seq_start[n+1]-1,t.push(r)}}},"7eb5":function(e,t,n){},"8f89":function(e,t,n){"use strict";var r=n("7829"),a=n.n(r);a.a},"910e":function(e,t,n){},"9db5":function(e,t,n){e.exports=n.p+"img/FT-01.e4a6c439.svg"},a5d3:function(e,t,n){},ae0b:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"wrapper"}},[n("Content"),n("Footer"),n("BadBrowser")],1)},a=[],i=(n("57aa"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"content"}},[n("Controls"),n("Center",{attrs:{id:"center"}})],1)}),o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"controls"}},[n("Logo"),n("Title3D",{staticClass:"item title",attrs:{id:"title"}})],1)},c=[],l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"logo-intro"}},[r("div",{attrs:{id:"logo"}},["mobile"===e.$mq||"tablet"===e.$mq||"laptop"===e.$mq?r("img",{attrs:{src:n("1a77"),alt:"Aquaria Logo"},on:{click:function(t){return e.showAbout()}}}):e._e(),e._m(0)])])},u=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"wait"}},[r("img",{attrs:{id:"gif",src:n("6679"),alt:"Loading",title:"Loading data..."}})])}],d=n("4360"),p=n("1157"),h=n.n(p),f={name:"Logo",methods:{showAbout:function(){0===document.getElementsByClassName("dimmer").length?(h()("body").append('<div class="dimmer"></div>'),h()("div.dimmer").on("click",(function(){h()("div#about_overlay, div#help_overlay").hide(),h()("div.dimmer").remove()}))):h()("div.dimmer").remove(),h()("div#about_overlay").slideToggle("slow")},showExplanations:function(){h()("div.dimmer").remove(),h()("div#about_overlay, div#help_overlay").hide(),h()("div.container").first().hide(),h()("div.outer_container").first().append("<div id='tree_helper' class='chardinjs-helper-layer chardinjs-relative-position'></div>"),h()("#tree_helper").html('<img src="/images/tree-overlay.png" />'),h()("body").chardinJs("start")}},computed:{data:function(){return d["a"].state.message}}},m=f,v=(n("6ecd"),n("2877")),w=Object(v["a"])(m,l,u,!1,null,"0a6464b4",null),g=w.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"explanation",attrs:{id:"structureviewerexplanation"}},[n("div",{attrs:{id:"titlebar"}},[n("span",{staticClass:"titlepanel",attrs:{id:"uniprotpanel"},on:{click:e.showUniprotPanel}},[e._v(" "+e._s(e.organism_name)+" "),n("strong",[e._v(e._s(e.primary_accession))])]),n("span",{staticClass:"titlepanel",attrs:{id:"threeDexplanation"},on:{click:e.showthreeDexplanation}},[e._v(e._s(e.text)+" ")]),n("span",{staticClass:"titlepanel",attrs:{id:"pdbpanel"},on:{click:e.showPdbPanel}},[e._v(e._s(e.pdb))])])]),n("div",{attrs:{id:"contentPanel"}},[n("div",{staticClass:"contents",attrs:{id:"panel1"}},[n("SearchPanel",{attrs:{id:"searchByName"}}),n("AboutUniprot",{attrs:{id:"uniprot"}})],1),n("AboutPDB",{staticClass:"contents",attrs:{id:"gallery"}}),n("Explanation",{staticClass:"contents",attrs:{id:"explanation"}})],1)])},A=[],y=(n("4160"),n("c975"),n("498a"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"searchByName"}},[n("p",[e._v("Search proteins")]),n("form",{attrs:{id:"myform",name:"myform",ACTION:"#",method:"post"}},[n("img",{attrs:{src:e.search}}),e._m(0),e._m(1),n("p")])])}),_=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{attrs:{id:"input2"}},[n("input",{staticClass:"search",attrs:{type:"text",id:"organism_syn_input",name:"organism_syn_input",placeholder:"Organism",autocomplete:"on","data-intro":"Enter an organism name (human is default).","data-position":"right"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{attrs:{id:"input1"}},[n("input",{staticClass:"search",attrs:{type:"text",id:"protein_syn_input",name:"protein_syn_input",placeholder:"Protein name/ID",autocomplete:"on","data-intro":"START HERE - specify a protein name (or UniProt identifier, or PDB ID), then press 'Enter'.","data-position":"right"}})])}],S={name:"SearchPanel",data:function(){return{search:n("20d9")}},methods:{fillin:function(e){document.getElementById("protein_syn_input").value=e,setTimeout((function(){window.location.href="/P04637"}),300)}}},x=S,k=(n("e8c9"),Object(v["a"])(x,y,_,!1,null,null,null)),I=k.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"about","data-intro":"UniProt summary of the specified protein's function.","data-position":"right"}},[e._m(0),n("div",{attrs:{id:"psyns"}},[n("p",[e._v("(example: "),n("a",{attrs:{href:"#"},on:{click:function(t){return e.fillin("p53")}}},[e._v("p53")]),e._v(" or "),n("a",{attrs:{href:"#"},on:{click:function(t){return e.fillin("P04637")}}},[e._v("P04637")]),e._v(")")])]),e._m(1),e._m(2),n("div",{attrs:{id:"uniProtDesc"}})])},C=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h3",[e._v("About "),n("span",{staticClass:"explanation"},[e._v(" Uniprot ID")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"none"},attrs:{id:"gsyns"}},[n("p",[e._v("Genes: ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"osyns"}},[n("p")])}],E={name:"AboutUniprot"},q=E,U=(n("009e"),Object(v["a"])(q,R,C,!1,null,"ff9bd706",null)),P=U.exports,T=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},F=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"gallery"}},[n("div",{attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[n("span",{staticClass:"content",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[n("span",{staticStyle:{display:"none"},attrs:{id:"biounitDisplay"}},[n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitLeft",title:"Navigate to other assemblies"}},[e._v("<")]),e._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitType"}},[e._v("biounit")]),e._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitCount"}},[e._v("x/x")]),e._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitRight",title:"Navigate to other assemblies"}},[e._v(">")]),n("a",{attrs:{id:"helpBiounit",href:"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit",target:"_blank",title:"Go to PDB to view explanation of assembly"}},[n("span",{staticClass:"help roundButton"})])]),n("span",{staticStyle:{display:"none"},attrs:{id:"aboutPDBHider","data-intro":"PubMed Information about PDB structure","data-position":"left"}},[n("p",{attrs:{id:"classification"}},[e._v("Classification unavailable")]),n("h4",{attrs:{id:"reference_title"}},[e._v("Title unavailable")]),n("p",{attrs:{id:"reference_link"}},[n("a",{attrs:{href:"#"}},[e._v("PubMed Link unavailable")])]),n("p",{attrs:{id:"molecule",title:"View this structure in Aquaria","data-intro":"Information about currently focused PDB chain.","data-position":"left"}},[n("strong",[e._v("Molecule: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])])]),n("p",{attrs:{id:"organism"}},[n("strong",[e._v("Organism: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"small_molecules"}},[n("strong",[e._v("Small molecules: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"method"}},[n("strong",[e._v("Method: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"resolution"}},[n("strong",[e._v("Resolution: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"pdb"}},[n("strong",[e._v("Protein Data Bank: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])])])])])}],V={name:"AboutPDB"},D=V,N=(n("e1a6"),Object(v["a"])(D,T,F,!1,null,"e3aa90d4",null)),Q=N.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("What you see in the 3D viewer is the experimentally-determined structure of "+e._s(e.pdbName)+" from "),n("a",{attrs:{href:"http://www.rcsb.org/pdb/explore.do?structureId={{}}",target:"_blank"}},[e._v(" PDB entry "+e._s(e.pdbId))]),e._v("chain "+e._s(e.chainId)+". ")]),n("p",[e._v(" The full-length sequence of the protein you specified ("+e._s(e.uniprotName)+") has been aligned onto the sequence used to determine this PDB structure.")]),n("p",[e._v(" Overall, the two sequences align with "+e._s(e.score)+"% identity; any amino acid substitutions are indicated using dark coloring (see legend).")]),n("p",{staticClass:"quality"},[e._v(" This alignment has an HHblits E-value of "+e._s(e.evalueString)+" × "),n("nobr",[e._v("10"),n("sup",[e._v(e._s(e.power))])]),e._v(", which is considered to be "+e._s(e.quality)+". Based on cross-validation, the likelihood that your specified protein ("+e._s(e.uniprotName)+") adopts a structure similar to that shown is estimated to be "+e._s(e.precisiontxt)+"%.")],1),n("p",[e._v("Note that the structure shown is taken directly from the PDB; it has not been derived by ab-initio or comparative modeling.")])])},M=[],B=(n("d3b7"),n("ac1f"),n("25f0"),n("1276"),n("5698")),L=n.n(B),j={name:"Explanation",data:function(){return{pdbName:null,pdbId:null,chainId:null,score:null,qualClass:null,evalueString:null,quality:null,uniprotName:null,precisiontxt:null,power:null}},beforeMount:function(){var e=this;window.AQUARIA.explainTitle=function(t,n,r,a,i,o,s){var c;e.pdbName=r,e.pdbId=a,e.chainId=i,e.score=o,e.uniprotName=n,c=-Math.log(s)/Math.LN10;var l=100*e.BioScience_PlantDisease_Weibull_model(c);l=Math.round(l),e.evalueString=s.toString().split("e")[0],e.power=s.toString().split("e")[1],e.precisiontxt=0===s&&1===l?"close to 100":"≥ "+l,s>1e-71?(e.quality="in the twilight zone",e.qualClass="twilight"):(e.quality="high quality",e.qualClass="high")}},methods:{BioScience_PlantDisease_Weibull_model:function(e){var t;t=0;var n=-2.903935098912483,r=7.984666145922813,a=.4478023883120025;return t=1-Math.exp(-1*Math.pow((e-n)/r,a)),t},showBubble:function(e){0===document.getElementsByClassName("dimmer").length&&window.AQUARIA.overlay(),h()("span#help3D.roundButton").css("background-position","0 -21px"),document.querySelector("div.dimmer").addEventListener("click",(function(){h()("div.popup, div.dimmer").fadeOut().remove(),h()("span#help3D.roundButton").css("background-position","0 0")}));var t="<div class='balloon'><h3>3D View Explained<span class='x'>&nbsp;</span></h3>";t=t+e+"</div>",L.a.select("body").append("div").attr("class","popup top").html(t);var n=h()("#help3D").offset(),r=parseInt(n.left-230),a=parseInt(n.top+30);h()("div.popup").css({left:r+"px",top:a+"px"}).draggable().fadeIn(600),h()("span.x").click((function(){h()("div.popup, div.dimmer").fadeOut().remove(),h()("span#help3D.roundButton").css("background-position","0 0")}))}}},$=j,z=Object(v["a"])($,O,M,!1,null,null,null),H=z.exports,J={name:"Title3D",components:{AboutPDB:Q,SearchPanel:I,AboutUniprot:P,Explanation:H},data:function(){return{organism_name:null,primary_accession:null,text:null,pdb:null,search:n("1e5e")}},beforeMount:function(){var e=this;window.AQUARIA.update3DTitle=function(t,n,r,a,i){if(r&&a){var o=a;if(-1!==o.indexOf("(")&&(o=a.substring(0,a.indexOf("(")).trim()),window.AQUARIA.short_moleculeName=o,t&&n&&i){e.organism_name=window.AQUARIA.organismName,e.primary_accession=window.AQUARIA.preferred_protein_name,e.text="aligned onto",e.pdb=n+"-"+r;var s=window.AQUARIA.currentMember.E_value;window.AQUARIA.explainTitle(t,window.AQUARIA.preferred_protein_name,o,n,r,i,s)}else e.organism_name=window.AQUARIA.organismName,e.primary_accession=o,e.text="structure from",e.pdb=n+"-"+r}else h()("#accession_link").text(window.AQUARIA.preferred_protein_name)}},methods:{resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(e){e.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(e){e.style.display="none"}))},showUniprotPanel:function(e){0===document.getElementsByClassName("dimmer").length&&window.AQUARIA.overlay(),this.resetSelection(),e.target.className="titlepanel active",document.querySelector("#contentPanel").style.display="block",document.querySelector("#panel1").style.display="block",document.querySelector("#uniprot").style.display="block",document.querySelector("#searchByName").style.display="block",document.querySelector("div.dimmer").addEventListener("click",(function(){document.querySelectorAll("#titlebar span").forEach((function(e){e.className="titlepanel"})),document.querySelector("#uniprot").style.display="none",document.querySelector("#contentPanel").style.display="none",document.querySelector("#structureviewerexplanation").style.display="grid",document.querySelector("div.dimmer").remove()}))},showPdbPanel:function(e){0===document.getElementsByClassName("dimmer").length&&window.AQUARIA.overlay(),this.resetSelection(),e.target.className="titlepanel active",document.querySelector("#gallery").style.display="block",document.querySelector("#contentPanel").style.display="block",document.querySelector("div.dimmer").addEventListener("click",(function(){document.querySelectorAll("#titlebar span").forEach((function(e){e.className="titlepanel"})),document.querySelector("#contentPanel").style.display="none",document.querySelector("div.dimmer").remove()}))},showthreeDexplanation:function(e){0===document.getElementsByClassName("dimmer").length&&window.AQUARIA.overlay(),this.resetSelection(),e.target.className="titlepanel active",document.querySelector("#explanation").style.display="block",document.querySelector("#contentPanel").style.display="block",document.querySelector("div.dimmer").addEventListener("click",(function(){document.querySelectorAll("#titlebar span").forEach((function(e){e.className="titlepanel"})),document.querySelector("#contentPanel").style.display="none",document.querySelector("div.dimmer").remove()}))}},mounted:function(){this.resetSelection()},updated:function(){var e;e=document.querySelector("#organism_syn_input"),e.placeholder=window.AQUARIA.organismName,e.setAttribute("size",e.getAttribute("placeholder").length),e=document.querySelector("#protein_syn_input"),e.placeholder=window.AQUARIA.preferred_protein_name,e.setAttribute("size",e.getAttribute("placeholder").length)}},W=J,X=(n("ddb03"),Object(v["a"])(W,b,A,!1,null,null,null)),G=X.exports,Y={name:"Controls",components:{Logo:g,Title3D:G}},Z=Y,K=(n("d4d5"),Object(v["a"])(Z,s,c,!1,null,"ce8ae598",null)),ee=K.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("XRButton"),n("div",{staticClass:"item",attrs:{id:"menu-btn"}},[n("a",{attrs:{href:"#Menu"}},[n("img",{attrs:{src:e.menu}})])]),n("Menu"),n("StructureViewer",{attrs:{id:"structureviewer"}}),n("AboutAquaria"),n("Tabs"),n("CoverageMap")],1)},ne=[],re=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ae=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{attrs:{id:"map"}},[n("div",{attrs:{id:"selectedCluster"}}),n("div",{attrs:{id:"selectedFeature"}})])}],ie={name:"CoverageMap"},oe=ie,se=(n("bf11"),Object(v["a"])(oe,re,ae,!1,null,"c2c57b3a",null)),ce=se.exports,le=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ue=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"aquariaWarning",attrs:{id:"updateJava3D"}},[n("p",[n("strong",[e._v("Aquaria needs to update your Java3D.")])]),n("form",{attrs:{action:"/downloads/AquariaSetupMac.dmg"}},[n("p",[e._v("1. "),n("button",{attrs:{id:"myButton",type:"submit"}},[e._v("Download Aquaria Setup")])])]),n("p",[e._v("2. After downloading, run AquariaSetupMac.dmg from your Downloads folder.")]),n("p",[e._v("3. Restart your browser once the setup is finished.")]),n("br"),n("p",[e._v("For more information see "),n("a",{attrs:{href:"https://docs.google.com/document/d/1waNOvw442Bwncx_FlMJAATH35aJxXpxu0iRcrZt8hrQ/pub",target:"_blank"}},[e._v("Aquaria help")]),e._v(".")])]),n("span",{staticClass:"threedcontent resizable",attrs:{id:"threeD"}},[n("span",{attrs:{id:"threeDSpan"}}),n("iframe",{attrs:{src:"/html/waiting.html",frameBorder:"0",name:"waitingFrame",id:"waitingFrame",scrolling:"no",allowtransparency:"true"}},[n("p",[e._v("Your browser does not support iframes.")])]),n("iframe",{staticStyle:{bottom:"20px",left:"20px"},attrs:{src:"/html/selectionText.html",frameBorder:"0",name:"selectionText",id:"selectionText",scrolling:"no",allowtransparency:"true"}},[n("p",[e._v("Your browser does not support iframes.")])])])])}],de={name:"StructureViewer",mounted:function(){function e(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(e.length)if(navigator.platform===e.pop()||screen.width>=300&&screen.width<=600)return!0}var t=e();t&&(window.outerHeight-window.innerHeight>=80?(h()("#structureviewer").css({height:"88vh"}),window.scrollTo(0,0)):(h()("#structureviewer").css({height:"103vh"}),window.scrollTo(0,0)),window.addEventListener("resize",(function(){window.outerHeight-window.innerHeight>=80?(h()("#structureviewer").css({height:"88vh"}),window.scrollTo(0,0)):(h()("#structureviewer").css({height:"103vh"}),window.scrollTo(0,0))})))}},pe=de,he=(n("2db4"),Object(v["a"])(pe,le,ue,!1,null,"4a932558",null)),fe=he.exports,me=n("1ff0"),ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icons"},[n("div",{staticClass:"tabs"},[n("div",{staticClass:"tab",attrs:{id:"Structures"},on:{click:e.showMatches}},[n("a",{attrs:{href:"#Structures"}},[e._v("Matching Structures "),n("span",{staticClass:"icon"},[n("img",{attrs:{src:e.MS}})])])]),n("div",{staticClass:"tab",attrs:{id:"Features"},on:{click:e.showFeatures}},[n("a",{attrs:{href:"#Features"}},[n("span",{staticClass:"icon"},[n("img",{attrs:{src:e.FT}})]),e._v(" Features")])])]),n("MatchingStructures"),n("FeatureList")],1)},we=[],ge=(n("caad"),n("2532"),function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),be=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{attrs:{id:"vis"}},[n("div",{attrs:{id:"allclusters","data-intro":"Visual summary of all structures in PDB matching the specified protein, grouped by region of match.","data-position":"left"}})])}],Ae={name:"MatchingStructures",data:function(){return{clusters:window.AQUARIA.structures2match.clusters}}},ye=Ae,_e=(n("5f14"),Object(v["a"])(ye,ge,be,!1,null,null,null)),Se=_e.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"featurelist"}})},ke=[],Ie={name:"FeatureList",methods:{}},Re=Ie,Ce=(n("b165"),Object(v["a"])(Re,xe,ke,!1,null,null,null)),Ee=Ce.exports,qe=n("50f1"),Ue={name:"Tabs",components:{MatchingStructures:Se,FeatureList:Ee},data:function(){return{MS:n("39b5"),FT:n("9db5")}},mounted:function(){window.location.hash.includes("Structures")&&this.showMatches(),window.location.hash.includes("Features")&&this.showFeatures()},methods:{showPanel:function(e,t){document.querySelector("#"+e).style.display="flex",document.querySelectorAll(".tab").className="tab inactive",document.querySelector("#"+t).className="tab active"},showMatches:function(){var e=this;e.showPanel("vis","Structures"),qe["hidePanel"]("featurelist","Features"),0===document.getElementsByClassName("dimmer").length&&window.AQUARIA.overlay(),document.querySelector("div.dimmer").style.zIndex="0",document.querySelector("div.dimmer").addEventListener("click",(function(){document.querySelector("#center > div.icons").style.bottom="76px",qe["hidePanels"]()}))},showFeatures:function(){var e=this;if(window.AQUARIA.panel3d){var t=window.AQUARIA.panel3d.embededJolecule.controller;t.clearSelectedResidues()}qe["hidePanel"]("vis","Structures"),e.showPanel("featurelist","Features"),0===document.getElementsByClassName("dimmer").length&&window.AQUARIA.overlay(),document.querySelector("div.dimmer").style.zIndex="0",document.querySelector("div.dimmer").addEventListener("click",(function(){document.querySelector("#center > div.icons").style.bottom="76px",qe["hidePanels"]()}))}}},Pe=Ue,Te=(n("47b0"),Object(v["a"])(Pe,ve,we,!1,null,null,null)),Fe=Te.exports,Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.dataReceived&&!e.isOpen?n("a",{staticClass:"xr-menu-button",attrs:{id:"XRbutton"},on:{click:function(t){return e.open()}}},[e._v("XR Mode")]):e._e(),e.isOpen?n("div",{staticClass:"column xr-modal"},[n("div",{staticClass:"column inner-modal"},[n("div",{staticClass:"row modal-header"},[n("div"),n("h2",[e._v("XR Options")]),n("button",{on:{click:function(t){return e.close()}}},[e._v("×")])]),n("div",{staticClass:"column modal-content"},[n("button",{staticClass:"xr-item default-button",on:{click:function(t){e.close(),e.downloadGltf()}}},[e._v("Download GLTF (.glb)")]),n("button",{staticClass:"xr-item default-button",on:{click:function(t){e.close(),e.downloadUsd()}}},[e._v("Download USD (.usdz)")]),e.sceneViewer?n("button",{staticClass:"xr-item default-button",on:{click:function(t){e.close(),e.openInSceneViewer()}}},[e._v("Open in Scene Viewer")]):e._e(),e.quickLook?n("button",{staticClass:"xr-item default-button",on:{click:function(t){e.close(),e.openInQuickLook()}}},[e._v("Open in AR Quick Look")]):e._e(),e.windowsMr&&e.polycount<=1e4?n("button",{staticClass:"xr-item default-button",on:{click:function(t){e.close(),e.openInWindowsMR()}}},[e._v("Open in Mixed Reality")]):e._e(),e.psvrEnabled?n("button",{staticClass:"xr-item default-button",on:{click:function(t){e.close(),e.psvrExport()}}},[e._v("Send to PSVR")]):e._e(),e.hevsPlatform?n("button",{staticClass:"xr-item default-button",attrs:{disabled:!!e.hevsAsset},on:{click:function(t){e.close(),e.hevsExport()}}},[e._v(e._s(e.hevsAsset?"Connected to HEVS":"Send to HEVS"))]):e._e(),e.advancedViewerEnabled?n("button",{staticClass:"xr-item default-button",on:{click:function(t){e.close(),e.openInAdvancedViewer()}}},[e._v("Open in Advanced Viewer")]):e._e(),n("canvas",{ref:"qr",staticClass:"xr-qr"})])])]):e._e()])},De=[],Ne=(n("99af"),n("d81d"),n("b0c0"),n("a9e3"),n("25eb"),n("b680"),n("b64b"),n("3ca3"),n("5319"),n("841c"),n("4c53"),n("ddb0"),n("2b3d"),n("3835")),Qe=(n("96cf"),n("1da1")),Oe=n("2909"),Me=(n("7db0"),n("c740"),n("a15b"),n("fb6a"),n("bc3a")),Be=n.n(Me),Le=Number.parseInt("45")||40,je={supportsSceneViewer:/(android)/i.test(navigator.userAgent),supportsQuickLook:document.createElement("a").relList.supports("ar"),supportsMixedReality:/(Windows NT 10.0)/i.test(navigator.userAgent)};function $e(e){var t=window.AQUARIA.groupedFeatures.find((function(t){var n=Object(Ne["a"])(t,1),r=n[0];return r===e})),n=Object(Ne["a"])(t,2),r=n[1];return{featureSets:r,name:e}}function ze(e,t,n){var r=0,a=Math.max(n,0);return r=Math.max(e.featureSets.findIndex((function(e){return e.Type===t.Type&&e.Category===t.Category})),0),[r,a]}function He(e,t,n,r){var a=document.createElement("a");a.href=it(e,t,{format:n,featureTrackToBake:r}),a.download="".concat(e,".").concat(t,".").concat(n),a.click()}function Je(e,t,n){var r=it(e,t,{format:"usdz",featureTrackToBake:n,merge:!0,detail:1});ht(r)}function We(e,t,n){var r=it(e,t,{featureTrackToBake:n,merge:!0,detail:1}),a="".concat(e,".").concat(t);pt(r,a)}function Xe(e,t,n){var r=it(e,t,{featureTrackToBake:n,merge:!0,detail:1});ft(r)}function Ge(e,t,n){return Ye.apply(this,arguments)}function Ye(){return Ye=Object(Qe["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=it(t,n,{format:"gltf"}),i={modelUri:a,fileName:"".concat(t,".").concat(n),collection:r},e.next=4,Be.a.post("".concat("https://odonoghuelab.org:8011","/xr/sendToPSVR"),i);case 4:if(o=e.sent,!(o.status>=400)){e.next=9;break}throw new Error(o.data);case 9:return e.abrupt("return",o.data.result);case 10:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function Ze(e,t,n){return Ke.apply(this,arguments)}function Ke(){return Ke=Object(Qe["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=it(n,r,{rescale:!1}),i={hevsPlatform:t,modelUri:a,name:"".concat(n,".").concat(r)},e.next=4,Be.a.post("".concat("https://odonoghuelab.org:8011","/xr/sendToHEVS"),i);case 4:if(o=e.sent,!(o.status>=400)){e.next=9;break}throw new Error(o.data);case 9:return e.abrupt("return",o.data.assetId);case 10:case"end":return e.stop()}}),e)}))),Ke.apply(this,arguments)}function et(e,t,n,r,a,i){return tt.apply(this,arguments)}function tt(){return tt=Object(Qe["a"])(regeneratorRuntime.mark((function e(t,n,r,a,i,o){var s,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=9;break}return s={hevsPlatform:t,assetId:n,collection:r,featureSetIndex:a,trackName:i,skipUpload:o},e.next=4,Be.a.post("".concat("https://odonoghuelab.org:8011","/xr/setHEVSFeature"),s);case 4:if(c=e.sent,!(c.status>=400)){e.next=7;break}throw new Error(c.data);case 7:e.next=15;break;case 9:return l={hevsPlatform:t,assetId:n},e.next=12,Be.a.post("".concat("https://odonoghuelab.org:8011","/xr/clearHEVSFeature"),l);case 12:if(u=e.sent,!(u.status>=400)){e.next=15;break}throw new Error(u.data);case 15:case"end":return e.stop()}}),e)}))),tt.apply(this,arguments)}function nt(e,t,n){return rt.apply(this,arguments)}function rt(){return rt=Object(Qe["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={hevsPlatform:t,assetId:n,pose:r},e.next=3,Be.a.post("".concat("https://odonoghuelab.org:8011","/xr/setHEVSView"),a);case 3:if(i=e.sent,!(i.status>=400)){e.next=6;break}throw new Error(i.data);case 6:case"end":return e.stop()}}),e)}))),rt.apply(this,arguments)}function at(e,t){var n=document.createElement("a");n.href="".concat("https://ie.csiro.au/apps/aquaria-export-preview","?protein=").concat(e,"&pdb=").concat(t),n.target="_",n.click()}function it(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={format:"glb",encodedFeatureTrack:null,featureTrackToBake:null,rescale:!0,detail:null},a=Object.assign(r,n),i="".concat("https://ie.csiro.au/services/aquaria-export","/model/").concat(e,"/").concat(t,".").concat(a.format),o=new URLSearchParams;!1===n.rescale&&o.append("rescale","false"),!0===n.merge&&o.append("merge","true"),n.detail&&o.append("detail",n.detail),n.encodedFeatureTrack?o.append("f",n.encodedFeatureTrack):n.featureTrackToBake&&o.append("f",dt(n.featureTrackToBake));var s=o.toString();return s?"".concat(i,"?").concat(o):i}function ot(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=n&&n.length>Le?n.slice(0,Le):n,a="".concat(e,"|").concat(t,"|").concat(r?dt(r):"");return a}function st(e){console.info("Auto-XR invoked with payload: ".concat(e));var t=e.split("|"),n=Object(Ne["a"])(t,3),r=n[0],a=n[1],i=n[2];if(je.supportsQuickLook){var o=it(r,a,{format:"usdz",detail:1,merge:!0,encodedFeatureTrack:i});ht(o)}else if(je.supportsSceneViewer){var s=it(r,a,{format:"glb",detail:1,merge:!0,encodedFeatureTrack:i});pt(s,"Aquaria Auto-XR")}else if(je.supportsMixedReality){var c=it(r,a,{format:"glb",detail:1,merge:!0,encodedFeatureTrack:i});ft(c)}}function ct(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=window.AQUARIA.panel3d.embededJolecule.soupWidget.camera.position.clone(),n=window.AQUARIA.panel3d.embededJolecule.soupWidget.camera.quaternion.clone();return e&&(t.x=-t.x,n.set(n.z,n.w,n.x,n.y)),{position:[t.x,t.y,t.z],orientation:[n.x,n.y,n.z,n.w]}}function lt(){return window.AQUARIA.panel3d.embededJolecule.soupView}function ut(e){var t=0;return e.traverse((function(e){if(e.geometry){var n=e.geometry.getIndex();t+=n?n.count/3:e.geometry.getAttribute("position").count/3}})),t}function dt(e){return e.map((function(e){var t="".concat(e.color.replace("#",""),"-").concat(e.start);return e.start!==e.end&&(t="".concat(t,"-").concat(e.end)),t})).join(",")}function pt(e,t){var n="com.google.android.googlequicksearchbox",r="android.intent.action.VIEW",a="ar_preferred",i="https://developers.google.com/ar",o="intent://arvr.google.com/scene-viewer/1.0?file=".concat(e,"&mode=").concat(a,"&title=").concat(t,"#Intent;scheme=https;package=").concat(n,";action=").concat(r,";S.browser_fallback_url=").concat(i,";end;"),s=document.createElement("a");s.href=o,s.click()}function ht(e){var t=document.createElement("a");t.href=e,t.rel="ar",t.appendChild(document.createElement("img")),t.click()}function ft(e){var t=document.createElement("a");t.href="ms-mixedreality:addModel?uri=".concat(encodeURIComponent(e)),t.click()}var mt=n("d055"),vt=n.n(mt),wt=n("f7fe"),gt=n.n(wt),bt=n("5a89"),At=",",yt=2,_t=new URLSearchParams(location.search),St=Number.parseInt(_t.has("HEVS_UPDATE_INTERVAL")?_t.get("HEVS_UPDATE_INTERVAL"):"1000")||1e3;if(_t.has("xr")){var xt=_t.get("xr");_t.delete("xr");var kt="".concat(Object(Oe["a"])(_t.keys()).length>0?"?":"").concat(_t.toString().replace("=&","&").replace(/=$/,""));history.replaceState(null,"","".concat(location.pathname).concat(kt).concat(location.hash)),st(xt)}var It={name:"XRButton",components:{},data:function(){return{polycount:1/0,dataReceived:!1,pdbId:"none",proteinId:"none",quickLook:je.supportsQuickLook,sceneViewer:je.supportsSceneViewer,windowsMr:je.supportsMixedReality,featuresActive:!1,featureSet:null,featureTrack:-1,featureCollection:null,isOpen:!1,view:null,pose:null,hevsPlatform:_t.get("HEVS"),hevsAsset:null,hevsUploadedCollections:[],psvrEnabled:!!_t.get("PSVR"),advancedViewerEnabled:!!_t.get("dev")}},mounted:function(){var e,t=this;this.hevsViewUpdateDebounced=gt()((function(){return t.hevsViewUpdate()}),St,{leading:!0,maxWait:St});var n=function(n,a,i){e(n,a,i),t.dataReceived=!0,t.featuresActive=!1,t.featureSet=null,t.featureTrack=-1,t.featureCollection=null,t.hevsUploadedCollections=[],t.proteinId=n,t.pdbId=a,t.polycount=ut(window.AQUARIA.panel3d.embededJolecule.soupWidget.representations.transparentRibbon.displayObj),ut(window.AQUARIA.panel3d.embededJolecule.soupWidget.representations.ligand.displayObj),console.log("Polycount is: ".concat(t.polycount)),r()};window.AQUARIA.chainSelected!==n&&(e=window.AQUARIA.chainSelected,window.AQUARIA.chainSelected=n),window.AQUARIA.onFeatureChange=function(e,n){e?(t.featuresActive=!0,t.featureSet=e,t.featureTrack=n,t.featureCollection=$e(e.Server)):(t.featuresActive=!1,t.featureSet=null,t.featureTrack=-1,t.featureCollection=null),t.hevsPlatform&&t.hevsAsset&&t.hevsFeatureUpdate()},function(){var e=function e(){requestAnimationFrame((function(){return e()}));try{var n=lt(),r=ct();t.pose||(t.pose=r,t.view=n);for(var a=!1,i=0;i<3;i++)if(r.position[i]!==t.pose.position[i]){a=!0;break}for(var o=0;o<4;o++)if(r.orientation[o]!==t.pose.orientation[o]){a=!0;break}a&&(t.pose=r,t.view=n)}catch(s){}};e()}();var r=function(){if(""!==window.location.search||""!==window.location.hash){console.log("loading view");var e=i();e&&o(e.selected,e.pitch,e.yaw,e.roll,e.zoom)}};function a(){for(var e=window.AQUARIA.panel3d.embededJolecule.soupView,t=window.AQUARIA.panel3d.embededJolecule.soup,n={},r=t.getResidueProxy(),a=0;a<t.getResidueCount();a++)r.load(a),r.selected&&(n[r.chain]||(n[r.chain]=[]),n[r.chain].push(r.resNum));var i="#";for(var o in Object.keys(n).length>0&&(i="#"),n){i.length>1&&(i+=At),i+=o;var s=n[o].sort(),c=0;while(c<s.length){c>0&&(i+=At),i+=s[c];var l=1;while(c+l<s.length&&s[c+l]-s[c]===l)l++;l>1&&(i+="-"+s[c+l-1]),c+=l}}var u=e.currentView.cameraParams.position.clone().sub(e.currentView.cameraParams.focus).normalize(),d=e.currentView.cameraParams.up,p=d.clone().cross(u),h=u.clone().cross(p),f=new bt["c"];f.set(p.x,h.x,u.x,0,p.y,h.y,u.y,0,p.z,h.z,u.z,0,0,0,0,1);var m=(new bt["a"]).setFromRotationMatrix(f,"YXZ"),v=e.currentView.cameraParams.zoom/10,w="+";v<0&&(w="-");var g="".concat(i,"?(").concat(bt["b"].radToDeg(m.y).toFixed(yt),",").concat(bt["b"].radToDeg(m.x).toFixed(yt),",").concat(bt["b"].radToDeg(m.z).toFixed(yt),")&").concat(w).concat(v.toFixed(yt));window.history.replaceState(null,null,window.location.origin+window.location.pathname+window.location.search+g)}function i(){var e=decodeURIComponent(window.location.href.substr(window.location.origin.length+window.location.pathname.length+window.location.search.length));if(0===e.length)return null;var t,n=e.indexOf("?"),r={},a="A",i=0,o=0,s=0;if("#"===e[0]){var c=0,l=e.substring(1,n);if(l.length>0){var u=l.split(",");for(c=0;c<u.length;c++){var d=u[c].split("-"),p=0;while(p<d[0].length){if(!isNaN(Number(d[0][p])))break;p++}p>0&&(a=d[0].substring(0,p),r[a]||(r[a]=[]),d[0]=d[0].substr(p));var h=Number(d[0].trim()),f=d.length>1?Number(d[1].trim()):NaN;if(isNaN(h))break;for(isNaN(f)&&(f=h);h<=f;h++)r[a].push(h)}}}if(-1!==n)for(var m=e.substr(n+1).split("&"),v=0;v<m.length;v++){var w=m[v].trim();if("("===w[0]){var g=w.substring(1,w.length-1),b=g.split(",");i=Number(b[0])||0,o=Number(b[1])||0,s=Number(b[2])||0}else"+"!==w[0]&&"-"!==w[0]||(t=parseFloat(w)||void 0)}return{selected:r,yaw:i,pitch:o,roll:s,zoom:t}}function o(e,t,n,r,a){var i=window.AQUARIA.panel3d.embededJolecule.soupView,o=window.AQUARIA.panel3d.embededJolecule.controller,s=[],c=function(t){s=s.concat(e[t].map((function(e){return window.AQUARIA.panel3d.embededJolecule.soup.findFirstResidue(t,e)})))};for(var l in e)c(l);o.clearSelectedResidues(),s[0]&&s.forEach((function(e){o.selectResidue(e.iRes,!0)}));var u=i.getZoomedOutViewOfSelection();a?a*=10:a=u.cameraParams.zoom;var d=u.cameraParams.focus,p=new bt["a"](bt["b"].degToRad(t),bt["b"].degToRad(n),bt["b"].degToRad(r),"YXZ"),h=d.clone().add(new bt["d"](0,0,a).applyEuler(p)),f=new bt["d"](0,1,0).applyEuler(p),m=window.AQUARIA.panel3d.embededJolecule.soupView,v=m.currentView.clone();v.cameraParams.focus.set(d.x,d.y,d.z),v.cameraParams.up.set(f.x,f.y,f.z),v.cameraParams.position=h,v.cameraParams.zoom=a,m.setTargetView(v)}window.addEventListener("keyup",(function(e){if("Digit1"===e.code)r();else if("Digit2"===e.code)o({A:[114,115,116,125]},0,0,0,8);else if("Digit3"===e.code){for(var t=window.AQUARIA.panel3d.embededJolecule.soup,n=[],a=t.getResidueProxy(),i=0;i<t.getResidueCount();i++)a.load(i),a.selected&&n.push(a.resNum);console.log("resNums: ",n)}})),window.addEventListener("mouseup",(function(){a()}))},computed:{currentFeatureTrack:function(){return window.AQUARIA.addedFeature&&(this.featuresActive=!0,this.featureSet=window.AQUARIA.customfeatureSet,this.featureTrack=window.AQUARIA.customfeatureSetioid),this.featuresActive?this.featureSet.Tracks[this.featureTrack]:null}},watch:{pose:function(e){this.hevsAsset&&this.hevsViewUpdateDebounced()}},methods:{open:function(){var e=this;this.isOpen=!0;var t=ot(this.proteinId,this.pdbId,this.currentFeatureTrack),n=new URLSearchParams(location.search);n.append("xr",t);var r="".concat(Object(Oe["a"])(n.keys()).length>0?"?":"").concat(n.toString().replace("=&","&").replace(/=$/,"")),a="".concat(location.protocol,"//").concat(location.host).concat(location.pathname).concat(r).concat(location.hash);console.info("Auto-XR (QR) URI: ".concat(a)),this.$nextTick((function(){return vt.a.toCanvas(e.$refs.qr,a)}))},close:function(){this.isOpen=!1},downloadGltf:function(){He(this.proteinId,this.pdbId,"glb",this.currentFeatureTrack,"".concat(this.proteinId).concat(this.pdbId,".glb"))},downloadUsd:function(){He(this.proteinId,this.pdbId,"usdz",this.currentFeatureTrack,"".concat(this.proteinId).concat(this.pdbId,".usdz"))},openInQuickLook:function(){Je(this.proteinId,this.pdbId,this.currentFeatureTrack)},openInSceneViewer:function(){We(this.proteinId,this.pdbId,this.currentFeatureTrack)},openInWindowsMR:function(){Xe(this.proteinId,this.pdbId,this.currentFeatureTrack)},psvrExport:function(){var e=Object(Qe["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.featureCollection||$e(localStorage.getItem("featureOrder").split(",")[0]),console.log("[PSVR] Exporting Asset w/ ".concat(this.featureCollection?"ACTIVE":"DEFAULT/FIRST"," collection [").concat(t.name,"]")),e.next=5,Ge(this.proteinId,this.pdbId,t);case 5:n=e.sent,console.log("[PSVR] Transfer successful, PSVR Response: [".concat(n,"]")),e.next=14;break;case 9:e.prev=9,e.t0=e["catch"](0),console.warn("[PSVR] Transfer error"),console.dir(e.t0),alert("Send to PSVR failed (".concat(e.t0.message||"Unknown error",")"));case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),hevsExport:function(){var e=Object(Qe["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("[HEVS] Exporting Asset"),e.next=4,Ze(this.hevsPlatform,this.proteinId,this.pdbId);case 4:this.hevsAsset=e.sent,console.log("[HEVS] Transfer successful, HEVS Asset ID: [".concat(this.hevsAsset,"]")),this.featuresActive&&this.hevsFeatureUpdate(),this.hevsViewUpdate(),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.warn("[HEVS] Transfer error"),console.dir(e.t0),alert("Send to HEVS failed (".concat(e.t0.message||"Unknown error",")"));case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}(),hevsFeatureUpdate:function(){var e=Object(Qe["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.featuresActive){e.next=10;break}return t=ze(this.featureCollection,this.featureSet,this.featureTrack),n=Object(Ne["a"])(t,2),r=n[0],a=n[1],i=this.hevsUploadedCollections.includes(this.featureCollection.name),i||this.hevsUploadedCollections.push(this.featureCollection.name),console.log("[HEVS] Updating Feature Info [".concat(this.featureCollection.name," | Set ").concat(r," | Track ").concat(a,"]").concat(i?" (SKIPPING DATA UPLOAD)":"")),e.next=8,et(this.hevsPlatform,this.hevsAsset,this.featureCollection,r,a,i);case 8:e.next=13;break;case 10:return console.log("[HEVS] Clearing Feature Info"),e.next=13,et(this.hevsPlatform,this.hevsAsset,null,null,null);case 13:console.log("[HEVS] Feature update OK"),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),console.warn("[HEVS] Feature update error"),console.dir(e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(){return e.apply(this,arguments)}return t}(),hevsViewUpdate:function(){var e=Object(Qe["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("[HEVS] Updating View [".concat(this.pose.position[0],", ").concat(this.pose.position[1],", ").concat(this.pose.position[2],"], ").concat(this.pose.orientation[0],", ").concat(this.pose.orientation[1],", ").concat(this.pose.orientation[2],", ").concat(this.pose.orientation[3],"]")),e.next=4,nt(this.hevsPlatform,this.hevsAsset,this.pose,this.view);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),console.warn("[HEVS] View update error"),console.dir(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),openInAdvancedViewer:function(){at(this.proteinId,this.pdbId)}}},Rt=It,Ct=Rt,Et=(n("387e"),Object(v["a"])(Ct,Ve,De,!1,null,"01988f5a",null)),qt=Et.exports,Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel floating",attrs:{id:"Menu"}},[n("a",{staticClass:"close",attrs:{href:"#"}}),e._m(0),e._m(1),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected=t.target.multiple?n:n[0]},function(t){return e.onChange(t)}]}},[n("option",{attrs:{id:"ribbon",selected:""}},[e._v("Ribbon")]),n("option",{attrs:{id:"sphere"}},[e._v("Sphere")]),n("option",{attrs:{id:"backbone"}},[e._v("Backbone")])])])},Pt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{staticClass:"lnk",attrs:{id:"xr",href:"#"}},[e._v("XR Mode")]),n("a",{staticClass:"lnk",attrs:{id:"print",href:"#"}},[e._v("Print")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{staticClass:"lnk",attrs:{id:"Sidechains",href:"#Menu"}},[e._v("Sidechains")]),n("a",{staticClass:"lnk",attrs:{id:"Neighbors",href:"#Menu"}},[e._v("Neighbors")]),n("a",{staticClass:"lnk active",attrs:{id:"Ligands",href:"#Menu"}},[e._v("Ligands")]),n("a",{staticClass:"lnk",attrs:{id:"Water",href:"#Menu"}},[e._v("Water")])])}],Tt={name:"Menu",data:function(){return{selected:"Ribbon"}},methods:{onChange:function(e){var t=e.target.value.toLowerCase();document.querySelector("#threeDSpan-inner-menu-"+t).click()}},mounted:function(){var e=function(e){"lnk active"===e.target.className?e.target.className="lnk":e.target.className="lnk active"};document.querySelector("#print").addEventListener("click",(function(e){e.preventDefault(),window.AQUARIA.screenshot()})),document.querySelector("#xr").addEventListener("click",(function(e){e.preventDefault(),document.querySelector(".xr-menu-button").click()})),document.querySelector("#Sidechains").addEventListener("click",(function(t){t.preventDefault(),e(t),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(6)").click()})),document.querySelector("#Neighbors").addEventListener("click",(function(t){t.preventDefault(),e(t),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(7)").click()})),document.querySelector("#Ligands").addEventListener("click",(function(t){t.preventDefault(),e(t),document.querySelector("#threeDSpan-inner-menu-ligand").click()})),document.querySelector("#Water").addEventListener("click",(function(t){t.preventDefault(),e(t),document.querySelector("#threeDSpan-inner-menu-water").click()}))}},Ft=Tt,Vt=(n("e53a"),Object(v["a"])(Ft,Ut,Pt,!1,null,"4fd1c582",null)),Dt=Vt.exports,Nt={name:"Center",components:{StructureViewer:fe,AboutAquaria:me["a"],Tabs:Fe,XRButton:qt,Menu:Dt,CoverageMap:ce},data:function(){return{menu:n("2f50")}},mounted:function(){var e=window.innerWidth-75;h()("#structurematches").css({width:e}),h()("#threeDSpan-inner-sequence-widget-inner canvas").on("click",(function(){h()("#structurematches").show()}))}},Qt=Nt,Ot=(n("64e6"),Object(v["a"])(Qt,te,ne,!1,null,null,null)),Mt=Ot.exports,Bt={name:"Content",components:{Controls:ee,Center:Mt}},Lt=Bt,jt=(n("b318"),Object(v["a"])(Lt,i,o,!1,null,null,null)),$t=jt.exports,zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"footer"}})},Ht=[],Jt={name:"Footer"},Wt=Jt,Xt=Object(v["a"])(Wt,zt,Ht,!1,null,null,null),Gt=Xt.exports,Yt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Zt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"bad_browser"}},[n("p",{attrs:{id:"starter"}},[n("img",{staticStyle:{display:"none"},attrs:{src:"/images/logo-large.png",width:"605",height:"167",alt:"Aquaria"}})]),n("h2",{staticStyle:{color:"crimson",display:"none"}},[e._v("Sorry, but Aquaria will not work with your browser!")])])}],Kt={name:"BadBrowser"},en=Kt,tn=Object(v["a"])(en,Yt,Zt,!1,null,null,null),nn=tn.exports,rn={name:"Wrapper",components:{Content:$t,BadBrowser:nn,Footer:Gt},mounted:function(){document.querySelector("#header")&&document.querySelector("#header").remove(),setTimeout((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}),1500)}},an=rn,on=(n("8f89"),Object(v["a"])(an,r,a,!1,null,null,null));t["default"]=on.exports},b165:function(e,t,n){"use strict";var r=n("e2e4"),a=n.n(r);a.a},b318:function(e,t,n){"use strict";var r=n("d1f0"),a=n.n(r);a.a},bf11:function(e,t,n){"use strict";var r=n("7eb5"),a=n.n(r);a.a},d0b0:function(e,t,n){},d1f0:function(e,t,n){},d2c9:function(e,t,n){},d4d5:function(e,t,n){"use strict";var r=n("3d75"),a=n.n(r);a.a},d88f:function(e,t,n){},d9a5:function(e,t,n){},ddb03:function(e,t,n){"use strict";var r=n("f845"),a=n.n(r);a.a},e1a6:function(e,t,n){"use strict";var r=n("79cf"),a=n.n(r);a.a},e2e4:function(e,t,n){},e53a:function(e,t,n){"use strict";var r=n("d88f"),a=n.n(r);a.a},e8c9:function(e,t,n){"use strict";var r=n("d9a5"),a=n.n(r);a.a},f845:function(e,t,n){},f99f:function(e,t,n){"use strict";n.r(t),n.d(t,"createFeatureMap",(function(){return u})),n.d(t,"createSVGforFeature",(function(){return d})),n.d(t,"drawTrack",(function(){return p})),n.d(t,"drawFeatures",(function(){return h})),n.d(t,"createMouseOverCallback",(function(){return f})),n.d(t,"mouseoverFeature",(function(){return v})),n.d(t,"mouseoutFeature",(function(){return w})),n.d(t,"moveTheDiv",(function(){return g})),n.d(t,"removeCurrentAnnotationFrom3DViewer",(function(){return b}));n("cb29"),n("4160"),n("caad"),n("d3b7"),n("ac1f"),n("2532"),n("1276"),n("159b");var r,a,i=n("5698"),o=n.n(i),s=n("1157"),c=n.n(s),l=n("50f1");function u(e){document.querySelectorAll("#selectedCluster [id*='r_'] rect").forEach((function(e){e.style.fill="#a5a5a5",e.style.stroke="#a5a5a5"})),document.querySelectorAll("#selectedCluster [id*='r_'] polygon").forEach((function(e){e.style.fill="#a5a5a5",e.style.stroke="#a5a5a5"})),this.width=document.getElementById("structureviewer").offsetWidth/1.2-window.AQUARIA.margin.right-window.AQUARIA.margin.left,this.height=40-window.AQUARIA.margin.top-window.AQUARIA.margin.bottom+35,this.datum=e;var t=o.a.select("#selectedFeature").append("div").attr("id","outerFeatureMap");this.drawTrack(this.datum,this.createSVGforFeature(t,"100vw",this.height+30),this.width),o.a.select("#outerFeatureMap > svg").attr("class","loadedFeature")}function d(e,t,n,r){return this.nusvg=e.append("svg").attr("width",t).attr("height",n).attr("viewBox","0 0 "+r+" "+n).attr("preserveAspectRatio","none"),this.nusvg}function p(e,t){var n=this,r=e.Tracks;this.nusvg=t;var a=window.AQUARIA;for(var i in this.nusvg.on("click",(function(){if(o.a.select(this).attr("class").includes("loaded"))o.a.select("svg.loaded").classed("loaded",!1),a.panel3d.blankApplet(!0,"Removing feature..."),a.panel3d.blankApplet(!1),"function"===typeof a.onFeatureChange&&a.onFeatureChange(null,0),n.removeCurrentAnnotationFrom3DViewer(),document.querySelector("#outerFeatureMap").remove(),a.showMatchingStructures.showMap(a.showMatchingStructures.cluster),l["hidePanels"]();else{document.querySelector(".featureHeader.actived").click(),document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove();var t=o.a.select(this).attr("id").split("_")[2];a.panel3d.blankApplet(!0,"Loading feature..."),a.panel3d.blankApplet(!1),"Added Features"!==e.Server&&(a.addedFeature=!1),a.passFeature(e,t,this),"function"===typeof a.onFeatureChange&&a.onFeatureChange(e,t),o.a.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),o.a.select("svg.loaded").classed("loaded",!1),o.a.select(this).attr("class","loaded"),n.createFeatureMap(e),l["hidePanels"]()}})),this.nusvg.append("rect").attr("width",this.width+a.margin.left).attr("height",25).attr("class","bg").attr("fill","none"),r)this.nusg=this.nusvg.append("g").attr("transform","translate("+a.margin.left+",0)"),this.nusg.append("rect").attr("width",this.width).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion");for(var s in r[i])this.drawFeatures(s,i,r);o.a.selectAll("#selectedFeature rect.feature").attr("fill",(function(){return o.a.select(this).attr("color")}))}function h(e,t,n){this.nusg.append("rect").attr("width",(function(){return(n[t][e].size+1)*window.AQUARIA.srw>2?(n[t][e].size+1)*window.AQUARIA.srw:2})).attr("height",14).attr("id","r_"+t+"_"+e).attr("transform","translate("+n[t][e].start*(window.AQUARIA.srw-.0085)+",6)").attr("color",n[t][e].color).attr("fill","#a4abdf").attr("class","feature").on("mouseover",f(n[t][e])).on("mouseout",(function(){var e=o.a.select(this).attr("id");return o.a.select(this).call(w,e)}))}function f(e){return function(){var t=o.a.select(this).attr("id");o.a.select(this).call(v,e,t)}}function m(e,t){var n="";if(e.urls.length>0){n="<p>";for(var r=0;r<e.urls.length;r++)n+="<a href='"+e.urls[r].href+"' target='_blank'>"+e.urls[r].text+"</a><br>";n+="</p>"}c()("div.popup").remove();var i="<div class='balloon' id='balloon'><span class='x'>&nbsp;</span><p>"+e.label+" (";i=e.start===e.end?i+"Residue "+e.start:i+"Residues "+e.start+"-"+e.end,i=i+")<br/>"+e.desc+"</p>"+n+"</div>",o.a.select("body").append("div").attr("class","popup").html(i);var s=c()("div.popup").innerHeight(),l=c()("#"+t).offset(),u=c()("#"+t).attr("width"),d=parseInt(l.left+u/2-160),p=parseInt(l.top-s);c()("div.popup").css({left:d+"px",top:p+"px",width:"470px"}).fadeIn(600),c()("span.x").on("click",(function(){c()("div.popup").fadeOut()})),c()("div.popup").on("hover",(function(){clearTimeout(a)}),(function(){a=setTimeout((function(){c()("div.popup").fadeOut()}),500)}))}function v(e,t,n){r=setTimeout((function(){m(t,n)}),500),o.a.select("#"+n).attr("stroke-width","2px").attr("stroke","white")}function w(e,t){clearTimeout(r),o.a.select("#"+t).attr("stroke-width","0px"),a=setTimeout((function(){g().then((function(){c()("div.popup").fadeOut()})).catch((function(e){console.log(e)}))}),500)}function g(){return new Promise((function(e,t){var n=document.getElementById("superFamCharts_0_go");document.getElementById("superFamCharts").append(n)}))}function b(){var e=window.AQUARIA.currentAnnotationsIn3DViewer;if(void 0!==e){for(var t in e)window.AQUARIA.panel3d.removeAnnotation(e[t].id,e[t].annotationName);e.length=0}}}}]);
//# sourceMappingURL=wrapper.ba5f1e3a.js.map