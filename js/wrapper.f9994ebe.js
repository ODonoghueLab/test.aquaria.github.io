(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wrapper"],{"05b9":function(t,e,a){"use strict";a("5f75")},"0b4c":function(t,e,a){"use strict";a("e1df")},"0d58":function(t,e,a){"use strict";a("4d40")},"113a":function(t,e,a){"use strict";a("61c9")},1237:function(t,e,a){},1380:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"matrix"}},[a("MatrixHeader"),a("LoadingPage"),a("div",{attrs:{id:"container"}})],1)},r=[],s=a("2909"),i=a("1da1"),o=(a("96cf"),a("99af"),a("d81d"),a("b0c0"),a("a434"),a("a4d3"),a("e01a"),a("e9c4"),a("fb6a"),a("d3b7"),a("ac1f"),a("5319"),a("466d"),a("4de4"),a("4e82"),a("159b"),a("1276"),a("b64b"),a("3ca3"),a("ddb0"),a("bc3a")),l=a.n(o),c=a("9cc6"),u=a("2fdb"),d=a("4360"),p={name:"Matrix",components:{MatrixHeader:c["a"],LoadingPage:u["a"]},data:function(){return{hostname:d["default"].state.url,publicPath:"/",structures:null,totalStructures:0,d3:a("5698"),green:"#7A9D5B",backgroundColour:"#ffffff",x:0,y:15,organismId:"2697049"}},mounted:function(){var t,e=this,a="".concat(window.BACKEND,"/").concat(this.organismId);l()({method:"get",url:a}).then((function(a){t=JSON.parse(a.data.primary_accessions),e.getStructures(e.organismId,t).then((function(t){console.log(t),e.getMatchingStructures(t).then((function(t){e.getProteinSynonyms(t).then((function(t){e.loadShapes(t).then((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}))}))}))})),e.structures=t})),window.addEventListener("resize",this.initialDisplay)},methods:{getResidueSize:function(t,e){return e*t},loadShapes:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,i,o,l,c,u,d,p,h,m,f,g,v,y,w,b,A,_;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(t=e.partitionToThree(t),n=0,r=960/Math.max.apply(Math,Object(s["a"])(t.map((function(t){return e.getListSum(t)})))),i=0;i<t.length;i++){for(o=e.d3.select("#container").append("svg").attr("class","row").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 960 360"),e.x=0,e.y=15,l=0,0!==i&&(c=t[i-1],u=c[c.length-1],d=t[i][0],p=Math.floor(d.length/500+1),h=!1,p>3&&(h=!0),m={id:"placeholder",dark:!0,placeholderLarge:h,primary_accession:u.primary_accession,name:u.name,synonym:u.synonym,placeholder:!0},e.drawArrow(o,m,150,20,20/1.5,l,r),e.drawRuler(o,m,n,150,20/1.5,l),l=l+150+20/1.5),f=0;f<t[i].length;f++)g=!1,v=20,y=v/1.5,w=e.getResidueSize(r,t[i][f].length)-y,w<0&&(y=e.getResidueSize(r,t[i][f].length),w=0),e.drawArrow(o,t[i][f],w,v,y,l,r),e.drawRuler(o,t[i][f],n,w,y,l),n=t[i][f].continuous?t[i][f].length:0,e.addNonDarkToFragments(t[i][f]),0!==t[i][f].fragments.length&&(e.y=e.y+33,g=!0),e.drawFragments(o,t[i][f].fragments,r,l),e.drawMatchingStructures(o,t[i][f],w,v,y,l,r),l=l+w+y,g&&(e.y=e.y-33);0!==i&&i!==t.length-1&&(b=t[i+1],A=b[0],_=t[i-1],p=Math.floor(_[_.length-1].length/500+1),h=!1,p>3&&(h=!0),m={id:"placeholder",dark:!0,placeholderLarge:h,primary_accession:A.primary_accession,name:A.name,synonym:A.synonym,placeholder:!0},e.drawArrow(o,m,e.getResidueSize(r,b[0].length)-20/1.5,20,20/1.5,l,r),e.drawRuler(o,m,n,e.getResidueSize(r,b[0].length)-20/1.5,20/1.5,l)),e.drawExpandButton(o)}e.initialDisplay(!1);case 5:case"end":return a.stop()}}),a)})))()},fillData:function(t){var e=[{offset:"0%",color:"black"}];if(t.nonDark){console.log(t.nonDark);for(var a=0;a<t.nonDark.length;a++){var n=t.nonDark[a];e.push({offset:n.Start/t.length*100+"%",color:"black"}),e.push({offset:n.Start/t.length*100+"%",color:this.green}),e.push({offset:n.Stop/t.length*100+"%",color:this.green}),e.push({offset:n.Stop/t.length*100+"%",color:"black"})}}return t.placeholder&&(e=[{offset:"0%",color:"#CCCCCC"}]),e},getNonDarkBetween:function(t,e,a){var n=[];if(t.nonDark)for(var r=0;r<t.nonDark.length;r++)t.nonDark[r].Start<=e&&t.nonDark[r].Stop>=e?n.push({Start:0,Stop:t.nonDark[r].Stop-e}):t.nonDark[r].Start>=e&&t.nonDark[r].Stop<=a?n.push({Start:t.nonDark[r].Start-e,Stop:t.nonDark[r].Stop-e}):t.nonDark[r].Start<=a&&t.nonDark[r].Stop>=a&&n.push({Start:t.nonDark[r].Start-e,Stop:a-e});return n},splitToChunks:function(t,e){for(var a=[],n=e;n>0;n--)a.push(t.splice(0,Math.ceil(t.length/n)));return a},addNonDarkToFragments:function(t){if(t.fragments)for(var e=0;e<t.fragments.length;e++){var a=t.fragments[e];t.fragments[e].nonDark=this.getNonDarkBetween(t,a.Start,a.Stop)}},drawArrow:function(t,e,n,r,s,i,o){var l=this.fillData(e),c=e.id?e.id:e.primary_accession;console.log(c);var u,d=e.description?e.description:e.name;if(l.length>14&&n>300)for(var p=0,h=JSON.parse(JSON.stringify(e.nonDark)),m=Math.floor(l.length/10)>4?Math.floor(l.length/10):4,f=this.splitToChunks(h,m),g=0,v=0;v<f.length;v++){var y=f[v].slice(-1)[0].Stop-g;v===f.length-1&&(y=e.length-g);for(var w=this.getResidueSize(o,y),b=0;b<f[v].length;b++)f[v][b].Start=f[v][b].Start-g,f[v][b].Stop=f[v][b].Stop-g;var A=this.fillData({length:y,nonDark:f[v]});if(t.append("linearGradient").attr("id","grad_partial_"+c+"_"+v).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(A).enter().append("stop").attr("offset",(function(t){return t.offset})).attr("stop-color",(function(t){return t.color})).attr("stop-opacity",1),v===f.length-1){var _=w-s,S=void 0;S=_>0?[this.x,this.y,this.x,this.y+r,this.x+_,this.y+r,this.x+_,this.y+.5*r+s,this.x+_+s,this.y+.5*r,this.x+_,this.y+.5*r-s,this.x+_,this.y]:[this.x,this.y+.5*r-s,this.x,this.y+.5*r+s,this.x+s,this.y+.5*r],t.append("svg:polygon").attr("points",S).attr("fill","url(#grad_partial_"+c+"_"+v+")").attr("id",c).attr("title",c).attr("transform","translate("+(i+p)+",0)").attr("class","arrow").on("mouseover",(function(t,e){var n=a("5698");n.select(this).attr("opacity",".85"),n.selectAll("rect#"+this.id).attr("opacity",".85"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this).attr("opacity","1"),n.selectAll("rect#"+this.id).attr("opacity","1")})).on("click",(function(){var t=a("5698"),e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).append("svg:title").text(d)}else t.append("svg:rect").attr("fill","url(#grad_partial_"+c+"_"+v+")").attr("x",this.x).attr("y",this.y).attr("width",w).attr("height",r).attr("id",c).attr("class","arrow").attr("title",c).attr("transform","translate("+(i+p)+",0)").on("mouseover",(function(t,e){var n=a("5698");n.select(this).attr("opacity",".85"),n.selectAll("rect#"+this.id).attr("opacity",".85"),n.selectAll("polygon#"+this.id).attr("opacity",".85"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this).attr("opacity","1"),n.selectAll("rect#"+this.id).attr("opacity","1"),n.selectAll("polygon#"+this.id).attr("opacity","1")})).on("click",(function(){var t=a("5698"),e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).append("svg:title").text(d);g+=y,p+=w}else t.append("linearGradient").attr("id","grad_"+c).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(l).enter().append("stop").attr("offset",(function(t){return t.offset})).attr("stop-color",(function(t){return t.color})).attr("stop-opacity",1),u=n>0?[this.x,this.y,this.x,this.y+r,this.x+n,this.y+r,this.x+n,this.y+.5*r+s,this.x+n+s,this.y+.5*r,this.x+n,this.y+.5*r-s,this.x+n,this.y]:[this.x,this.y+.5*r-s,this.x,this.y+.5*r+s,this.x+s,this.y+.5*r],t.append("svg:polygon").attr("points",u).attr("fill","url(#grad_"+c+")").attr("id",c).attr("title",c).attr("class","arrow").attr("transform","translate("+i+",0)").on("mouseover",(function(t,e){var n=a("5698");this.style.cursor="pointer",n.select(this).attr("opacity",".85")})).on("mouseout",(function(t,e){var n=a("5698");n.select(this).attr("opacity","1")})).on("click",(function(){var t=a("5698"),e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).append("svg:title").text(d);var x=t.append("text").attr("x",this.x+.5*(n+.5*s)).attr("y",this.y+.5*r).attr("transform","translate("+i+",0)").attr("dy",".35em").style("text-anchor","middle").attr("class","arrow").style("fill","white").text(e.name);if(x.node().getComputedTextLength()>n&&(x.text(e.synonym[0]),x.node().getComputedTextLength()>n)){var I=e.synonym.reduce((function(t,e){return t.length<=e.length?t:e}));I=I.replace("orf","").replace("ORF",""),x.text(I),x.node().getComputedTextLength()>n+.5*s&&(x.attr("y",this.y+1.5*r),x.style("fill",this.green),x.attr("class","rowContent"))}},drawRuler:function(t,e,a,n,r,s){var i=[1,n+r-1];a&&(i=[0,n+r]);var o=this.d3.scale.linear().domain([a,a+e.length]).range(i),l=Math.floor(e.length/500+1);if(l>3||e.placeholderLarge){e.placeholderLarge&&(l=0);var c=t.append("g").attr("transform","translate("+s+","+(this.y-15)+")").attr("style","").style("fill","gray").style("font-size","10px").attr("class","rowContent").call(this.d3.svg.axis().scale(o).tickSize(0,1).tickFormat((function(t,e){return 0===t||t%1e3!==0?" ":t})).orient("bottom").ticks(l));e.placeholder&&c.style("fill","#CCCCCC"),c.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("x2",this.x).attr("y2",0).attr("y1",3).attr("stroke-width","1")}else if(e.length>200||e.placeholder){l=2,e.placeholder&&(l=0);var u=t.append("g").attr("transform","translate("+s+","+(this.y-10)+")").style("fill","gray").attr("class","rowContent").call(this.d3.svg.axis().scale(this.d3.scale.linear().domain([0,1]).range([1,n+r-1])).tickSize(2,1).orient("top").ticks(l).tickFormat(""));u.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("y1",4).attr("y2",-1).attr("stroke-width","1"),e.placeholder&&u.style("fill","#CCCCCC");var d=t.append("text").attr("x",this.x+.5*(n+r)).attr("y",this.y-10).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+s+",0)").style("fill","gray").style("font-size","10px").attr("class","rowContent").text(e.length);t.append("rect","text").datum((function(){return d.node().getBBox()})).attr("x",(function(t){return t.x-2})).attr("y",(function(t){return t.y})).style("fill",this.backgroundColour).attr("transform","translate("+s+",0)").attr("class","rowContent").attr("width",(function(t){return t.width+4})).attr("height",(function(t){return t.height})),d.node().parentNode.appendChild(d.node())}},drawFragments:function(t,e,a,n){for(var r=0;r<e.length;r++){console.log(e);var s={name:e[r].Name,primary_accession:e[r].Primary_Accession,synonym:[e[r].Short_Name].concat(e[r].Short_Name.match(/[0-9]+/g)),Start:e[r].Start,Stop:e[r].Stop,pdb:null,length:e[r].Stop-e[r].Start,id:e[r].Primary_Accession+"_"+e[r].Short_Name,nonDark:e[r].nonDark,description:e[r].Description},i=e[r].Stop-e[r].Start,o=20,l=o/1.5,c=this.getResidueSize(a,i)-l;c<0&&(l=this.getResidueSize(a,i),c=0),(0===r||e[r].Start>=e[r-1].Stop)&&(this.drawArrow(t,s,c,o,l,n,a),n=n+c+l)}},renderImage:function(t,e,n,r,s,i,o){var l=(n<120?n:120)+10,c=e.Start?e.Start:0;if(o){t.append("rect","text").attr("x",.5*n+c).attr("y",this.y+r).style("fill",this.backgroundColour).attr("transform","translate("+(s-l/2)+","+(20+i)+")").attr("width",l).attr("height",200).attr("title",o).on("mouseover",(function(t,e){var n=a("5698");n.select(this).transition().duration(500).style("fill","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this).transition().duration(500).style("fill","white")})).on("click",(function(){var t=a("5698"),e=t.select(this).attr("title");if(e){var n=window.location.origin;window.open(n+"/"+t.select(this).attr("title"))}}));var u=t.append("svg:image").attr("x",.5*n+c).attr("y",this.y+r).attr("transform","translate("+(s-l/2)+","+(20+i)+")").attr("width",l).attr("height",l).style("pointer-events","none");!e.dark&&e.pdb?u.attr("xlink:href","../images/pdb/"+e.pdb+".png"):(u.attr("xlink:href","../images/covid19/unknown-structure_1000.png"),u.style("visibility","hidden"))}},splitLargeGaps:function(t){for(var e=0;e<t.length;e++){var a=t[e];if(a.seq_start.length>1)for(var n=0;n<a.seq_start.length-1;n++)if(a.seq_start[n+1]-a.seq_end[n]>100){var r=JSON.parse(JSON.stringify(a));r.seq_start=a.seq_start.slice(0,n+1),r.seq_end=a.seq_end.slice(0,n+1),t[e].seq_start=a.seq_start.slice(n+1),t[e].seq_end=a.seq_end.slice(n+1),t.push(r);break}}return t},drawMatchingStructures:function(t,e,n,r,i,o,l){var c=this,u=30;if(e.clusters){e.clusters=this.splitLargeGaps(e.clusters),e.clusters=e.clusters.filter((function(t){return t.seq_start[0]>=0})),e.clusters.sort((function(t,e){return t.cluster_size>e.cluster_size?-1:e.cluster_size>t.cluster_size?1:0}));var d=1;while(d<e.clusters.length){var p=0,h=!1;while(p<d&&!h){var m=Math.min.apply(Math,Object(s["a"])(e.clusters[p].seq_start)),f=Math.min.apply(Math,Object(s["a"])(e.clusters[d].seq_start)),g=Math.max.apply(Math,Object(s["a"])(e.clusters[p].seq_end)),v=Math.max.apply(Math,Object(s["a"])(e.clusters[d].seq_end));m<=f&&g>=v?(e.clusters[p].cluster_size+=e.clusters[d].cluster_size,e.clusters.splice(d,1),h=!0):(m>f&&m-f<.9*(v-f)||g<v&&v-g<.9*(v-f))&&(e.clusters[p].cluster_size+=e.clusters[d].cluster_size,e.clusters[p].seq_start=[Math.min(m,f)],e.clusters[p].seq_end=[Math.max(g,v)],e.clusters.splice(d,1),h=!0),p++}h||d++}e.clusters=e.clusters.filter((function(t){return Math.max.apply(Math,Object(s["a"])(t.seq_end))-Math.min.apply(Math,Object(s["a"])(t.seq_start))>20})),e.clusters.forEach((function(n){var s=c.getResidueSize(l,n.seq_start[0]);if(!(n.seq_start<0)){var i=c.getResidueSize(l,n.seq_end[n.seq_end.length-1]);if(!(n.seq_end>e.length)){var d=c.d3.scale.linear().domain([0,2]).range([s+1,i-1]).nice(),p=t.append("g").attr("transform","translate("+o+","+(c.y+r+10)+")").attr("style","").style("fill",c.green).style("font-size","10px").call(c.d3.svg.axis().scale(d).tickSize(0,1).tickFormat("").orient("bottom").ticks(2));c.d3.select(p.selectAll(".tick")[0][1]).attr("stroke",c.green).attr("x1",c.x).attr("x2",c.x).attr("y2",0).attr("y1",u).attr("stroke-width","1");var h=t.append("text").datum((function(){return p.node().getBBox()})).attr("x",(function(t){return t.x+.5*t.width})).attr("y",c.y+r+u+5).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+o+",0)").style("fill","white").style("font-size","12px").text(n.cluster_size).attr("title",e.primary_accession+"/"+n.pdb_id).style("pointer-events","none");t.append("rect","text").datum((function(){return h.node().getBBox()})).attr("x",(function(t){return t.x-4})).attr("y",(function(t){return t.y})).attr("rx",6).attr("ry",10).style("fill",c.green).attr("transform","translate("+o+",0)").attr("width",(function(t){return t.width+8})).attr("height",(function(t){return t.height})).attr("title",e.primary_accession+"/"+n.pdb_id).on("click",(function(){var t=a("5698");console.log(t.select(this).attr("title"));var e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).on("mouseover",(function(){this.style.cursor="pointer"})),h.node().parentNode.appendChild(h.node());var m={name:n.pdb_id,primary_accession:e.primary_accession,Start:s,Stop:i,pdb:n.pdb_id,length:i-s,id:e.primary_accession+"_"+n.pdb_id,nonDark:!0};c.renderImage(t,m,i-s,r,o,u,e.primary_accession+"/"+n.pdb_id)}}}))}else this.renderImage(t,e,n,r,o,u,"")},drawExpandButton:function(t){var e=t.append("svg:rect").attr("x",0).attr("y",0).attr("stroke","#CCCCCC").attr("fill","#CCCCCC").attr("opacity",.8).attr("width",window.innerWidth).attr("height",30).attr("id","expand");window.innerHeight>window.innerWidth&&e.attr("display","none"),e.on("mouseover",(function(t,e){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),e.on("click",(function(t,e){var n=a("5698");if(this.parentNode.className.baseVal.split(" ").indexOf("open")>-1)n.select(this.parentNode).classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0);else{n.selectAll(".open").selectAll("rect#expand").attr("opacity",0),n.selectAll(".open").selectAll("rect#expand").attr("display","block"),n.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),n.selectAll(".open").selectAll("path#expand").attr("opacity",0),n.selectAll(".open").selectAll("path#expand").attr("display","block"),n.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),n.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.select(this.parentNode).classed("open",!0),n.select(this).attr("display","none"),n.select(this.parentNode).selectAll("path#expand").attr("display","none"),n.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),n.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),n.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var r=n.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)n.select(r[0][o]).classed("open")&&(s=!0),s?(n.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,n.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}})),this.renderHalfMoon(t,480,0)},renderHalfMoon:function(t,e,n){var r=this.d3.svg.arc().outerRadius(20).innerRadius(0).startAngle(-Math.PI/2).endAngle(Math.PI/2),s=t.append("path").attr("transform","scale(1, -1) translate("+e+", -"+n+")").attr("d",r()).attr("fill","gray").attr("id","expand").on("mouseover",(function(t,e){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),i=t.append("path").attr("transform","translate("+e+","+n+")").attr("d","M-8 12 0 5 8 12").attr("stroke","#CCCCCC").attr("stroke-width",3).attr("fill","transparent").attr("id","expand").on("mouseover",(function(t,e){var n=a("5698");n.select(this).attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var n=a("5698");n.select(this).attr("stroke","#CCCCCC")}));i.on("click",(function(t,e){var n=a("5698");n.selectAll(".open").selectAll("rect#expand").attr("opacity",0),n.selectAll(".open").selectAll("rect#expand").attr("display","block"),n.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),n.selectAll(".open").selectAll("path#expand").attr("opacity",0),n.selectAll(".open").selectAll("path#expand").attr("display","block"),n.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.select(this.parentNode).classed("open",!0),n.select(this.parentNode).selectAll("rect#expand").attr("display","none"),n.select(this.parentNode).selectAll("path#expand").attr("display","none"),n.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),n.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),n.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var r=n.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)n.select(r[0][o]).classed("open")&&(s=!0),s?(n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,n.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")})),s.on("click",(function(t,e){var n=a("5698");n.selectAll(".open").selectAll("rect#expand").attr("opacity",0),n.selectAll(".open").selectAll("rect#expand").attr("display","block"),n.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),n.selectAll(".open").selectAll("path#expand").attr("opacity",0),n.selectAll(".open").selectAll("path#expand").attr("display","block"),n.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),n.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.select(this.parentNode).classed("open",!0),n.select(this.parentNode).selectAll("rect#expand").attr("display","none"),n.select(this.parentNode).selectAll("path#expand").attr("display","none"),n.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),n.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),n.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=n.transform(n.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var r=n.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)n.select(r[0][o]).classed("open")&&(s=!0),s?(n.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,n.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}))},initialDisplay:function(t){if(window.innerHeight>window.innerWidth)this.d3.selectAll("rect#expand").attr("display","none"),this.d3.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".row").classed("open",!0),this.d3.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));else if(window.innerHeight<.25*window.innerWidth)this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"}));else{var e=this.d3.select(".open");if(this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),t){e.classed("open",!0),e.select("rect#expand").attr("display","none"),e.selectAll("path#expand").attr("display","none"),e.transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),e.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var n=this.d3.selectAll(".row"),r=!1,s=!0,i=0;i<n[0].length;i++)this.d3.select(n[0][i]).classed("open")&&(r=!0),r?(this.d3.select(n[0][i]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),this.d3.select(n[0][i]).select("path#expand:last-child").attr("transform","translate(480,0)")):(s=!1,this.d3.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),this.d3.select(n[0][i]).select("path#expand").attr("transform","translate(480,30)"),this.d3.select(n[0][i]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));s&&this.d3.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}else e=this.d3.select(".row").classed("open",!0),this.d3.select("rect#expand").attr("display","none"),e.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".open").transition().duration(500).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),e.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}))}},partitionToThree:function(t){var e=this.getListSum(t),a=e/3;t.push({name:"newPlaceholderNum",length:a});var n=this.partitionToTwo(t);n[1].pop();var r=this.partitionToTwo(n[0]);return[r[0],r[1],n[1]]},partitionToTwo:function(t){var e=this.getListSum(t),a=t.length-1;while(this.getListSum(t.slice(a))<e/2){if(this.getListSum(t.slice(a-1))>=e/2)break;a--}return[t.slice(0,a),t.slice(a)]},getListSum:function(t){return t.reduce((function(t,e){return t+e.length}),0)},sortStructures:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.getPositions(t);case 2:for(r=n.sent,s=0;s<e.length;s++)e[s].position=r[e[s].primary_accession];return e.sort((function(t,e){return t.position-e.position})),n.abrupt("return",e);case 6:case"end":return n.stop()}}),n)})))()},cleanProteins:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o,l,c,u,d,p,h,m,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(n={},t.forEach((function(t){var e=n[t.position];e||(e=n[t.position]=[]),e.push(t)})),r=[],s=1;s<=Object.keys(n).length;s++)1!==n[s].length?function(){var t=void 0;n[s].forEach((function(e){t?e.length>t.length&&(t=e):t=e})),i=t;for(var a=0;a<n[s].length;a++)if(n[s][a].sequence!==t.sequence){for(o=e.findSubstring(n[s][a].sequence,t.sequence),i.sequence=i.sequence.replace(o,""),i.length=i.sequence.length,i.name=i.name+" (split)",n[s][a].continuous=!0,r.push(n[s][a]),i.fragments.length>0&&n[s][a].fragments.forEach((function(t){i.fragments=i.fragments.filter((function(e){return e.Name!==t.Name}))})),l=0;l<i.fragments.length;l++)i.fragments[l].Start=i.fragments[l].Start-n[s][a].length,i.fragments[l].Stop=i.fragments[l].Stop-n[s][a].length,i.fragments[l].Start<0&&(i.fragments[l].Start=0);for(i.fragments=i.fragments.filter((function(t){return t.Start>=0})),c=[],u=0;u<i.nonDark.length;u++)i.nonDark[u].Stop>n[s][a].length&&(d=i.nonDark[u].Start-n[s][a].length,d<0&&(d=0),p=i.nonDark[u].Stop-n[s][a].length,c.push({Primary_Accession:i.primary_accession,Start:d,Stop:p}));if(i.clusters)for(h=0;h<i.clusters.length;h++){for(m=0;m<i.clusters[h].seq_start.length;m++)i.clusters[h].seq_start[m]=i.clusters[h].seq_start[m]-n[s][a].length;for(f=0;f<i.clusters[h].seq_end.length;f++)i.clusters[h].seq_end[f]=i.clusters[h].seq_end[f]-n[s][a].length}i.nonDark=c}i.continuous=!1,r.push(i)}():(n[s][0].continuous=!1,r.push(n[s][0]));return a.abrupt("return",r);case 5:case"end":return a.stop()}}),a)})))()},findSubstring:function(t,e){var a=t.length,n=0;while(n<a&&t.charAt(n)===e.charAt(n))n++;return t.substring(0,n)},getPositions:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getGenomicPosition/").concat(t),n={},e.next=4,l()({method:"get",url:a}).then((function(t){for(var e=0;e<t.data.length;e++)n[t.data[e].primary_accession]=t.data[e].position_index}));case 4:return 0===Object.keys(n).length&&console.log("cannot get genomic positions of "+t+" in getPositions() Coverage.vue"),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))()},getProteinSynonyms:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=0;case 1:if(!(n<t.length)){a.next=9;break}return a.next=4,e.getSynonym(t[n].primary_accession);case 4:r=a.sent,t[n].synonym=r;case 6:n++,a.next=1;break;case 9:return a.abrupt("return",t);case 10:case"end":return a.stop()}}),a)})))()},getSynonym:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getProteinSynonyms/").concat(t),n=[],e.next=4,l()({method:"get",url:a}).then((function(t){t.data.Synonym&&n.push(t.data.Synonym),n=n.concat(t.data.synonyms)}));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},getMatchingStructures:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=0;case 1:if(!(n<t.length)){a.next=10;break}return r={selector:[t[n].primary_accession]},console.log(r),s="".concat(window.BACKEND,"/get_matching_structures"),a.next=7,l()({method:"get",url:s,params:r}).then((function(e){console.log(e),"'Dark' protein"===e.data?(t[n].clusters=0,t[n].pdb=null):(t[n].clusters=e.data.clusters,t[n].pdb=e.data.Best_PDB.pdb_id)}));case 7:n++,a.next=1;break;case 10:return a.abrupt("return",e.cleanProteins(t));case 11:case"end":return a.stop()}}),a)})))()},countMatchingStructures:function(t){return 0===t?0:t.reduce((function(t,e){return t+e.members.length}),0)},getNonDarkRegions:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=0;case 1:if(!(n<t.length)){a.next=10;break}return console.log(t[n].primary_accession),a.next=5,e.getNonDarkCoverage(t[n].primary_accession);case 5:r=a.sent,t[n].nonDark=r;case 7:n++,a.next=1;break;case 10:return a.abrupt("return",t);case 11:case"end":return a.stop()}}),a)})))()},getNonDark:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getNonDarkRegions/").concat(t),n=[],e.next=4,l()({method:"get",url:a}).then((function(t){t.data&&(n=t.data)}));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},getNonDarkCoverage:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={selector:[t]},n="".concat(window.BACKEND,"/getCoverageMap"),r={},s=[],e.next=6,l()({method:"get",url:n,params:a}).then((function(t){if("'Dark' protein"!==t.data){r=t.data,console.log("nondarK: ",r);for(var e=0;e<r.seq_start.length;e++)s.push({Start:r.seq_start[e],Stop:r.seq_end[e]})}}));case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))()},getStructures:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,s,i,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[],n.next=3,a.sortStructures(t,e);case 3:e=n.sent,i=regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e[n].count=0,c={selector:[e[n].primary_accession]},s="".concat(window.BACKEND,"/get_3D_alignment"),t.next=5,l()({method:"get",url:s,params:c}).then((function(t){var s="";if(t.data.sequences){s=t.data.sequences[0];var i=s.length;console.log("Loaded ",e[n].synonym,i),r.push({name:e[n].synonym,primary_accession:e[n].primary_accession,sequence:s.sequence,position:e[n].position,length:i})}else s=t.data[e[n].primary_accession],r.push({name:e[n].synonym,primary_accession:e[n].primary_accession,sequence:s.sequence,position:e[n].position,length:s.length});return a.getFragments(e[n].primary_accession)})).then((function(t){r[n].fragments=t}));case 5:case"end":return t.stop()}}),t)})),o=0;case 6:if(!(o<e.length)){n.next=11;break}return n.delegateYield(i(o),"t0",8);case 8:o++,n.next=6;break;case 11:return n.next=13,a.getNonDarkRegions(r);case 13:return r=n.sent,n.abrupt("return",r);case 15:case"end":return n.stop()}}),n)})))()},getFragments:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getProteinFragments/").concat(t),n=[],e.next=4,l()({method:"get",url:a}).then((function(t){t.data.length>0&&(n=t.data)}));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()}}},h=p,m=(a("0d58"),a("2877")),f=Object(m["a"])(h,n,r,!1,null,"69cdfee8",null);e["default"]=f.exports},"20d9":function(t,e,a){t.exports=a.p+"img/search_dark.012aee91.png"},"22b1":function(t,e,a){a("d3b7"),a("159b"),a("e9c4"),a("b0c0");var n=a("1f25"),r=a("4b90"),s=function(t,e){var a=this;this.id=t,r.getUrlParameter("clearCache")&&localStorage.removeItem(this.id);var s=localStorage.getItem(this.id);if(this.cache=new n(e),null===s);else{var i=JSON.parse(s);i.forEach((function(t){a.cache.set(t.key,t.value)}))}};s.prototype.submitFired=function(t,e,a){var n={name:t,primary_accession:e,pdb_id:a};this.cache.set(e+a,n),this.save()},s.prototype.save=function(){var t=[];this.cache.forEach((function(e,a){t.push({key:a,value:e})}));var e=JSON.stringify(t);console.log("TopTen.save",t),localStorage.setItem(this.id,e)},s.prototype.getAll=function(){var t=[];return this.cache.forEach((function(e){t.push(e)})),t},s.prototype.savePDB=function(t,e){var a={};a.primary_acccession=t,a.pdb=e,this.cache.push(a)},s.prototype.previousLookup=function(t){var e=!1;return this.cache.forEach((function(a){a.primary_accession==t&&(e=a.pdb_id)})),e},s.prototype.previousLookupByName=function(t){var e=!1;return this.cache.forEach((function(a){a.name==t&&(e=a.pdb_id)})),e},s.prototype.updatePDB=function(t,e){this.cache.forEach((function(a){a.primary_accession==t&&(a.pdb_id=e)})),this.save()},t.exports=s},"23c5":function(t,e,a){},"2b1d":function(t,e,a){},"2bb0":function(t,e,a){var n;a("d81d"),a("b64b"),a("ac1f"),a("1276");var r,s=a("2ef0"),i=a("1157"),o=a("4360"),l=function t(e,a){var l=document.getElementById("waitingFrame");if("undefined"!=l&&null!=l&&"none"!=document.getElementById("waitingFrame").style.display)setTimeout((function(){t(e,a)}),50),console.log("REPEATING");else{n=e||n,r=a||r,featureCount=0,groupCount=0;var c=[];if(AQUARIA.currentFeature={},AQUARIA.groupedFeatures=s.groupBy(n,(function(t){return t.Server})),AQUARIA.groupedFeatures=Object.keys(AQUARIA.groupedFeatures).map((function(t){return[String(t),AQUARIA.groupedFeatures[t]]})),null===o.default.getters.getfeatureSets&&o.default.commit("setfeatureSets",AQUARIA.groupedFeatures),window.localStorage.getItem("featureOrder")&&window.localStorage.getItem("featureOrder").split(",").length>=AQUARIA.groupedFeatures.length){var u=window.localStorage.getItem("featureOrder").split(",");for(var d in u)for(var p=0;p<AQUARIA.groupedFeatures.length;p++)AQUARIA.groupedFeatures[p][0]==u[d]&&(c[d]=AQUARIA.groupedFeatures[p]);AQUARIA.groupedFeatures=c}i("#groupedFeatures").sortable({axis:"y"}),i(".featureTrack").sortable({axis:"y"}).css({cursor:"move"}),i("#groupedFeatures").disableSelection()}};t.exports.updateFeatureUI=l},"2c07":function(t,e,a){t.exports=a.p+"img/aquaria-symbol-01.057e39d9.svg"},"31c8":function(t,e,a){t.exports=a.p+"img/up.64c3e14c.png"},"39b5":function(t,e,a){t.exports=a.p+"img/MS-01.f169151b.svg"},"3cb4":function(t,e,a){"use strict";a("23c5")},4069:function(t,e,a){"use strict";a("1237")},"41b6":function(t,e,a){"use strict";a("4f7f")},4481:function(t,e,a){},"4ace":function(t,e,a){},"4c7a":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAQCAYAAADqDXTRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNq8020KgCAMBmAb0TGDQLyY0Ek6SbcoEHKg0YfWttLBK+iczy8bY8yilOpUvVrBL9rHVQLR0Yhan6EC7IJjIRyUhncQN3BolIJP4BUtAd/AFPonnARzaIT7D7AL8zbVhIfBUQhHcMxdgJcHuPArSEE5MAmkohSYDHLQJ5gFctEUzAYl6BFeJSBWK/yHCE0+s2R4E2AAhOs7b2YKWEMAAAAASUVORK5CYII="},"4d26":function(t,e,a){"use strict";a("9363")},"4d40":function(t,e,a){},"4f7f":function(t,e,a){},"5f75":function(t,e,a){},"61c9":function(t,e,a){},"62bc":function(t,e,a){t.exports=a.p+"img/down.7ae68b7a.png"},"6eaa":function(t,e,a){},"715b":function(t,e,a){"use strict";a("ea62")},"734d":function(t,e,a){},7829:function(t,e,a){},"7bd5":function(t,e,a){"use strict";a("e26a")},"7f5f":function(t,e,a){"use strict";a("2b1d")},8673:function(t,e,a){t.exports=a.p+"img/aquaria-loader3.223aec7b.svg"},"88de":function(t,e,a){"use strict";a("a309")},"8a17":function(t,e,a){"use strict";a("e5d1")},"8c8c":function(t,e,a){"use strict";a("6eaa")},"8f69":function(t,e,a){},"8f89":function(t,e,a){"use strict";a("7829")},9363:function(t,e,a){},9426:function(t,e,a){},"9b83":function(t,e,a){"use strict";a("c48f")},"9db5":function(t,e,a){t.exports=a.p+"img/FT-01.e4a6c439.svg"},a01c:function(t,e,a){"use strict";a("734d")},a309:function(t,e,a){},a6f5:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGoWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0xMS0wN1QxODo0Njo0OC0wNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjEzNGEyNTEtODFjYy00ZDNjLWJhMmQtY2VhMmM1MGY2YmQxIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZTFkNTMwYWUtYzY2MS0wMjRlLTk1ZTItNTU4ODI4OWU1NTkxIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YjhlNjQyOWMtMjlkZS00NTc2LWEzN2MtMjM4NDJiNGUyZjA5IiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjEiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI3MDAiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI3MDAiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOGU2NDI5Yy0yOWRlLTQ1NzYtYTM3Yy0yMzg0MmI0ZTJmMDkiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDI6NTQtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMTM0YTI1MS04MWNjLTRkM2MtYmEyZC1jZWEyYzUwZjZiZDEiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtMh4BEAAAZoSURBVHja7Z17TNVlGMdPK4FlV3FqIDSJbF0sMqrF2rqRf5i1yrTsvsx1W6Os7LbZ1cxpq2hWFq78x8op5FKbRZOwaFZqm80tS6g0BwYiyOXAOfD2fT0v2xlwgvO87znv8x7eZ/uMjXH5Pb/P77383tsJCCECHj5wuIhjwDgwBRSD2eA+MBfMAdNAATgNHOeFJIYMUAjuB6VgHagBf4B/QRtoB02gFmwD68F74GFwGTjZC9FjEngElIMGoR8tYAN4RpUuL2SY3AI2icRHlSpxXkgM7gXbRfLjd1AC0ryQCLPAbmE/9qv2ZsQKOVPV6dxCdhYuGmlC7gJB3TvX29t79Gs4HBahUOgo8nvRaMSCkSJkeSIe62gBhoTI+Bykp6oQ+R7wk3AvZKN/dqoJOQXsEe7GEa5SKL+UqZ4y10OOBpzlupATwZ8idaIZ5LkspCbBN+gv8D34CmxEI14px7Hwtd5Qoz5YHHBVyLIE3IxfwTtgBshXI78D/jdEpIPzwG09PT2rwD7Dcja6JmSGYRFrwTXUi4aMUZAyG1QbFPOYK0JGGxRRDS40dfGQEYCU6aDOkJiJLgj5zJCMpxOVBGSkQcr7BqTs4C6k0ICIfeDiZCQDKTMNSLmTs5CfNZOTXeQxyUwIQqZqSmniKqTAwIxelo2kUFKu1JRyN0chWzQS6gGTbT5pEHKDhpS93IScq1k6buTQhURJeU0jhyJOQpZqJPI1pzdflJJ/iHms4yTkbw0hE5gJKdaouk7iIESnMS/jOKQNITuJ+dzBQcgCDSHZTIVMI+azgoOQco3pUbZTo5BSS8hpNwchtUQhszgLAYuI3fdTbQrJIsqQreY45iWkmJjb5TaFXEq86F+Ylw7J8aCDkNtcm0JuIgpZ7YAQyS5Cbs/ZFPIQUchiR4RQVla+blPI80QhJS4IQTtSRsjtXZtCFhGFuLIN4C1CbittCnmFKGSeI0JKuY8+9P/GU0Qh8x0R8hEht1KbQu4hCnnTESGVhNxetinkWqKQCkeE7CXk9oRNIecThexxQMZY0E3I7VabQuTa3U6ilDzBu8t7MzGvc2wPLm4jXjj3/XwfEhdqHGtbSBlRSA3zEnKIkFMVh+H32zUmqAqZyniAmM9LHISM0RBSzVRIIzGfS7gscvhOQ8pUZjIeJC5yaOS06mTegBmo4Sf1GyMZJ4Au4oP1AichGf0nc+J8ypYwEVKpUdIzOQmRvKpRSoSa7LK5avFFjfVY1hZsDLX1WWhKudqSjEc1F1tfwFFIQFU9A4TEmez0JMt4XFPGJpsle6gfGAVCmqUkaW/xkPGGgQ07kzgLidnjIiT+iUjQ5h1cyxTI+EHoh/XOCHkegSilWQ1njzYkIhcsNbThczOHnuFwf1CeBnrEkBQZB9XTmEMUUQBWgrAwF1UuCZFcZaDX1T/kUs2tYCGYqYa65RaANPUQpKtqrlDNZi7D/9uVoBMdZOwQlo8GjPcXSmJJMXiT5JB3vYgceXFQ0FYb6sT2ZA+56wgJqPnzREuxHd+6JGSkSNnskpBBh1ZSML5xSUhAvfClenzpkpCAGq86kOJSPnVJSN9A5Bqud7O7u7vLwJ/Z4JKQPq4TkU844BKHwfXBYDC7vb29TvePocOy3jUhAfViJZdfHrIoQpaIt0XUnvmurq4JENNgQMrHrgnpQ26WlGdkJfMEU9mWLY41JIOqKwdiGg1IKXdRSDRyTmSVevM2HfKDXypEZBdwxlDXEgqFpJT9BqRUuCwk+rhAeTqC3DizE7QSBcj94x+IyEcjjY/3OiBlImjWlSIP5JTHDLosZLDjyguVpPmq7ZGjACsUsh2Qm4ieFJHPIykyNacSDofPgJTDBqSsTSUhVoGUfEip59T7GtFClJQc0GpAyhovxNxc/GTQaqCD8YWIcRi0F0KQgpLSZEDKj16IOSnZJqovxLNeiDkp+ZDSQmhD5JhZ9KxnrhdirqHPQ++rKV4heOGM/laJF2JWShak6Ix9LfFCzEs5HdUQdexroReSAFBKclEVNfxfVRUjiryQBIFSMr6jo6MujoUdq30vK8EEg8HMzs7O4YwSyw8by/RCklN9jW1ra9sCYlVVcgRb68x7f6PjLymBlpaWK9CuLIeUrerNXI5jzfFjWSmIvwleiMcL8UI8XogX4vFCvBCPF+KF+JvghXi8EC/E44V4IR7j/Ac9YhOzv9yXfwAAAABJRU5ErkJggg=="},ac9e:function(t,e,a){},ae0b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("GdprConsentModal"),a("Header"),a("Sequence"),a("div",[a("AboutAlignment")],1),a("div",[a("AboutPdb")],1),a("div",[a("AboutAquaria"),a("UserHelp"),a("Errors")],1),a("div",{attrs:{id:"heightinspector"}}),a("StructureViewer"),a("Tabs"),a("CoverageMap"),a("Loader"),a("PopUp"),a("a",{attrs:{href:t.data.hash}},[a("div",{staticClass:"hide",attrs:{id:"scrim"},on:{click:t.dismissPanel}})])],1)},r=[],s=(a("d3b7"),a("159b"),a("4360")),i=(a("d81d"),a("ac1f"),a("1276"),a("a15b"),a("466d"),a("99af"),a("e9c4"),a("caad"),a("2532"),a("2b3b"));window.AQUARIA={};var o=window.AQUARIA,l=a("1157"),c=a("2bb0"),u=a("ae8a"),d=a("356e"),p=a("22b1"),h=a("5698"),m=a("bc3a");a("b3c8");var f=10;(function(t){var e=[],a=function(t){e.push(t)};o.overlay=function(){var t=document.createElement("div");t.className="dimmer",document.body.append(t)},o.RemoveOverlay=function(){document.querySelectorAll("div.dimmer").forEach((function(t){return t.remove()}))},o.fireProteinSubmitListeners=function(t,a,n){e.forEach((function(e){e.submitFired(t,a,n)}))},o.proteinTopTen=new p("protein_top_ten",f),o.pdbTopTen=new p("pdbTopten",f),a(o.proteinTopTen);var n=1,r=null;try{window.aquariaReady=function(){};var i="";"applet"===window.threedViewer?i="simple":"webgl"!==window.threedViewer&&"jolecule"!==window.threedViewer||(i="detailed"),t("span#threedSwitcher a").attr("title",i),t("span#threedSwitcher").click((function(){"applet"===window.threedViewer?window.threedViewer="jolecule":"webgl"!==window.threedViewer&&"jolecule"!==window.threedViewer||(window.threedViewer="applet"),localStorage.setItem("3DViewer",window.threedViewer),location.reload()})),t("#biounitLeft").click((function(){n-=1,o.display_3D_structure(r)})),t("#biounitRight").click((function(){n+=1,o.display_3D_structure(r)}));var l=function(t){var e=t.split(":").map((function(t){return parseFloat(t)})),a=e[0]*e[5]*e[10]+e[1]*e[6]*e[8]+e[2]*e[4]*e[9]-(e[2]*e[5]*e[8]+e[1]*e[4]*e[10]+e[0]*e[6]*e[9]);return a<0&&(e[0]=-e[0],e[4]=-e[4],e[8]=-e[8]),e.join(":")};o.display_3D_structure=function(e,a){r=e,o.currentChain=e.pdb_chain;var i=e.alignment,c=e.pdb_chain,u=e.pdb_id,p=e.sequences,f=l(e.transforms[0]),g=e.common_names,v=e.source_primary_accession,y=e.conservations;if(n=!e.biounits||e.biounits<1?0:e.biounits,u.match(/^\d\w\w\w$/)){var w=t("#threeD").width(),b=w;b=t("#threeDSpan").innerHeight(),b<570&&(b=570);var A="".concat(window.BACKEND,"/getPubMedForPDB/").concat(u,"/").concat(window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:c[0]);m({method:"get",url:A}).then((function(e){var r=e.data[0],l=r.Biounits;(!l||l<1)&&(n=0,r.Biounits=0),l>0&&"undefined"!==typeof r.experimental_method&&null!==r.experimental_method&&r.experimental_method.toLowerCase().indexOf("x-ray")>-1?(a&&(n=1,d.updatePDBPanel(r,g[0],a.alignment_identity_score)),n>l?n=0:n<0&&(n=l),0===n?(t("#biounitType").text("Asymmetric Unit"),t("#biounitCount").hide()):(t("#biounitType").text("Biological Assembly "),l>1?t("#biounitCount").show():t("#biounitCount").hide()),t("#biounitDisplay").show(),t("#biounitCount").text(n+"/"+l),n!==l?t("#biounitRight").show():t("#biounitRight").hide(),n>0?t("#biounitLeft").show():t("#biounitLeft").hide()):(r&&d.updatePDBPanel(r,g[0],a.alignment_identity_score),t("#biounitDisplay").hide(),n=0),o.pdb_data=r,h.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),h.selectAll("svg.loaded").classed("loaded",!1);var m=o.panel3d.generateAttributes(w,b,u,c,n,v,p,g,i,"",f,y,o.structures2match.version_string);if(t("#jnlp_app_attributes").val(JSON.stringify(m)),window.hide3DViewer)s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Applet is not enabled for this browser. Launch Application instead.");else{var A=function(t,e){var a=[];for(var n in window.AQUARIA.structures2match.clusters)for(var r in window.AQUARIA.structures2match.clusters[n].members)if(window.AQUARIA.structures2match.clusters[n].members[r].pdb_chain[0].includes(e)&&window.AQUARIA.structures2match.clusters[n].members[r].pdb_id.includes(t))return a.cluster=parseInt(n),a.member=parseInt(r),a},_=window.location.href.substr(window.location.origin.length+window.location.pathname.length);history.pushState(null,p[0].primary_accession,window.location.protocol+"//"+window.location.host+"/"+s["default"].getters.getOrganism+"/"+s["default"].getters.getGene+"/"+u+"/"+(window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:c[0])+_),window.AQUARIA.PDBIndex=A(window.AQUARIA.currentMember.pdb_id,window.AQUARIA.currentMember.pdb_chain),o.panel3d.initialised?o.panel3d.reload(m):o?o.panel3d.load(m):(console.log("AQUARIA.display_3D_structure Error: Cannot load the applet!"),alert("Cannot load the Applet!"))}}))}else console.log("AQUARIA.display_3D_structure Error: Invalid PDB identifier")},o.display_features=function(t){var e=[],a=[];t.forEach((function(t){e.push(t.primary_accession),a.push(t.uniprot_hash)})),"undefined"!==typeof u?(o.blankPanel("#featurePanel",!0),g(),u.fetch_annotations(e,(function(t,e){c.updateFeatureUI(t,e),o.blankPanel("#featurePanel",!1)}))):alert("Could not find fetch_das_annotations.")};var g=function(){t("#featureCounter").show(),t("#waitForFeatures").show()};o.updateDocumentTitle=function(t,e,a,n){document.title="Aquaria: "+t+", "+e+"% Sequence Identity to PDB "+a+", chain "+n},o.refresh=function(){"undefined"!==typeof o.showMatchingStructures&&(o.showMatchingStructures.refresh(),c.updateFeatureUI())},o.load3DAlignment=function(t,e){o.currentMember=t,o.updateDocumentTitle(o.preferred_protein_name,t.alignment_identity_score,t.pdb_id,window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:t.pdb_chain[0]),o.fireProteinSubmitListeners(o.preferred_protein_name,e.primary_accession,t.pdb_id),s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Waiting for PDB..."),o.blankPanel("#featurePanel",!0),o.blankPanel("#aboutPDB",!0);var a={selector:[e.primary_accession],selectPDB:this.member.pdb_id,selectChain:window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:this.member.pdb_chain[0]},n="".concat(window.BACKEND,"/get_3D_alignment");m({method:"get",url:n,params:a}).then((function(e){var a=e.data;s["default"].commit("setSecondaryStructure",a.secondary_structure),o.display_3D_structure(a,t),o.blankPanel("#vis",!1),o.blankPanel("#aboutPDB",!1),o.blankPanel("#uniProtDesc",!1),o.blankPanel("#featurePanel",!1)}))},o.display_member=function(t){var e=o.structures2match;s["default"].commit("showLoader",!0),e.clusters&&e.clusters.length>0?("undefined"===typeof t&&(t=e.clusters[e.Selected_PDB.cluster_number].members[e.Selected_PDB.member_number]),o.member=t,o.load3DAlignment(t,e.sequences[0])):"undefined"===typeof e.pdb_id?(d.updateUniprotInfo(null),o.showMatchingStructures.removeAll()):(store.commit("setLoaderMsg","Cannot find protein"),s["default"].commit("setErrorTitle","Cannot find protein."),d.updateUniprotInfo(null),o.showMatchingStructures.removeAll())}}catch(v){alert("Error with displaying structures: "+v.message)}})(l),o.margin={top:10,right:70,bottom:20,left:20},window.AQUARIA.chainSelected=i["chainSelected"],o.structures2match={},o.blankCount={},o.currentMember=null;var g=l;o.blankPanel=function(t,e,a){var n=t+" .blank";e?0===g(n).length&&(a?g(t).append('<div class="blank hidden"><br><p class="centered">'+a+"</p></div>"):g(t).append('<div class="blank hidden"></div>'),g(n).fadeIn("fast"),g(n).css("height",g(t).css("height"))):g(n).fadeOut("slow",(function(t){g(n).remove()}))};var v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"header"}},[a("div",{staticClass:"item fix level3",attrs:{id:"logo"}},[a("a",{attrs:{href:"#About"},on:{click:t.showScrim}},[a("img",{attrs:{src:t.aquariasymbol}})])]),a("Title"),a("div",{staticClass:"item fix level3",attrs:{id:"menu-btn"}},[a("a",{attrs:{href:"#Menu"}},[a("img",{attrs:{src:t.hamburger}})])]),a("Menu")],1)},y=[],w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item title fix level5",attrs:{id:"title"}},[a("span",{attrs:{id:"org_prot"}},[t.organism_name&&!t.seqRes?a("a",{staticClass:"seqPanel",attrs:{href:"#Sequence"},on:{click:function(e){return t.makeActive("seqPanel")}}},[a("img",{attrs:{src:t.search}}),t._v(" "+t._s(t.organism_name)+" "),a("strong",[t._v(t._s(t.primary_accession))])]):t._e(),t.organism_name||t.seqRes?t._e():a("a",{staticClass:"seqPanel",attrs:{href:"#Sequence"},on:{click:function(e){return t.makeActive("seqPanel")}}},[a("img",{attrs:{src:t.search}}),t._v(" Protein Sequence ")])]),t.seqRes?t._e():a("span",{attrs:{id:"alignment"}},[a("a",{staticClass:"alignPanel",attrs:{href:"#Alignment"},on:{click:function(e){return t.makeActive("alignPanel")}}},[t._v("aligned onto")])]),t.seqRes?t._e():a("span",{attrs:{id:"struct"}},[t.pdb?t._e():a("a",{staticClass:"structPanel",attrs:{href:"#Structure"},on:{click:function(e){return t.makeActive("structPanel")}}},[t._v("PDB ID")]),t.pdb&&!t.seqRes?a("a",{staticClass:"structPanel",attrs:{href:"#Structure"},on:{click:function(e){return t.makeActive("structPanel")}}},[t._v(t._s(t.pdb))]):t._e(),a("span",{style:{visibility:t.helpOption?"visible":"hidden"},attrs:{id:"help"},on:{click:t.showHelp}},[t._v("?")])]),t.seqRes?a("div",{attrs:{id:"titleAlign"}},[a("span",{staticClass:"titlepanel"},[a("a",{staticClass:"selectionPanel",attrs:{href:"#Alignment"},on:{click:function(e){return t.makeActive("selectionPanel")}}},[a("strong",[t._v(t._s(t.primary_accession))]),t._v(" sequence: "+t._s(t.seqRes)+" "),a("br"),a("strong",[t._v(t._s(t.pdb))]),t._v(" structure: "+t._s(t.structRes)+" ")])])]):t._e(),a("a",{staticClass:"close",attrs:{href:t.data.hash},on:{click:t.dismissPanel}})])},b=[],A=a("5530"),_=(a("498a"),a("1b1f")),S=a("2f62"),x={name:"Title",data:function(){return{organism_name:null,primary_accession:null,text:null,pdb:null,search:a("a6f5"),seqRes:null,structRes:null,helpOption:!0}},computed:Object(A["a"])({data:function(){return{hash:s["default"].state.hash}},scrim:function(){return s["default"].state.showScrim}},Object(S["b"])(["getHash","getOrganism","getGene","getStructure"])),watch:{scrim:function(t){var e=this;t||e.dismissPanel()}},beforeMount:function(){var t=this;window.AQUARIA.update3DTitle=function(e,a,n,r,s){if(n&&r){var i=r;if(-1!==i.indexOf("(")&&(i=r.substring(0,r.indexOf("(")).trim()),window.AQUARIA.short_moleculeName=i,e&&a&&s){t.organism_name=t.getOrganism,t.primary_accession=t.getGene,t.text="aligned onto",t.pdb=a+"-"+n;var o=window.AQUARIA.currentMember.E_value;window.AQUARIA.explainTitle(e,t.getGene,i,a,n,s,o)}else t.organism_name=t.getOrganism,t.primary_accession=i,t.text="structure from",t.pdb=a+"-"+n;var l=window.location.href.substr(window.location.origin.length+window.location.pathname.length);history.pushState("",document.title,"/"+t.getOrganism+"/"+t.getGene+"/"+t.getStructure.pdb+"/"+t.getStructure.chain+l)}else document.querySelector("#uniProtDesc").text(t.getGene)}},methods:{showHelp:function(){s["default"].commit("setHelpTitle","Aquaria Help"),s["default"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(_["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){_["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide"}))},storeHash:function(){""===window.location.hash?s["default"].commit("setHash","#(0,0,0)"):(window.location.hash.includes("-")||window.location.hash.includes("("))&&s["default"].commit("setHash",window.location.hash)},makeActive:function(t){this.helpOption=!1,this.storeHash(),document.querySelectorAll("#title span a").forEach((function(t){t.classList.remove("active")})),document.querySelector("."+t).classList+=" active",-1===document.querySelector("#title").className.indexOf("active")&&(document.querySelector("#title").className+=" active"),document.querySelector("#scrim").className="show level2",s["default"].commit("setScrim",!0),null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className="active",s["default"].commit("setAlignment",window.AQUARIA.panel3d.joleculeAlignment.copyToClipboard()),s["default"].commit("setHash",window.location.hash))},dismissPanel:function(){this.helpOption=!0;var t=document.getElementById("scrim");t.classList.contains("show")&&(t.classList.remove("show"),t.classList.add("hide")),s["default"].commit("setHash",this.getHash),document.querySelector("#title").className="item title fix level6",null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className=""),document.querySelectorAll("#title span a").forEach((function(t){t.classList.remove("active")}))},resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(t){t.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(t){t.style.display="none"}))},release:function(){document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.display="none",this.resetSelection()}},mounted:function(){this.resetSelection()},updated:function(){var t=this;t.primary_accession=t.getGene;var e=new MutationObserver((function(){if("none"===document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.display)t.seqRes=null,t.structRes=null,s["default"].commit("setAlignment","");else{var e=document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").innerText.split("\n"),a=window.AQUARIA.currentMember.pdb_id+"["+window.AQUARIA.currentMember.model+"]-"+window.AQUARIA.currentMember.pdb_chain+":",n=t.getGene+":";t.seqRes=e[1].split(n)[1],t.structRes=e[0].split(a)[1]}}));e.observe(document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection"),{attributes:!0,childList:!0,characterData:!0})}},I=x,C=(a("4069"),a("2877")),k=Object(C["a"])(I,w,b,!1,null,"4b47c11a",null),R=k.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel abs floating level7",attrs:{id:"Menu"}},[a("a",{staticClass:"close",attrs:{href:"#"}}),t._m(0),t._m(1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selected=e.target.multiple?a:a[0]},function(e){return t.onChange(e)}]}},[a("option",{attrs:{id:"ribbon",selected:""}},[t._v("Ribbon")]),a("option",{attrs:{id:"sphere"}},[t._v("Sphere")]),a("option",{attrs:{id:"backbone"}},[t._v("Backbone")])])])},D=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a",{staticClass:"lnk",attrs:{id:"print",href:"#"}},[t._v("Print")]),a("a",{staticClass:"lnk",attrs:{id:"helpbtn",href:"#"}},[t._v("Help")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a",{staticClass:"lnk",attrs:{id:"Sidechains",href:"#Menu"}},[t._v("Sidechains")]),a("a",{staticClass:"lnk",attrs:{id:"Neighbors",href:"#Menu"}},[t._v("Neighbors")]),a("a",{staticClass:"lnk active",attrs:{id:"Ligands",href:"#Menu"}},[t._v("Ligands")]),a("a",{staticClass:"lnk",attrs:{id:"Water",href:"#Menu"}},[t._v("Water")])])}],E=a("1da1"),O=(a("96cf"),a("aaec")),M=a("2fac"),V={name:"Menu",data:function(){return{selected:"Ribbon"}},methods:{onChange:function(t){var e=t.target.value.toLowerCase();document.querySelector("#threeDSpan-inner-menu-"+e).click()},showHelp:function(){var t=this;s["default"].commit("setHelpTitle","Aquaria Help"),s["default"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(_["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){_["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide";var e={};e.target=document.querySelector("#helpbtn"),t.toggleActive(e)}))},toggleActive:function(t){"lnk active"===t.target.className?t.target.className="lnk":t.target.className="lnk active"}},mounted:function(){var t=this;document.querySelector("#print").addEventListener("click",function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,Object(O["a"])(7680,4320,0,0);case 3:a=t.sent,n=document.createElement("a"),n.href=a,n.download="aquaria-screenshot.png",n.click();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),document.querySelector("#helpbtn").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),t.showHelp()})),document.querySelector("#Sidechains").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),e.currentTarget.classList.contains("active")&&M["b"](),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(5)").click()})),document.querySelector("#Neighbors").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(6)").click()})),document.querySelector("#Ligands").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),document.querySelector("#threeDSpan-inner-menu-ligand").click()})),document.querySelector("#Water").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),document.querySelector("#threeDSpan-inner-menu-water").click()}))}},T=V,q=(a("8c8c"),Object(C["a"])(T,P,D,!1,null,"3cbdef84",null)),L=q.exports,B={name:"Header",components:{Title:R,Menu:L},data:function(){return{aquariasymbol:a("2c07"),hamburger:a("b335")}},methods:{showScrim:function(){s["default"].commit("setHash",window.location.hash),document.querySelector("#scrim").className="show level3",document.querySelector("#xr-button").click()}}},U=B,N=(a("113a"),Object(C["a"])(U,v,y,!1,null,"34ef906a",null)),j=N.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel overlay about level3",attrs:{id:"Sequence"}},[a("SearchPanel"),a("AboutUniprot")],1)},H=[],Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"searchByName"}},[a("p",[t._v("Organism")]),a("SearchOrganism"),t._m(0),a("p",[t._v("Protein")]),a("SearchProtein"),a("div",{attrs:{id:"psyns"}},[a("p",[t._v("(example: "),a("a",{attrs:{href:"#"},on:{click:function(e){return t.fillin("p53")}}},[t._v("p53")]),t._v(" or "),a("a",{attrs:{href:"#"},on:{click:function(e){return t.fillin("P04637")}}},[t._v("P04637")]),t._v(")")])])],1)},G=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"osyns"}},[a("p",[t._v(" ")])])}],Z=a("1157"),z=a.n(Z),J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("autocomplete",{ref:"autocomplete",attrs:{id:"organism_syn_input",search:t.search,"get-result-value":t.getResultValue},on:{submit:t.handleSubmit}})],1)},Y=[],W=a("bc3a"),X=a.n(W),$=a("356e"),K=a("95bf"),tt=(a("8b78"),{name:"SearchOrganism",components:{Autocomplete:K["a"]},data:function(){return{OrganismSynonyms:{}}},computed:{data:function(){return{OrgID:s["default"].state.OrgID,Organism:s["default"].state.Organism}}},methods:{getResultValue:function(t){return t.value},handleSubmit:function(t){var e=this;if(t.value&&0!==t.value.indexOf("No organisms for: ")&&t.id!==e.data.OrgID){var a="".concat(window.BACKEND,"/getOrganismSynonyms");X()({method:"get",url:a,params:{organism_id:t.id}}).then((function(e){var a=e.data;s["default"].commit("setOrgID",t.id),localStorage.preferred_organism_name=t.value,$["displayOrgSynonyms"](a),document.querySelector("#organism_syn_input").setAttribute("size",t.value.length)}))}},clear:function(){this.value="",this.$refs.autocomplete.value=""},search:function(t){var e,a=this,n=this.OrganismSynonyms,r=t;return this.value=t,new Promise((function(t){if(r in n)t(n[r]);else if(""!==r){var s="".concat(window.BACKEND,"/getQueryOrganism/").concat(r);X()({method:"get",url:s}).then((function(a){var s=a.data;s.length>0?(e=s.map((function(t){return{label:t.Synonym,value:t.Synonym,id:t.Organism_ID}})),n[r]=e):e={label:"No organisms for: "+r,value:0},document.querySelector("#autocomplete-result-list-1").style.zIndex=99,document.querySelector(".autocomplete-result-list").style.maxHeight="390px",t(e)}))}else e={label:a.data.Organism,value:a.data.OrgID},t(e)}))}}}),et=tt,at=Object(C["a"])(et,J,Y,!1,null,null,null),nt=at.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("autocomplete",{ref:"autocomplete",attrs:{id:"protein_syn_input",search:t.search,"get-result-value":t.getResultValue},on:{submit:t.handleSubmit}})},st=[],it=(a("b0c0"),a("4de4"),a("2ca0"),a("4e82"),{name:"SearchProtein",components:{Autocomplete:K["a"]},data:function(){return{callbackData:{names:[],ids:[],pdbIDs:[]},cacheProteinSynonyms:{},term:null,proteinSynonymOrgId:null,pdbId:null,collectResponsevalues:null}},methods:{getResultValue:function(t){return t.value+" ("+t.id+")"},clear:function(){this.value="",this.$refs.autocomplete.value=""},handleSubmit:function(t){var e=this,a=window.AQUARIA;if(t.value&&0!==t.value.indexOf("No structures for: ")){var n=t.id;if(n.indexOf("/")>-1){var r=n.split("/");n=r[0],e.pdbId=r[1]}if("PDB"===t.type){console.log("AQUARIA.proteinAutocomplete.select pdb",t.value),s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Waiting for data...");var o="".concat(window.BACKEND,"/getAccessionForPDB/").concat(t.value);X()({method:"get",url:o}).then((function(e){var a=e.data;i["loadAccession"]([a.Accession],t.value,null)}))}else t.id===a.protein_primary_accession?t.value===a.preferred_protein_name?s["default"].commit("showLoader",!1):(console.log("AQUARIA.proteinAutocomplete.select same protein, different name",t.value),a.preferred_protein_name=t.value,o="".concat(window.BACKEND,"/getProteinSynonyms/").concat(a.protein_primary_accession,";"),X()({method:"get",url:o}).then((function(t){$["displayProtSynonyms"](t.data)}))):(document.querySelector("#protein_syn_input").placeholder=t.value,document.querySelector("#protein_syn_input").value="",s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Waiting for data..."),s["default"].commit("setGene",t.value),i["loadAccession"]([n],e.pdbId,null))}else event.preventDefault()},search:function(t){var e=window.AQUARIA,a=this;return a.term=t,a.callbackData.LRU=a.getLRU(),new Promise((function(t){if(""===a.term)a.collectResponse(),a.collectResponsevalues&&t(a.collectResponsevalues);else{if(a.proteinSynonymOrgId=a.term+"%"+e.Organism.ID,a.proteinSynonymOrgId in a.cacheProteinSynonyms)return void t(a.cacheProteinSynonyms[a.proteinSynonymOrgId]);document.querySelector(".autocomplete-result-list").style.maxHeight="390px";var n="".concat(window.BACKEND,"/queryProtein/").concat(a.term,"/").concat(e.Organism.ID);X()({method:"get",url:n}).then((function(e){var n=e.data;isNaN(parseInt(a.term.charAt(0)))?n.length>0?0===n[0].isID?(a.nameCallback(n),a.collectResponsevalues&&t(a.collectResponsevalues)):a.idCallback(n):0===n.isID?(a.nameCallback(n),a.collectResponsevalues&&t(a.collectResponsevalues)):(a.idCallback(n),a.collectResponsevalues&&t(a.collectResponsevalues)):(a.pdbCallback(n),a.collectResponsevalues&&t(a.collectResponsevalues))}))}}))},getLRU:function(){return window.AQUARIA.proteinTopTen.getAll().map((function(t){return{label:t.name,suffix:t.primary_accession+", "+t.pdb_id,value:t.name,type:"LRU",category:"Recent",id:t.primary_accession+"/"+t.pdb_id}}))},collectResponse:function(){var t=this,e=t.callbackData.LRU;e.length>0&&t.term&&t.term.length>0&&(e=e.filter((function(e){return e.label.toLowerCase().startsWith(t.term.toLowerCase())})));var a=!0,n=e.concat(t.callbackData.names).concat(t.callbackData.ids).concat(t.callbackData.pdbIDs);0===n.length&&(t.term&&t.term.length>0?n=[{label:"No structures for: "+t.term,value:0}]:a=!1),t.cacheProteinSynonyms[t.proteinSynonymOrgId]=n,a&&(t.collectResponsevalues=n)},nameCallback:function(t){var e,a=this;e=t.map((function(t){return{label:t.Synonym,suffix:null,value:t.Synonym,type:"Synonym",category:"Names",id:t.Primary_Accession,organism:t.Organism_ID}})),e.sort((function(t,e){return t.label>e.label?1:-1})),e.reduce((function(t,e){var a=t,n=e;return a&&a.value===n.value&&(a.dup||(a.suffix=a.id,a.dup=!0),n.dup||(n.suffix=n.id,n.dup=!0)),e}),null),a.callbackData.names=e,a.collectResponse()},idCallback:function(t){var e,a=this;e=t.map((function(t){var e=t.Source_Field;return"AC"!==e&&"ID"!==e||(e="UniProt"),{label:t.Synonym,suffix:e,value:t.Synonym,type:e,category:"Identifiers",id:t.Primary_Accession}})),e.sort((function(t,e){return t.label>e.label?1:-1})),a.callbackData.ids=e,a.collectResponse()},pdbCallback:function(t){var e,a=this;e=t.map((function(t){return{label:t.Synonym,suffix:"PDB",type:"PDB",value:t.Synonym,category:t.Category,id:t.Synonym}})),a.callbackData.pdbIDs=e,a.collectResponse()}}}),ot=it,lt=Object(C["a"])(ot,rt,st,!1,null,null,null),ct=lt.exports,ut={components:{SearchOrganism:nt,SearchProtein:ct},name:"SearchPanel",data:function(){return{search:a("20d9")}},methods:{fillin:function(t){document.getElementById("protein_syn_input").value=t,setTimeout((function(){window.location.href="/P04637"}),300)},selectOrganism:function(t){},placeholderText:function(t,e){var a=document.querySelector("#organism_syn_input"),n=document.querySelector("#protein_syn_input");a.placeholder=t,a.setAttribute("size",a.getAttribute("placeholder").length),n.placeholder=e,n.setAttribute("size",n.getAttribute("placeholder").length),z()("#organism_syn_input").focus((function(){z()(this).attr("placeholder","Specify an organism"),a.setAttribute("size",a.getAttribute("placeholder").length)})).blur((function(){z()(this).attr("placeholder",t),a.setAttribute("size",a.getAttribute("placeholder").length)})),z()("#protein_syn_input").focus((function(){z()(this).attr("placeholder","Specify a protein"),n.setAttribute("size",n.getAttribute("placeholder").length)})).blur((function(){z()(this).attr("placeholder",e),n.setAttribute("size",n.getAttribute("placeholder").length)}))}}},dt=ut,pt=(a("a01c"),Object(C["a"])(dt,Q,G,!1,null,null,null)),ht=pt.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scrollable",attrs:{"data-intro":"UniProt summary of the specified protein's function.","data-position":"right"}},[t._m(0),t.uniprotDesc?a("div",{attrs:{id:"uniProtDesc"}}):t._e(),t._l(t.descriptions,(function(e,n){return a("div",{key:n,staticClass:"expandable"},[a("expandable-text-line",{attrs:{"use-hover":""},domProps:{innerHTML:t._s("<strong>"+e[0]+"</strong>:"+e[1])}})],1)}))],2)},ft=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"none"},attrs:{id:"gsyns"}},[a("p",[t._v("Genes:  ")])])}],gt=(a("a4d3"),a("e01a"),a("5319"),a("02a1")),vt={name:"AboutUniprot",components:{ExpandableTextLine:gt["a"]},data:function(){return{uniprotDesc:null,sections:[],descriptions:[],a:[1,2,3],tightSections:[],desc:null,list:[]}},mounted:function(){var t=this;t.waitForElement()},methods:{waitForElement:function(){var t=this;window.AQUARIA.structures2match.sequences&&window.AQUARIA.structures2match.sequences[0]?(t.uniprotDesc=window.AQUARIA.structures2match.sequences[0].description,t.updateUniprotInfo(t.uniprotDesc)):setTimeout(t.waitForElement,50)},updateUniprotInfo:function(t){var e=this;e.list=[],e.tightSections=[];var a=/\n[A-Z ]+:.*?$/;function n(){if(t&&t.length>0){var r=t.match(a);null!==r?(e.sections.unshift(r[0].split(": ")),t=t.replace(r[0],""),n()):e.sections.unshift(t.split(": "))}}function r(t){for(var a=null,n=0;n<t.length;n++)if(n<t.length-2){var r=t[n][0],s=t[n+1][0];if(s===r)null===a&&(a="<ul>"),a+="<li>"+t[n][1]+"</li>";else if(null===a)e.tightSections.push(t[n]);else{a+="<li>"+t[n][1]+"</li></ul>";var i=[r,a];e.tightSections.push(i),a=null}}else null===a?e.tightSections.push(t[n]):(a+="<li>"+t[n][1]+"</li></ul>",i=[r,a],e.tightSections.push(i),a=null);return e.tightSections}n(),this.sections.forEach((function(t){if(-1!==t[1].indexOf("URL=")){var e="",a="",n="",r="",s=t[1].split(";");s.forEach((function(t){t=t.split("="),-1!==t[0].indexOf("URL")&&(a=t[1]),-1!==t[0].indexOf("Name")&&(n=t[1]),-1!==t[0].indexOf("Note")&&(r=t[1])})),e="<a href="+a+' title="'+r+'" target="_blank">'+n+"</a>",t[1]=e}}));var s=r(e.sections);s.forEach((function(t){var a="";if(t.length>2){for(var n=1;n<t.length;n++)a=a+" "+t[n];t[1]=a}e.list.push(t)})),e.descriptions=e.list}}},yt=vt,wt=(a("bf44"),Object(C["a"])(yt,mt,ft,!1,null,"6151a527",null)),bt=wt.exports,At={name:"Sequence",components:{SearchPanel:ht,AboutUniprot:bt}},_t=At,St=Object(C["a"])(_t,F,H,!1,null,null,null),xt=St.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel overlay about level3",attrs:{id:"Alignment"}},[a("div",{staticClass:"scrollable"},[t.data.alignment?a("p",{staticClass:"spacer"},[t._v(" ")]):t._e(),a("p",[t._v("What you see in the 3D viewer is the experimentally-determined structure of "+t._s(t.pdbName)+" from "),a("a",{attrs:{href:"http://www.rcsb.org/pdb/explore.do?structureId={{}}",target:"_blank"}},[t._v(" PDB entry "+t._s(t.pdbId))]),t._v(" chain "+t._s(t.chainId)+". ")]),a("p",[t._v(" The full-length sequence of the protein you specified ("+t._s(t.uniprotName)+") has been aligned onto the sequence used to determine this PDB structure.")]),a("p",[t._v(" Overall, the two sequences align with "+t._s(t.score)+"% identity; any amino acid substitutions are indicated using dark coloring (see legend).")]),a("p",{staticClass:"quality"},[t._v(" This alignment has an HHblits E-value of "+t._s(t.evalueString)+" × "),a("nobr",[t._v("10"),a("sup",[t._v(t._s(t.power))])]),t._v(", which is considered to be "+t._s(t.quality)+". Based on cross-validation, the likelihood that your specified protein ("+t._s(t.uniprotName)+") adopts a structure similar to that shown is estimated to be "+t._s(t.precisiontxt)+"%.")],1),a("p",[t._v("Note that the structure shown is taken directly from the PDB; it has not been derived by ab-initio or comparative modeling.")]),t.data.alignment?a("div",[a("p",[a("b",[t._v("Alignment:")]),a("br"),a("pre",[t._v(t._s(t.data.alignment))])])]):t._e()])])},Ct=[],kt=(a("25f0"),a("5698")),Rt=a.n(kt),Pt={name:"AboutAlignment",computed:{data:function(){return{alignment:s["default"].state.alignment}}},data:function(){return{pdbName:null,pdbId:null,chainId:null,score:null,qualClass:null,evalueString:null,quality:null,uniprotName:null,precisiontxt:null,power:null}},beforeMount:function(){var t=this;window.AQUARIA.explainTitle=function(e,a,n,r,s,i,o){var l;t.pdbName=n,t.pdbId=r,t.chainId=s,t.score=i,t.uniprotName=a,l=-Math.log(o)/Math.LN10;var c=100*t.BioScience_PlantDisease_Weibull_model(l);c=Math.round(c),t.evalueString=o.toString().split("e")[0],t.power=o.toString().split("e")[1],t.precisiontxt=0===o&&1===c?"close to 100":"≥ "+c,o>1e-71?(t.quality="in the twilight zone",t.qualClass="twilight"):(t.quality="high quality",t.qualClass="high")}},methods:{BioScience_PlantDisease_Weibull_model:function(t){var e;e=0;var a=-2.903935098912483,n=7.984666145922813,r=.4478023883120025;return e=1-Math.exp(-1*Math.pow((t-a)/n,r)),e},showBubble:function(t){0===document.getElementsByClassName("dimmer").length&&_["overlay"](),z()("span#help3D.roundButton").css("background-position","0 -21px"),document.querySelector("div.dimmer").addEventListener("click",(function(){z()("div.popup, div.dimmer").fadeOut().remove(),z()("span#help3D.roundButton").css("background-position","0 0")}));var e="<div class='balloon'><h3>3D View Explained<span class='x'>&nbsp;</span></h3>";e=e+t+"</div>",Rt.a.select("body").append("div").attr("class","popup top").html(e);var a=z()("#help3D").offset(),n=parseInt(a.left-230),r=parseInt(a.top+30);z()("div.popup").css({left:n+"px",top:r+"px"}).draggable().fadeIn(600),z()("span.x").click((function(){z()("div.popup, div.dimmer").fadeOut().remove(),z()("span#help3D.roundButton").css("background-position","0 0")}))},resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(t){t.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(t){t.style.display="none"}))}},mounted:function(){this.resetSelection()}},Dt=Pt,Et=(a("8a17"),Object(C["a"])(Dt,It,Ct,!1,null,"0e3c182a",null)),Ot=Et.exports,Mt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Vt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel overlay about level3",attrs:{id:"Structure"}},[a("div",{staticClass:"scrollable",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[a("span",{staticClass:"content",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[a("span",{staticStyle:{display:"none"},attrs:{id:"biounitDisplay"}},[a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitLeft",title:"Navigate to other assemblies"}},[t._v("<")]),t._v("  "),a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitType"}},[t._v("biounit")]),t._v("  "),a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitCount"}},[t._v("x/x")]),t._v("   "),a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitRight",title:"Navigate to other assemblies"}},[t._v(">")]),a("a",{attrs:{id:"helpBiounit",href:"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit",target:"_blank",title:"Go to PDB to view explanation of assembly"}},[a("span",{staticClass:"help roundButton"})])]),a("span",{staticStyle:{display:"none"},attrs:{id:"aboutPDBHider","data-intro":"PubMed Information about PDB structure","data-position":"left"}},[a("p",{attrs:{id:"classification"}},[t._v("Classification unavailable")]),a("h4",{attrs:{id:"reference_title"}},[t._v("Title unavailable")]),a("p",{attrs:{id:"reference_link"}},[a("a",{attrs:{href:"#"}},[t._v("PubMed Link unavailable")])]),a("p",{attrs:{id:"molecule",title:"View this structure in Aquaria","data-intro":"Information about currently focused PDB chain.","data-position":"left"}},[a("strong",[t._v("Molecule: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])])]),a("p",{attrs:{id:"organism"}},[a("strong",[t._v("Organism: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])]),a("p",{attrs:{id:"small_molecules"}},[a("strong",[t._v("Small molecules: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])]),a("p",{attrs:{id:"method"}},[a("strong",[t._v("Method: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])]),a("p",{attrs:{id:"resolution"}},[a("strong",[t._v("Resolution: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])]),a("p",{attrs:{id:"pdb"}},[a("strong",[t._v("Protein Data Bank: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])])])])])}],Tt={name:"AboutPdb"},qt=Tt,Lt=(a("f760"),Object(C["a"])(qt,Mt,Vt,!1,null,"01dba514",null)),Bt=Lt.exports,Ut=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"structure-viewer"}},[a("span",{attrs:{id:"threeDSpan"}})])}],jt={name:"StructureViewer",mounted:function(){function t(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(t.length)if(navigator.platform===t.pop()||screen.width>=300&&screen.width<=600)return!0}var e=t();if(e){var a=Math.max(window.innerHeight),n=document.body;document.addEventListener("scroll",(function(t){var e=Math.max(window.innerHeight);e-50>a?n.classList.contains("ios-toolbar")||n.classList.add("ios-toolbar"):n.classList.contains("ios-toolbar")&&n.classList.remove("ios-toolbar")}))}}},Ft=jt,Ht=(a("88de"),Object(C["a"])(Ft,Ut,Nt,!1,null,null,null)),Qt=Ht.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tabs rel level3"},[a("div",{staticClass:"tab",attrs:{id:"Structures"},on:{click:t.renderClusters}},[a("a",{attrs:{href:"#Structures"}},[a("span",{staticClass:"icon"},[a("img",{attrs:{src:t.MS}})]),t._v("  Matching Structures  "),t.getStructCount>0?a("span",{staticClass:"counter"},[t._v(" "+t._s(t.getStructCount.toLocaleString()))]):t._e()])]),a("MatchingStructures"),a("div",{staticClass:"tab",attrs:{id:"Features"},on:{click:t.renderFeatures}},[a("a",{attrs:{href:"#Features"}},[a("span",{staticClass:"icon"},[a("img",{attrs:{src:t.FT}})]),t._v("  Features  "),t.getFeatCount?a("span",{staticClass:"counter",attrs:{id:"featureCounter"}},[t._v(t._s(t.getFeatCount.toLocaleString()))]):t._e()])]),a("Features")],1)])},Zt=[],zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel"},[a("a",{staticClass:"close intab",attrs:{href:t.data.hash},on:{click:t.closeTab}}),t._m(0),a("TreeView",{directives:[{name:"show",rawName:"v-show",value:t.showTree,expression:"showTree"}],staticClass:"level5",attrs:{id:"treeView",treeReady:t.prop,count:t.count,coordinates:t.treeCoordinates,parentElem:t.parentElem}}),a("NodeLoader",{directives:[{name:"show",rawName:"v-show",value:t.showLoader,expression:"showLoader"}],attrs:{coordinates:t.treeCoordinates,change:t.change}})],1)},Jt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"vis"}},[a("div",{attrs:{id:"allclusters","data-intro":"Visual summary of all structures in PDB matching the specified protein, grouped by region of match.","data-position":"left"}})])}],Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"scrim level6",on:{click:t.hideTree}}),a("div",{staticClass:"level7",attrs:{id:"arc"}})])},Wt=[],Xt=a("2909"),$t=(a("4d63"),a("c607"),a("2c3e"),a("a434"),a("841c"),a("00b4"),a("9f50")),Kt=a("fae8"),te=a("7792");a("cb29"),a("b64b"),a("9e89"),a("ae8a"),a("29c86");function ee(t,e,a){document.querySelectorAll("#selectedCluster [id*='r_'] rect").forEach((function(t){t.style.fill="#a5a5a5",t.style.stroke="#a5a5a5"})),document.querySelectorAll("#selectedCluster [id*='r_'] polygon").forEach((function(t){t.style.fill="#a5a5a5",t.style.stroke="#a5a5a5"})),this.width=document.getElementById("structure-viewer").offsetWidth/1.2-window.AQUARIA.margin.right-window.AQUARIA.margin.left,this.height=40-window.AQUARIA.margin.top-window.AQUARIA.margin.bottom+35,this.datum=t;var n=Rt.a.select("#selectedFeature").append("div").attr("id","outerFeatureMap");this.drawTrack(this.datum,this.createSVGforFeature(n,"100vw",this.height+10,this.width+1),e,a),Rt.a.select("#outerFeatureMap > svg").attr("class","loadedFeature")}var ae=10,ne=450,re=450,se=14,ie=new RegExp(/(p\.)?[A-Za-z]+[0-9]+[A-Za-z\*\_\?\[\]\(\)\%\=\.]+/),oe={name:"TreeView",props:["treeReady","count","coordinates","parentElem"],data:function(){return{pdbs:[],up:a("31c8"),down:a("62bc")}},computed:Object(A["a"])({},Object(S["b"])(["getGene","getOrganism","getMatches"])),watch:{treeReady:function(t,e){var a=this;a.coordinates.clientX+ne+5>=window.innerWidth?document.querySelector(a.parentElem+" #arc").style.left=window.innerWidth-ne-5+"px":document.querySelector(a.parentElem+" #arc").style.left=a.coordinates.clientX+"px",document.querySelector(a.parentElem+" #arc").style.top=a.coordinates.clientY-400+"px",!0===this.$parent.showLoader?this.$parent.showLoader=!1:this.$parent.showTree=!1,console.log(a.count),console.log("Prop changed: ",t," | was: ",e);var n=t,r=n[0];if(kt["selectAll"](a.parentElem+" #arc > *").remove(),n.length>ae){var s=a.chunk(n,ae);a.generateArc(s,r,0)}else a.generateArc(n,r)}},methods:{hideTree:function(){s["default"].commit("setTreeData",null),this.$parent.showTree=!1},nodeClick:function(t){var e=this,a=t[2].children[0],n=0;if(a.name=t[2].label,a.length=t[2].children.length,t[2].children.length>ae){var r=e.chunk(t[2].children,ae);e.generateArc(r,a,n)}else n+=1,this.generateArc(t[2].children,a)},chunk:function(t,e){var a,n=[];t=(a=[]).concat.apply(a,Object(Xt["a"])(t));while(t.length)n.push(t.splice(0,e));return n},reversePdbArray:function(t){var e=[];return t.forEach((function(t){e.unshift(t)})),e},generateArc:function(t,e,a){var n,r,s,i,o,l=this,c=60;if(void 0!==a?(o=t,r=o[a]):(o=l.reversePdbArray(t),r=o),Object.prototype.hasOwnProperty.call(r[0],"children")){void 0!==a&&null!==document.querySelector("svg#tree")&&document.querySelector("svg#tree").remove();var u=kt["select"](l.parentElem+" #arc").append("svg").attr("id","tree").attr("width",ne).attr("height",re);i=l.createLinks(u,"parent",o,e,a)}else document.querySelectorAll("outerElem").forEach((function(t){return t.remove()})),document.querySelectorAll("[id^=children_]").forEach((function(t){return t.parentNode.removeChild(t)})),u=kt["select"](l.parentElem+" #arc").append("svg").attr("id","children_"+r[0].pdb_id+"_"+a).attr("width",ne).attr("height",re),i=l.createLinks(u,"child",o,e,a);if(s=i.nodes,u=i.svg,Object.prototype.hasOwnProperty.call(r[0],"children")?(s.shift(),n=kt["select"]("svg#tree").selectAll("g#gParent").data(s).enter()):(e.dx=s[1][0]-c,e.dy=s[1][1]-se/2,s.push([s[1][0]-c,s[1][1],e,"parent"]),document.querySelector("#tree").classList.add("hide"),s.shift(),n=kt["select"]("svg#children_"+r[0].pdb_id+"_"+a).selectAll("g").data(s).enter()),n=n.append("g").attr("class",(function(t,e){if(t.length>1)return Object.prototype.hasOwnProperty.call(t[2],"children")?"outerElem":"innerElem"})).attr("id",(function(t,e){if(t.length>1)return Object.prototype.hasOwnProperty.call(t[2],"children")?"out_"+t[2].children[0].pdb_id:void 0!==t[3]&&t[3].includes("parent")?"parentNode":"in_"+t[2].pdb_id})).attr("width",se).attr("height",se).on("click",(function(t,e){if(e>=0)if(Object.prototype.hasOwnProperty.call(t[2],"children"))l.nodeClick(t);else if(void 0===t[3]){var a=window.location.search;history.pushState("",document.title,"/"+l.getOrganism+"/"+l.getGene+"/"+t[2].pdb_id+"/"+t[2].pdb_chain+a),document.querySelectorAll(".coverage_map_container").forEach((function(t){t.remove()})),l.getMatches.clusters.forEach((function(e,a){if(e.members.length>1)e.members.forEach((function(n){if(n.pdb_id===t[2].pdb_id&&n.pdb_chain[0]===t[2].pdb_chain)return window.AQUARIA.display_member(n),window.AQUARIA.showMatchingStructures.selectCluster(e,a),null}));else if(e.members[0].pdb_id===t[2].pdb_id&&e.members[0].pdb_chain[0]===t[2].pdb_chain)return e.E_value=e.members[0].E_value,window.AQUARIA.display_member(e),window.AQUARIA.showMatchingStructures.selectCluster(e,a),window.AQUARIA.showMatchingStructures.drawCoverageMap(e),null})),ie.test(a)&&l.waitForElement()}else document.querySelector("#tree").classList.remove("hide"),document.querySelectorAll("[id^=children_]").forEach((function(t){return t.parentNode.removeChild(t)}))})),Object.prototype.hasOwnProperty.call(r[0],"children"))n.append("rect").attr("transform",(function(t){return"translate("+t[0]+","+(t[1]-se/2)+")"})).attr("class","label").attr("width",(function(t,e){return t[2].children?t[2].children.length>9?32:26:0})).attr("height",(function(t,e){return t[2].children?16:0})).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none");else{var d=kt["select"]("g#parentNode").selectAll("g").data([e]).enter();d.append("text").attr("x",(function(t){return t.dx-40-20})).attr("dy",(function(t){return t.dy+40})).attr("class","nbr_label").text((function(t){return t.name.length>15?t.name.substr(0,15)+"...":t.name})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),d.append("rect").attr("transform",(function(t){return"translate("+t.dx+","+t.dy+")"})).attr("class","label").attr("width",(function(t,e){return t.length?t.length>9?32:26:0})).attr("height",16).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none"),d.append("text").attr("x",(function(t){return t.dx+se+2})).attr("dy",(function(t){return t.dy+se-1})).attr("class","nbr_label").text((function(t){return t.length})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)}n.append("circle").attr("cx",(function(t){return t[0]})).attr("cy",(function(t){return t[1]})).attr("r",se).style("fill","white").style("stroke","#999999").style("stroke-width","1"),n.append("clipPath").attr("id","clip_"+function(t,e){return e}).append("circle").attr("cx",(function(t){return t[0]})).attr("cy",(function(t){return t[1]})).attr("r",se).attr("clip-rule","evenodd"),n.append("image").attr("width",2*(se-1)+"px").attr("height",2*(se-1)+"px").attr("x",(function(t){return t[0]-13})).attr("y",(function(t){return t[1]-13})).attr("clip-path",(function(t,e){var a=" ";return t[2].pdb_id&&(a="url(#clip_"+t[2].pdb_id+")"),t[2].children&&t[2].children[0].pdb_id&&(a="url(#clip_"+t[2].children[0].pdb_id+")"),a})).attr("xlink:href",(function(t,e){var a=" ";return t[2].pdb_id&&"undefined"===typeof t[2].children&&(a=t[2].pdb_id.toUpperCase()),t[2].children&&t[2].children[0].pdb_id&&(a=t[2].children[0].pdb_id.toUpperCase())," "===a?" ":"https://www.ebi.ac.uk/pdbe/static/entry/"+a.toLowerCase()+"_assembly_1_chain_front_image-200x200.png"})),n.append("text").attr("x",(function(t){return t[0]+se+2})).attr("dy",(function(t){return t[1]+se/2-1})).attr("class","nbr_label").text((function(t,e){if(t[2].label&&"undefined"!==t[2].label){var a=t[2].label;return t[2].label.length>30&&(a=t[2].label.substr(0,15)+" ... "+t[2].label.substr(t[2].label.length-15)),t[2].children?t[2].children.length+"      "+a:" "}if(void 0===t[3])return t[2].pdb_id+"-"+t[2].pdb_chain})).attr("title",(function(t,e){return t[2].label_long?t[2].label_long:t[2].label})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)},createLinks:function(t,e,a,n,r){var s,i=[],o=0,l=[],c={},u=this,d=40;void 0!==r?(s=a[r],s=u.reversePdbArray(s)):s=a,"child"===e&&(o=60);var p=re-d;l.push([10,p]);for(var h=0;h<s.length;h++)l.push([80+o,p-h*d]),l[h+1].push(s[h]);if(i.push($t["a"]()({source:l[0],target:l[1]})),s.length>1){var m=[{xpoint:30+o,ypoint:p},{xpoint:45+o,ypoint:p-10},{xpoint:47+o,ypoint:p-20}],f=Kt["a"]().x((function(t){return t.xpoint})).y((function(t){return t.ypoint})).curve(te["a"]);t.append("path").attr("d",f(m)).attr("fill","none").attr("class",(function(){return"outerElem"})).attr("stroke","#76c276").style("stroke-width",2);for(var g=2;g<l.length;g++){var v=[{xpoint:47+o,ypoint:l[g][1]+10},{xpoint:55+o,ypoint:l[g][1]},{xpoint:80+o,ypoint:l[g][1]}];t.append("path").attr("d",f(v)).attr("fill","none").attr("stroke","#76c276").style("stroke-width",2).attr("class",(function(t){return"outerElem"}))}t.append("line").style("stroke","#76c276").style("stroke-width",2).attr("x1",47+o).attr("y1",p+10-(l.length-2)*d).attr("x2",47+o).attr("y2",p-20).attr("class",(function(){return 1===e?"outerElem":"innerElem"}))}return t.append("path").attr("d",i).attr("stroke","#76c276").attr("fill","none").style("stroke-width",2),a.length>1&&(r+1<a.length&&(t.append("circle").attr("cx",80+o).attr("cy",p+30).attr("r",10).style("fill","#00b2ff"),t.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",p+21).attr("xlink:href",u.down).on("click",(function(){r<a.length-1&&u.generateArc(a,n,r+1)})),t.append("text").attr("x",95+o).attr("dy",p+35).attr("class","nbr_label").text("Next "+a[r+1].length).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)),r+1>1&&(t.append("circle").attr("cx",80+o).attr("cy",re-l.length*d+10).attr("r",10).style("fill","#00b2ff"),t.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",re-l.length*d+1).attr("xlink:href",u.up).on("click",(function(){r-1>=0&&u.generateArc(a,n,r-1)})),t.append("text").attr("x",95+o).attr("dy",re-l.length*d+se).attr("class","nbr_label").text("Previous").attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500))),t.append("rect").attr("x",0).attr("y",400).attr("rx",6).attr("ry",6).attr("width",u.coordinates.width+2).attr("height",u.coordinates.height).style("fill","orange").attr("class","handle").on("click",(function(){u.hideTree()})),t.append("text").attr("x",3).attr("dy",415).attr("class","nbr_label").text(u.count).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),c.nodes=l,c.links=i,c.svg=t,c},waitForElement:function(){var t=this;window.AQUARIA.addedFeature=!0,"none"!==document.getElementById("waitingFrame").style.display?setTimeout(t.waitForElement,5):(window.AQUARIA.passFeature(window.AQUARIA.customfeatureSet,window.AQUARIA.customfeatureSetioid),ee(window.AQUARIA.customfeatureSet),kt["selectAll"]("svg.loaded rect.feature").attr("fill","#a4abdf"),kt["select"]("svg.loaded").classed("loaded",!1))}}},le=oe,ce=(a("41b6"),Object(C["a"])(le,Yt,Wt,!1,null,null,null)),ue=ce.exports,de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scrim level6",attrs:{id:"nodeLoader"},on:{click:t.hideLoader}},[a("img",{attrs:{src:t.loader}})])},pe=[],he={name:"NodeLoader",data:function(){return{loader:a("ae7d")}},props:["coordinates","change"],watch:{change:function(t,e){var a=this;document.querySelectorAll("#nodeLoader > img").forEach((function(t){t.style.marginLeft=a.coordinates.clientX+"px",t.style.marginTop=a.coordinates.clientY-10+"px"}))}},methods:{hideLoader:function(){this.$parent.showLoader=!1,this.$parent.showTree=!1}}},me=he,fe=(a("d2f8"),Object(C["a"])(me,de,pe,!1,null,"d0db7e78",null)),ge=fe.exports,ve={name:"MatchingStructures",components:{TreeView:ue,NodeLoader:ge},data:function(){return{showTree:!1,prop:null,count:0,treeCoordinates:{},change:0,showLoader:!1,parentElem:".panel"}},watch:{sequence:function(t,e){e.accession!==t.accession&&null!==e.accession&&window.scrollBy(0,100)},treeData:function(t){var e=this;if(null!==t){e.change=e.change+1;var a=e.getTreeCoordinates;e.treeCoordinates.clientX=a.left,e.treeCoordinates.clientY=a.top,e.treeCoordinates.width=a.width,e.treeCoordinates.height=a.height,e.showLoader=!0;var n="".concat(window.BACKEND,"/get_secondary_clusters/");n=n+e.getStructure.accession+"/"+e.getStructure.pdb+"/"+e.getStructure.chain+"/"+t,X()({method:"get",url:n}).then((function(t){e.showTree=!0,e.prop=t.data,e.count=0,t.data.forEach((function(t){e.count+=t.children.length}))}))}else e.showTree=!1}},computed:Object(A["a"])({data:function(){return{hash:s["default"].state.hash,prop:null}},sequence:function(){return s["default"].state.structure},treeData:function(){return s["default"].state.treeData}},Object(S["b"])(["getMatches","getTreeCoordinates","getStructure"])),methods:{closeTab:function(){window.scrollBy(0,100),_["hidePanels"]()}},mounted:function(){var t=this;if(t.getMatches&&Object.hasOwnProperty.call(t.getMatches,"clusters"))for(var e=document.querySelectorAll("[id ^= structure_] > text"),a=0;a<e.length;a++)e[a].addEventListener("click",(function(){var t=this.parentElement.id;console.log(t)}))}},ye=ve,we=(a("3cb4"),Object(C["a"])(ye,zt,Jt,!1,null,null,null)),be=we.exports,Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel"},[a("a",{staticClass:"close",attrs:{href:"#"},on:{click:t.closeTab}}),a("div",{attrs:{id:"featurePanel"}},[t.getfeatureSets?a("div",{staticClass:"ui-sortable",attrs:{id:"groupedFeatures"}},t._l(t.getfeatureSets,(function(e){return a("div",{key:e[0],staticClass:"featureCollection ui-sortable-handle",attrs:{id:e[0]},on:{click:function(a){return t.toggleTrack(e[0])}}},[a("div",{staticClass:"featureHeader",on:{mouseover:function(a){return t.hightlight(e[0])},mouseout:function(a){return t.removeHightlight(e[0])}}},[a("p",{attrs:{id:"arrow"}},[t._v("►")]),a("p",{staticClass:"featureName"},[t._v(t._s(e[0]))]),a("div",{staticClass:"info",on:{mouseover:function(a){return t.showInfo(e,a)}}},[t._v("?")])]),a("div",{staticClass:"featureTrack ui-sortable",staticStyle:{cursor:"move"}})])})),0):t._e()])])},_e=[],Se=a("ade3"),xe=a("53ca"),Ie=a("2ef0"),Ce=a.n(Ie);function ke(t,e){Oe(t,parseInt(e))}function Re(){var t=AQUARIA.currentAnnotationsIn3DViewer;if(void 0!==t){for(var e in t)AQUARIA.panel3d.removeAnnotation(t[e].id,t[e].annotationName);t.length=0}}function Pe(t){var e=window.AQUARIA.panel3d.embededJolecule.controller;t.forEach((function(t){De(t)})),e.soupView.isUpdateSidechain=!0,e.soupView.isChanged=!0}function De(t){var e=t.split(".")[0],a="object"===Object(xe["a"])(s["default"].state.structure.chain)?s["default"].state.structure.chain[0]:s["default"].state.structure.chain;if(e.includes("-")){var n=parseInt(e.split("-")[0].replace(/\D/g,"")),r=parseInt(e.split("-")[1].replace(/\D/g,""))+1;Ce.a.range(n,r).forEach((function(t){Ee(t,a)}))}else e.includes(",")?e.split(",").forEach((function(t){t=parseInt(t.replace(/\D/g,"")),Ee(t,a)})):(e=parseInt(e.replace(/\D/g,"")),Ee(e,a))}function Ee(t,e){var a=window.AQUARIA.panel3d.joleculeAlignment,n=window.AQUARIA.panel3d.embededJolecule.controller;t=a.mapSeqResToPdbResOfChain(0,t,e);var r=n.soup.findResidueIndices(0,e,t[2])[0];n.soup.getResidueProxy().load(r).sidechain=!0}function Oe(t,e){if(e="undefined"!==typeof e?e:-1,e>=0)Me(t,e);else for(e in t.Tracks)Me(t,e)}function Me(t,e){var a=new Array,n=new Array,r=new Array,s=new Array,i=new Array,o=new Array,l="#ffffff";if(void 0!=t){var c;for(var u in t.featureColours&&t.featureColours.length>0&&(l=t.featureColours[0]),t.Tracks[e])if(t.Tracks[e][u].show){if("multi_color"!==t.Class.color)t.Tracks[e][u].color.substring(1);t.Tracks[e][u].color?a.push(t.Tracks[e][u].color):a.push(l),n.push(t.Tracks[e][u].label),r.push(t.Tracks[e][u].desc),s.push(t.Tracks[e][u].start+":"+t.Tracks[e][u].end);var d=new Array,p=new Array;for(var h in t.Tracks[e][u].urls)d.push(t.Tracks[e][u].urls[h].href),p.push(t.Tracks[e][u].urls[h].text);i.push(d),o.push(p)}var m=t.ProteinID;if(t.hasOwnProperty("SeqHash")&&""!=t.SeqHash)for(var f=0;f<AQUARIA.panel3d.attributes.sequences.length;f++)t.SeqHash==AQUARIA.panel3d.attributes.sequences[f].uniprot_hash&&(m=AQUARIA.panel3d.attributes.sequences[f].primary_accession,t.ProteinID=m);var g=(c={id:t.ProteinID,annotationName:t.Category,featureColours:a,featureNames:n,featureDescriptions:r,featurePositions:s,featureURLs:i},Object(Se["a"])(c,"featureURLs",i),Object(Se["a"])(c,"featureURLtexts",o),Object(Se["a"])(c,"featureURLtexts",o),c);AQUARIA.currentAnnotationsIn3DViewer.push(g),Array.isArray(g.id)?AQUARIA.panel3d.addAnnotation(g.id[0],g.annotationName,a,n,r,s,i,o):AQUARIA.panel3d.addAnnotation(g.id,g.annotationName,a,n,r,s,i,o)}}AQUARIA.currentAnnotationsIn3DViewer=new Array;var Ve={name:"Features",data:function(){return{jAlignment:null,jController:null}},methods:{closeTab:function(){window.scrollBy(0,100),_["hidePanels"]()},clearResidues:function(){window.AQUARIA.panel3d.embededJolecule.controller.clearSelectedResidues()},toggleTrack:function(t){var e=document.getElementById(t).lastChild;t=t.replace(/\s/g,"\\ "),"block"!==e.style.display?(e.style.display="block",document.querySelector("#"+t+" #arrow").innerText="▼"):(e.style.display="none",document.querySelector("#"+t+" #arrow").innerText="►")},hightlight:function(t){document.querySelector("#"+t.replace(/\s/g,"\\ ")+" > .featureHeader").style.background="#bebebe"},removeHightlight:function(t){document.querySelector("#"+t.replace(/\s/g,"\\ ")+" > .featureHeader").style.background="#ccc"},showInfo:function(t,e){s["default"].commit("setPopupTitle",t[0]),s["default"].commit("setPopupText",t[1][0].About),s["default"].commit("setIsDefaultFeature",!0),s["default"].commit("setVariantIdx",-1),s["default"].commit("setPopupCoordinates",e.srcElement.getBoundingClientRect())}},watch:{loadedFeature:function(t){ke(t.set,t.track),Pe(this.sideChain)}},computed:Object(A["a"])({Loader:function(){return s["default"].state.Loader},sideChain:function(){return s["default"].state.sidechain},featureSets:function(){return s["default"].state.featureSets},loadedFeature:function(){return s["default"].state.loadedFeature}},Object(S["b"])(["getfeatureSets"]))},Te=Ve,qe=(a("fc7c"),Object(C["a"])(Te,Ae,_e,!1,null,null,null)),Le=qe.exports,Be=a("29c86"),Ue=["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"];function Ne(){s["default"].commit("setPopupCoordinates",0)}function je(t,e){var a="";if(t.urls.length>0){a="<p>";for(var n=0;n<t.urls.length;n++)a+="<a href='"+t.urls[n].href+"' target='_blank'>"+t.urls[n].text+"</a><br>";a+="</p>"}var r="";t.name.includes("&#8201;&#8594;&#8201;")&&(r=t.name.replace(/^.*\(/,""),r=r.replace(/\&.*$/,""));var i="<div id='buttons_eachAa'> <b>See also:</b><p class='pAaColor'> "+r+" &rarr;</p>";Ue.forEach((function(e,a){if(e!=r){var n=He(e,t.desc,t.start);i=i+"<button id='btnVI_"+e+"'",i=1==n?i+"class='btnAaBold_b'> <b>"+e+"</b> ":i+" class='btnAaBold'> "+e,i+="</button>"}})),i+="</div>";var o=t.desc+"<br>"+a,l="<b>"+t.label+"</b>";t.name.includes("span_missenseHeading")?t.start!=t.end?(s["default"].commit("setVariant",t.start+"-"+t.end),s["default"].commit("setPopupTitle",t.label),Fe(t.start+"-"+t.end,t.label)):(s["default"].commit("setVariant",t.start),s["default"].commit("setPopupTitle",t.label),Fe(t.start,t.label)):(s["default"].commit("setVariant",-1),s["default"].commit("setIsDefaultFeature",!0),l=t.start===t.end?l+"( Residue "+t.start+") ":l+"( Residues "+t.start+"-"+t.end+") ",s["default"].commit("setPopupTitle",l),s["default"].commit("setPopupText",o),s["default"].commit("setVariantIdx",-1),s["default"].commit("setPopupCoordinates",document.querySelector("#"+e.id).getBoundingClientRect())),t.hasOwnProperty("hc_go")&&t.hasOwnProperty("hc_ec")&&t.hasOwnProperty("hc_species")?(console.log("CATH plot data"),console.log(t),Qe(t).then((function(){Ge()}))):(console.log("CATH plot no data"),console.log(t))}function Fe(t,e){var a=s["default"].getters.getVariantResidues;if(a.hasOwnProperty(t)&&a[t].hasOwnProperty("theOrigFeatStr"))for(var n=0;n<a[t].theOrigFeatStr.length;n++)if(e.includes(a[t].theOrigFeatStr[n])){s["default"].commit("setVariantIdx",n);break}}function He(t,e,a){var n="<toReplace_varInfo_"+t+">",r="</toReplace_varInfo_"+t+">",s=e.indexOf(n),i=e.lastIndexOf(r),o=e.substring(s,i);return!!(o.match("UniProt")||o.match("FunVar")||o.match("COSMIC")||window.AQUARIA.hasOwnProperty("variantStructs")&&window.AQUARIA.variantStructs.hasOwnProperty(a)&&window.AQUARIA.variantStructs[a].hasOwnProperty(t)&&window.AQUARIA.variantStructs[a][t].hasOwnProperty("pdbs")&&window.AQUARIA.variantStructs[a][t]["pdbs"].length>0)}function Qe(t){return new Promise((function(e,a){"undefined"!==typeof t.hc_go&&t.hc_go.hasOwnProperty("data")&&t.hc_go.data.hasOwnProperty("series")&&t.hc_go.data.series.length>=2?Ze("hc_go_div",t.hc_go.data.series[0].data,t.hc_go.data.series[1].data,"",t.hc_go.data.series[0].size,t.hc_go.data.series[0].dataLabels.color,t.hc_go.data.series[0].dataLabels.distance,t.hc_go.data.series[1].innerSize,t.hc_go.data.series[0].name,t.hc_go.data.series[1].name,t.hc_go.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_div"))})).catch((function(t){console.log("CATH plot: 2"),ze("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+t)}))})):(ze("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>"})),console.log("CATH plot: 3")),"undefined"!==typeof t.hc_ec&&t.hc_ec.hasOwnProperty("data")&&t.hc_ec.data.hasOwnProperty("series")&&t.hc_ec.data.series.length>=2?Ze("hc_ec_div",t.hc_ec.data.series[0].data,t.hc_ec.data.series[1].data,"",t.hc_ec.data.series[0].size,t.hc_ec.data.series[0].dataLabels.color,t.hc_ec.data.series[0].dataLabels.distance,t.hc_ec.data.series[1].innerSize,t.hc_ec.data.series[0].name,t.hc_ec.data.series[1].name,t.hc_ec.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_div"))})).catch((function(t){ze("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+t)}))})):ze("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>"})).catch((function(){})),"undefined"!==typeof t.hc_species&&t.hc_species.hasOwnProperty("data")&&t.hc_species.data.hasOwnProperty("series")&&t.hc_species.data.series.length>=2?Ze("hc_species_div",t.hc_species.data.series[0].data,t.hc_species.data.series[1].data,"",t.hc_species.data.series[0].size,t.hc_species.data.series[0].dataLabels.color,t.hc_species.data.series[0].dataLabels.distance,t.hc_species.data.series[1].innerSize,t.hc_species.data.series[0].name,t.hc_species.data.series[1].name,t.hc_species.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_div"))})).catch((function(t){ze("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+t)}))})):ze("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>"})),e()}))}function Ge(){var t=document.getElementsByClassName("highcharts-pie-series");for(var e in t)if(t.hasOwnProperty(e)){var a=t[e].getElementsByTagName("path");for(var n in a)if(a.hasOwnProperty(n)){var r=a[n].getAttribute("fill");a[n].removeAttribute("fill"),a[n].setAttribute("style","fill:"+r)}}}function Ze(t,e,a,n,r,s,i,o,l,c,u){return new Promise((function(d,p){ze(t).then((function(){try{Be.chart(t,{chart:{type:"pie",margin:0},title:{text:n},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"%"},series:[{name:l,data:e,size:r,dataLabels:{enabled:!1,formatter:function(){return this.y>3?this.point.name:null},color:s,distance:i}},{name:c,data:a,innerSize:o,dataLabels:{enabled:!1,formatter:function(){return this.y>1?"<b>"+this.point.name+":</b> "+this.y+"%":null},color:u},id:"versions"}],responsive:{rules:[{condition:{maxWidth:100},chartOptions:{series:[{},{id:"versions",dataLabels:{enabled:!1}}]}}]}}),d()}catch(p){console.log("Highcharts error"),console.log(p),d(),console.log("In the highcharts plotting function")}}))}))}function ze(t){return new Promise((function(e,a){document.getElementById(t)&&document.getElementById(t).remove();var n=document.createElement("div");document.getElementById("superFamCharts").append(n),n.id=t,n.style="width: 100px; height: 100px; margin: 0 auto; background-color: white;",e()}))}var Je=0,Ye=0;AQUARIA.currentFeature={};var We=0;function Xe(t){Ye=0,document.querySelector("#featurePanel > .ruler")&&document.querySelector("#featurePanel > .ruler").remove(),window.AQUARIA.showMatchingStructures.drawAxisRuler("featurePanel"),t.forEach((function(t){var e=Rt.a.select("#"+t[0].replace(/\s/g,"\\ ")),a=e.select(".featureTrack").selectAll("div");for(var n in t[1])"Added Features"==t[0]&&t[1][n].hasOwnProperty("SeqHash")&&""!=t[1][n].SeqHash&&t[1][n].SeqHash!=AQUARIA.showMatchingStructures.sequence.uniprot_hash||a.data([t[1][n]]).enter().append("div").attr("class","track").attr("id",(function(t){return"track_"+t.Category})).html((function(t){if(""!=t.Type){if("UniProt"==t.Server||"PredictProtein"==t.Server||"CATH"==t.Server||"SNAP2"==t.Server||"COSMIC"==t.Server||"FunVar"==t.Server)var e="Curated Features";else e=t.Server;return"<p><span class='featureSetName'>"+t.Category+'</span> <i class="featureSetName_">('+t.Type.replace(/_/g," ")+")</i> &nbsp;&nbsp; <span class='info'>?</span>  <span class='source'>"+e.replace(/[sS]$/,"")+"</span> </p> <span class='tooltiptext'>"+t.Description+"</span>"}return e="UniProt"==t.Server||"PredictProtein"==t.Server||"CATH"==t.Server||"SNAP2"==t.Server||"COSMIC"==t.Server||"FunVar"==t.Server?"Curated Features":t.Server,'<p><span class="featureSetName">'+t.Category+"</span> &nbsp;&nbsp; <span class='info'>?</span> <span class='source'>"+e.replace(/[sS]$/,"")+"</span></p> <span class='tooltiptext'>"+t.Description+"</span>"})).each($e)}))}function $e(t,e){var a=t.Tracks;for(var n in a){var r=Rt.a.select(this),i=ta(r);i.attr("id","ftrack_"+Je+"_"+n).on("click",(function(){if("loaded"==Rt.a.select(this).attr("class"))s["default"].commit("setLoadedFeature",{set:null,track:null}),Rt.a.select("svg.loaded").classed("loaded",!1),document.querySelector(".featureHeader").click(),Re(),Ne(),_["hidePanels"]();else{document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove(),"Added Features"!=t.Server&&(AQUARIA.addedFeature=!1);var e=Rt.a.select(this).attr("id").split("_")[2];s["default"].commit("setLoadedFeature",{set:t,track:e}),Rt.a.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),Rt.a.select("svg.loaded").classed("loaded",!1),Rt.a.select(this).attr("class","loaded"),_["hidePanels"]()}})).on("mouseover",(function(){Rt.a.select(this).selectAll("rect.feature").attr("fill",(function(){return Rt.a.select(this).attr("color")}))})).on("mouseout",(function(){"loaded"!==Rt.a.select(this).attr("class")&&Rt.a.select(this).selectAll("rect.feature").attr("fill","#a4abdf")})).append("rect").attr("width",We+AQUARIA.margin.left).attr("height",25).attr("class","bg").attr("fill","none"),Rt.a.select("svg#ftrack_"+Je+"_"+n).append("g").attr("transform","translate("+AQUARIA.margin.left+",0)").append("rect").attr("width",We).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion"),Ke(t,a,n)}Je++}function Ke(t,e,a){for(var n in e[a])Ye++,s["default"].commit("setFeatCount",Ye),Rt.a.select("#ftrack_"+Je+"_"+a+" g").append("rect").attr("width",(function(){return(e[a][n].size+1)*AQUARIA.srw>2?(e[a][n].size+1)*AQUARIA.srw:2})).attr("height",14).attr("id","feature_"+Je+"_"+a+"_"+n).attr("transform","translate("+e[a][n].start*(AQUARIA.srw-.0085)+",6)").attr("color",e[a][n].color).attr("fill","#a4abdf").attr("fill-opacity",(function(){return"single_track"==t.Class?.3:1})).attr("class","feature").on("mouseover",(function(){Rt.a.select(this).attr("stroke-width","2px").attr("stroke","white"),je(e[this.id.split("_")[2]][this.id.split("_")[3]],this)})).on("mouseout",(function(){Rt.a.select(this).attr("stroke-width","0px"),Ne()}))}function ta(t){var e=document.getElementById("structure-viewer").offsetWidth-window.AQUARIA.margin.right-window.AQUARIA.margin.left;We=document.getElementById("structure-viewer").offsetWidth-AQUARIA.margin.right;var a=40-AQUARIA.margin.top-AQUARIA.margin.bottom+35,n=t.append("svg").attr("width",We).attr("height",a).attr("viewBox","0 0 "+e+" "+a).attr("preserveAspectRatio","none");return n}var ea,aa,na,ra={name:"Tabs",components:{MatchingStructures:be,Features:Le},data:function(){return{MS:a("39b5"),FT:a("9db5")}},computed:Object(A["a"])({},Object(S["b"])(["getFeatCount","getStructCount","getMatches"])),methods:{storeHash:function(){""===window.location.hash&&s["default"].commit("setHash","#(0,0,0)"),window.location.hash.includes("(")&&s["default"].commit("setHash",window.location.hash)},renderClusters:function(){if(this.storeHash(),!document.querySelector(".outer_container")){for(var t=this.getMatches.clusters,e=0;e<t.length;e++)window.AQUARIA.showMatchingStructures.addCluster(t[e]);window.AQUARIA.showMatchingStructures.updateSizes(this.getMatches.clusters)}},renderFeatures:function(){this.storeHash(),Xe(s["default"].state.featureSets)},onTextClick:function(t,e){var a=parseInt(t.attr("id").substr(15));s["default"].commit("setTreeData",a),s["default"].commit("setTreeCoordinates",e)},showPanel:function(t,e){document.querySelector("#"+t).style.display="block",document.querySelectorAll(".tab").className="tab inactive",document.querySelector("#"+e).className="tab active"},showMatches:function(){var t=this;if(window.AQUARIA.panel3d){var e=window.AQUARIA.panel3d.embededJolecule.controller;e.clearSelectedResidues()}t.showPanel("vis","Structures"),_["hidePanel"]("featurePanel","Features"),0===document.getElementsByClassName("dimmer").length&&_["overlay"](),document.querySelector("div.dimmer").className+=" level0",document.querySelector("div.dimmer").addEventListener("click",(function(){_["hidePanels"]()}))},showFeatures:function(){var t=this;if(window.AQUARIA.panel3d){var e=window.AQUARIA.panel3d.embededJolecule.controller;e.clearSelectedResidues()}_["hidePanel"]("vis","Structures"),t.showPanel("featurePanel","Features"),0===document.getElementsByClassName("dimmer").length&&_["overlay"](),document.querySelector("div.dimmer").className+=" level0",document.querySelector("div.dimmer").addEventListener("click",(function(){document.querySelector("a.close").click(),_["hidePanels"]()}))}},mounted:function(){var t=this;window.addEventListener("hashchange",(function(){window.location.hash.includes("Structures")&&t.showMatches(),window.location.hash.includes("Features")&&t.showFeatures()}))}},sa=ra,ia=(a("d7e4"),Object(C["a"])(sa,Gt,Zt,!1,null,"22e3a51f",null)),oa=ia.exports,la=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rel",attrs:{id:"map"}},[a("FeatureMap",{attrs:{drawFeature:t.drawFeature}}),t.showLoader?a("mapLoader"):t._e()],1)},ca=[],ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"featureMap"}})},da=[],pa={name:"FeatureMap",props:["drawFeature"],data:function(){return{seqLength:0,scale:null,coverageMapsrw:0,residueColor:null}},computed:Object(A["a"])({getLoadedFeature:function(){return s["default"].state.loadedFeature}},Object(S["b"])(["getVariantResidues","getLoadedFeature","getVariantIdx","getVariant"])),watch:{getLoadedFeature:function(){var t=this;null===t.getLoadedFeature.set?document.querySelectorAll('[id^="feature_residue_').forEach((function(t){t.remove()})):document.querySelector('[id^="feature_residue_')?(document.querySelectorAll('[id^="feature_residue_').forEach((function(t){t.remove()})),t.drawMap(t.getLoadedFeature)):t.drawMap(t.getLoadedFeature)}},methods:{drawMap:function(t){var e=this,a=null;this.setScales(),t.set.Tracks[0].forEach((function(t,n){t.start=+t.start,t.end=+t.end,e.drawResidues(t,a)})),this.getVariantResidues&&(e.loadPopup(t),console.log("The data here is "+e.getVariantIdx+" "+e.getVariant),console.log(t))},loadPopup:function(t){var e=this,a=Object.keys(e.getVariantResidues).sort((function(t,a){return e.getVariantResidues[t].order-e.getVariantResidues[a].order})),n=a[0];console.log('"The data here 2 is "'+n+" "+e.getVariantResidues[n].order+" "+a);var r='[id^="feature_residue_'+n+'"]',i=document.querySelector(r);t.set.Tracks[0].forEach((function(t){if(e.getVariantResidues[t.start]){var a=e.getVariantResidues[t.start];s["default"].commit("setPopupTitle",t.label),s["default"].commit("setPopupText",a),s["default"].commit("setVariantIdx",0),s["default"].commit("setIsDefaultFeature",!1),s["default"].commit("setVariant",t.start),null!=i&&s["default"].commit("setPopupCoordinates",i.getBoundingClientRect())}}))},setScales:function(){this.seqLength=window.AQUARIA.structures2match.sequences[0].length,this.scale=kt["scale"].linear().domain([1,this.seqLength]).range([1,window.innerWidth]),this.coverageMapsrw=this.scale(this.seqLength)/this.seqLength},drawResidues:function(t){for(var e=this,a="",n="",r="",i=t.start;i<=t.end;i++){var o='[id^="residue_'+i+'"]',l=document.querySelector(o),c=document.querySelector(o+"> rect");if(l.id.includes("Dark")?(n=15,r=20):(n=25,r=document.querySelector(o+"> rect").getBoundingClientRect().height),"undefined"!==l&&"undefined"!==c&&null!=l&&null!=c){var u=kt["select"]("#map > #coverageMap > g");u.append("g").attr("id","feature_residue_"+i+"_"+document.querySelector(o).id.split("_")[3]).append("rect").attr("width",e.coverageMapsrw).attr("height",r).attr("transform",(function(){var t=document.querySelector(o+"> rect").getBoundingClientRect().height;return 18===t?"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+",17)":14===t?"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+",19)":19===t?"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+",16)":"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+","+n+")"})).attr("fill",t.color).on("mouseover",(function(n){e.residueColor=kt["select"](this).style("fill"),kt["select"](this).attr("stroke","white").attr("stroke-width",1),l.id.includes("Dark")?s["default"].commit("setPopupTitle",t.label+": Dark region"):s["default"].commit("setPopupTitle",t.label),t.desc!==t.label?e.getVariantResidues[t.start]?(a=e.getVariantResidues[t.start],s["default"].commit("setPopupText",a),s["default"].commit("setVariantIdx",0),s["default"].commit("setVariant",t.start)):t.desc.length>0?(a=t.desc+" </br> ",a+="Structures with residue "+this.parentElement.id.split("_")[1]+": ",s["default"].commit("setPopupText",a),s["default"].commit("setVariant",-1),s["default"].commit("setIsDefaultFeature",!1)):s["default"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[2]+": "):(s["default"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[2]+": "),s["default"].commit("setVariant",-1)),s["default"].commit("setIsDefaultFeature",!1),s["default"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["default"].commit("setPopupCoordinates",this.getBoundingClientRect())})).on("mouseout",(function(){kt["select"](this).attr("stroke",e.residueColor).attr("stroke-width",0)}))}}}}},ha=pa,ma=(a("9b83"),Object(C["a"])(ha,ua,da,!1,null,null,null)),fa=ma.exports,ga=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},va=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated"},[a("div",{staticClass:"innerGradient"})])}],ya={name:"mapLoader"},wa=ya,ba=(a("be77"),Object(C["a"])(wa,ga,va,!1,null,"6934c327",null)),Aa=ba.exports,_a=50,Sa=200,xa=[61,28],Ia={name:"CoverageMap",components:{FeatureMap:fa,mapLoader:Aa},data:function(){return{seqLength:0,scale:null,coverageMapsrw:0,residueColor:null,densityScale:null,darkRegions:[],myArray:[1],coverageMapData:null,drawFeature:!1,showLoader:!0,structure:{accession:null},docFrag:null}},computed:Object(A["a"])({getLoadedFeature:function(){return s["default"].state.loadedFeature},secondaryStructure:function(){return s["default"].state.secondaryStructure},sequence:function(){return s["default"].state.structure},loader:function(){return s["default"].state.Loader}},Object(S["b"])(["getGene","getStructure","getOneAaCodes","getThreeAaCodes","getLoadedFeature"])),watch:{getLoadedFeature:function(t){var e=this;null===t.set?(e.drawFeature=!1,e.selectStructmap(window.AQUARIA.currentMember)):document.querySelector("#map > #coverageMap")?(e.setStructFeatmap(window.AQUARIA.currentMember),e.drawFeature=!0):e.updateUI()},secondaryStructure:function(){var t=this;document.querySelector("#map > #coverageMap")&&t.selectStructmap(window.AQUARIA.currentMember)()},sequence:function(t,e){var a=this;if(e.accession!==t.accession&&null!==e.accession){document.querySelector("#map > #coverageMap").remove(),a.init(t.accession);var n={selector:[t.accession],selectPDB:t.pdb,selectChain:t.chain},r="".concat(window.BACKEND,"/get_3D_alignment");X()({method:"get",url:r,params:n}).then((function(t){var e=t.data;s["default"].commit("setSecondaryStructure",e.secondary_structure)}))}},loader:function(t){var e=this;if(!t){var a=new M["a"](window.AQUARIA.panel3d.embededJolecule);a.addEventListener("viewcommit",(function(){e.updateUI(),e.checkAddedFeature()}))}}},mounted:function(){this.init(this.$route.params.uniprotAccession)},methods:{checkAddedFeature:function(){var t=this,e=this.$store.state.featureSets;e.length>0&&e.forEach((function(e){if(e[0].includes("Added")&&null===t.getLoadedFeature.set)return s["default"].commit("setLoadedFeature",{set:e[1][0],track:0}),null}))},updateUI:function(){var t=this;document.querySelector("#map > #coverageMap")||(t.drawMap(t.coverageMapData),document.querySelector("#map").appendChild(t.docFrag),null!==t.getLoadedFeature.set?(t.setStructFeatmap(window.AQUARIA.currentMember),t.drawFeature=!0):t.selectStructmap(window.AQUARIA.currentMember),t.showLoader=!1)},init:function(t){var e=this,a="".concat(window.BACKEND,"/getCoverageMap"),n={selector:[t]};X()({method:"get",url:a,params:n}).then((function(t){console.log(t.data),e.coverageMapData=t.data}))},drawMap:function(t){var e=this;ea=e.renderSVG(),ea.append("rect").attr("id","selection"),this.drawLine(ea),this.setScales(t),this.drawDarkRegions(t),t.secondaryStructures.forEach((function(a){a.start=+a.start,a.end=+a.end,e.drawResidues(a,t)}))},setScales:function(t){this.seqLength=t.seqLength,this.scale=kt["scale"].linear().domain([1,this.seqLength]).range([1,window.innerWidth]),this.coverageMapsrw=this.scale(t.seqLength)/t.seqLength;var e=Math.max.apply(Math,Object(Xt["a"])(t.densityMap));this.densityScale=e<=Sa?kt["scale"].linear().domain([Math.log(1),Math.log(Sa)]).range(xa):kt["scale"].linear().domain([Math.log(1),Math.log(Math.max.apply(Math,Object(Xt["a"])(t.densityMap)))]).range(xa)},drawLine:function(t){t.append("line").style("stroke","#434343").attr("x1",1).attr("y1",26).attr("x2",window.innerWidth).attr("y2",26)},renderSVG:function(){this.docFrag=document.createDocumentFragment();var t=kt["select"](this.docFrag).append("svg").attr("id","coverageMap").attr("height",_a).attr("width","100%").attr("viewBox","0, 0, "+window.innerWidth+","+_a).attr("preserveAspectRatio","none"),e=t.append("g");return e},drawResidues:function(t,e){var a=ea,n="",r="",i=this;if("SHEET"===t.Type)var o=18,l=17,c="sheet";else"COIL"===t.Type?(o=14,l=19,c="coil"):(o=19,l=16,c="helix");for(var u=t.start;u<=t.end;u++){var d="hsl(0, 0%,"+i.densityScale(Math.log(e.densityMap[u-1]))+"%)";a.append("g").attr("id","residue_"+u+"_"+t.Type+"_"+e.densityMap[u-1]).append("rect").attr("transform","translate("+(u*i.coverageMapsrw-i.coverageMapsrw)+","+l+")").attr("width",(function(){return i.coverageMapsrw<.5?i.coverageMapsrw+.25:i.coverageMapsrw})).attr("height",o).attr("fill",d).attr("class",c).attr("stroke-width",1).on("mouseover",(function(t){i.residueColor=kt["select"](this).style("fill"),kt["select"](this).attr("stroke","white").attr("stroke-width",1);var e=this.parentElement.id.split("_")[1];s["default"].commit("setRes",e);var a=window.AQUARIA.structures2match.sequences[0].sequence[e-1],o=i.getOneAaCodes.indexOf(a),l=i.getThreeAaCodes[o];if(r='<span style="font-weight: 700;">'+i.getGene+"</span> sequence: "+l+"–"+e,this.parentElement.id.includes("active")){var c=window.AQUARIA.panel3d.joleculeAlignment,u=window.AQUARIA.panel3d.embededJolecule.controller,d=c.mapSeqResToPdbResOfChain(0,e,i.getStructure.chain),p=u.soup.findResidueIndices(0,d[1],d[2]),h=u.soup.getResidueProxy().load(p).resType;h=h.substr(0,1)+h.substr(1).toLowerCase(),n=i.getStructure.pdb+"-"+i.getStructure.chain+" structure: "+h+"-"+d[2]+"</br> Structures with residue "+this.parentElement.id.split("_")[1]+": "}else n="Structures with residue "+this.parentElement.id.split("_")[1]+": ";s["default"].commit("setPopupTitle",r),s["default"].commit("setPopupText",n),s["default"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["default"].commit("setPopupCoordinates",this.getBoundingClientRect())})).on("mouseout",(function(){kt["select"](this).attr("stroke",i.residueColor).attr("stroke-width",0)}))}},selectStructmap:function(t){var e=this;kt["selectAll"]('[id^="residue_"')[0].map((function(t,a){var n=t.id.split("_")[3];t.id.includes("active")&&(t.id=t.id.split("_active")[0]),kt["select"](t).select("rect").attr("fill","hsl(0, 0%,"+e.densityScale(Math.log(n))+"%)")}));var a=s["default"].getters.getSecondaryStructure[0],n=t.seq_start[0],r=t.seq_end[t.seq_start.length-1],i=(r-n)*e.coverageMapsrw+e.coverageMapsrw;document.querySelector("#map > #coverageMap > rect")&&document.querySelector("#map > #coverageMap > rect").remove(),kt["select"]("#map > #coverageMap > g > #selection").attr("width",i).attr("height",30).attr("transform","translate("+(n*e.coverageMapsrw-e.coverageMapsrw)+",11)").attr("fill","white").attr("stroke","#434343").attr("stroke-width",1).attr("rx",6).attr("ry",6),a.map((function(t){if(t.end)var a=t.start,n=t.end,r=t.type;else a=t.split("\n")[0].split(":")[1].split("-")[0],n=t.split("\n")[0].split(":")[1].split("-")[1],r=t.split("\n")[0].split(":")[0];for(var s=a;s<=n;s++){var i='[id^="residue_'+s+'_"]';if(kt["select"](i+"> rect").attr({fill:e.getStructureColor(r)}),document.querySelector(i))document.querySelector(i).id=document.querySelector(i).id+"_active";else{var o={Type:"COIL"};o.start=s,o.end=s,e.drawResidues(o,e.coverageMapData),document.querySelector(i).id=document.querySelector(i).id+"_active"}}}))},setStructFeatmap:function(t){var e=this;kt["selectAll"]('[id^="residue_"')[0].map((function(t,a){var n=t.id.split("_")[3];kt["select"](t).select("rect").attr("fill","hsl(0, 0%,"+e.densityScale(Math.log(n))+"%)")}));var a=s["default"].getters.getSecondaryStructure[0],n=t.seq_start[0],r=t.seq_end[t.seq_start.length-1],i=(r-n)*e.coverageMapsrw+e.coverageMapsrw;document.querySelector("#map > #coverageMap > rect")&&document.querySelector("#map > #coverageMap > rect").remove(),kt["select"]("#map > #coverageMap > g > #selection").attr("width",i).attr("height",30).attr("transform","translate("+(n*e.coverageMapsrw-e.coverageMapsrw)+",11)").attr("fill","white").attr("stroke","#434343").attr("stroke-width",1).attr("rx",6).attr("ry",6),a.map((function(t){if(t.end)var e=t.start,a=t.end;else e=t.split("\n")[0].split(":")[1].split("-")[0],a=t.split("\n")[0].split(":")[1].split("-")[1];for(var n=e;n<=a;n++){var r='[id^="residue_'+n+'_"]';kt["select"](r+"> rect").attr({fill:"#cccccc"})}}))},getStructureColor:function(t){return"SHEET"===t?"#f6c719":"COIL"===t?"#6f9e52":"#6491b6"},drawDarkRegions:function(t){var e=[],a=this,n=ea;return t.densityMap.forEach((function(e,r){if(0===e){var i=r+1;n.append("g").attr("id","residue_"+i+"_Dark_0").append("rect").attr("transform","translate("+(i*a.coverageMapsrw-a.coverageMapsrw)+",14)").attr("width",(function(){return a.coverageMapsrw<.5?a.coverageMapsrw+.25:a.coverageMapsrw})).attr("height",30).attr("fill","#434343").attr("opacity",0).attr("stroke-width",1).on("mouseover",(function(e){a.residueColor=kt["select"](this).style("fill"),kt["select"](this).attr("stroke","white").attr("stroke-width",1),s["default"].commit("setPopupTitle","Residue "+this.parentElement.id.split("_")[1]+" : Dark region"),s["default"].commit("setDensityScore",t.densityMap),s["default"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[1]+": "),s["default"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["default"].commit("setPopupCoordinates",this.getBoundingClientRect())})).on("mouseout",(function(){s["default"].commit("setPopupCoordinates",0),kt["select"](this).attr("stroke",a.residueColor).attr("stroke-width",0)}))}})),e}}},Ca=Ia,ka=(a("e33a"),Object(C["a"])(Ca,la,ca,!1,null,"042ef6c8",null)),Ra=ka.exports,Pa=a("8ac5"),Da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.data.error?a("div",{staticClass:"ErrorPanel overlay level3",attrs:{id:"AboutError"}},[a("a",{staticClass:"close",attrs:{href:"#"},on:{click:t.loadLastSuccess}}),a("div",[a("p",{staticClass:"thetitle"},[t._v(t._s(t.data.error))]),a("p",{staticClass:"intro1"},[t._v(t._s(t.data.errorMsg)+" "),t.data.errorMsg?a("br"):t._e(),t._v(" "),t.data.errorMsg?a("br"):t._e(),t._v(" Press 'Report Issue' to tell the Aquaria team, or press 'OK' to return to previous structure.")]),a("div",[a("md-button",{staticClass:"md-raised md-primary",attrs:{href:t.lastURL}},[t._v("OK")]),a("md-button",{staticClass:"md-raised md-primary",attrs:{href:t.issuesURL,target:"_blank"}},[t._v("Report Issue")])],1)])]):t._e()},Ea=[],Oa={name:"Errors",data:function(){return{issues:"",title:"",changes:"https://github.com/aqclient/dev.aqclient.github.io/issues/new?labels=enhancement",logo:a("3198")}},computed:{data:function(){return{message:s["default"].state.message,error:s["default"].state.error,errorMsg:s["default"].state.errorMsg}},issuesURL:function(){return'https://github.com/aqclient/dev.aqclient.github.io/issues/new?title=Problem with this page&labels=bug&body=<a href="'+encodeURIComponent(window.location.href)+'">'+this.data.error+"</a>"},pageUrl:function(){return window.location.href},lastURL:function(){return window.location.origin}},methods:{loadLastSuccess:function(){window.location.pathname=localStorage.getItem("LastSuccess")?localStorage.getItem("LastSuccess"):"/P04637"}}},Ma=Oa,Va=(a("715b"),Object(C["a"])(Ma,Da,Ea,!1,null,"72919d45",null)),Ta=Va.exports,qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"HelpPanel hide dialouge-window overlay level7",attrs:{id:"UserHelp"}},[a("a",{staticClass:"close",attrs:{href:"#"},on:{click:t.closeHelp}}),a("div",{staticClass:"fill",attrs:{id:"fullwindow-video"}},t._l(t.videos,(function(e){return a("youtube",{key:e.id,ref:"youtube",refInFor:!0,staticClass:"hide",attrs:{id:e.id,"video-id":e.id},on:{paused:function(e){return t.paused(e)},ended:function(e){return t.finished(e)}}})})),1),a("div",{attrs:{id:"contents"}},[a("p",{staticClass:"thetitle"},[t._v(t._s(t.data.title))]),a("p",{staticClass:"intro"},[t._v("Watch tutorial videos to get started.")]),a("p",{staticClass:"intro"},[t._v("Skip watching tutorial videos and start using Aquaria.")]),t.data.newUser?t._e():a("Playlist",{attrs:{playlist:t.videos}}),t.data.newUser?a("div",[a("youtube",{ref:"youtube",attrs:{id:"intro-video","video-id":"FAQ3yVGYSzY"},on:{playing:function(e){return t.playing(e)},paused:function(e){return t.paused(e)},ended:function(e){return t.finished(e)}}})],1):t._e(),a("a",{attrs:{href:"#",id:"skip"},on:{click:t.closeHelp}},[t._v("Skip > ")])],1)])},La=[],Ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"playlists"}},t._l(t.playlist,(function(e){return a("span",{key:e.id,attrs:{id:e.id},on:{click:function(a){return t.play(e.id)}}},[a("div",{staticClass:"thumbnail-container"},[a("img",{attrs:{src:"https://img.youtube.com/vi/"+e.id+"/0.jpg"}}),a("button",{staticClass:"btn"},[t._v("▶")])]),a("p",[t._v(t._s(e.title))])])})),0)},Ua=[],Na={name:"Playlist",props:["playlist"],methods:{play:function(t){document.querySelector("#contents").className=" hide",document.getElementById(t).className+=" show",document.getElementById("UserHelp").classList.remove("overlay"),document.getElementById("UserHelp").classList.remove("level7"),document.getElementById("UserHelp").classList.remove("dialouge-window"),document.getElementById("UserHelp").className+=" fullwindow";for(var e=0;e<this.$parent.$children.length;e++)if(this.$parent.$children[e].$attrs.id===t)var a=e;this.$parent.$children[a].player.playVideo()}}},ja=Na,Fa=(a("4d26"),Object(C["a"])(ja,Ba,Ua,!1,null,null,null)),Ha=Fa.exports,Qa={name:"UserHelp",components:{Playlist:Ha},data:function(){return{videos:[{id:"FAQ3yVGYSzY",title:"Introduction to Aquaria"},{id:"UZNEmPOaVrA",title:"How to Calculate Distances"}]}},computed:{data:function(){return{title:s["default"].state.helpTitle,newUser:s["default"].state.newUser}}},methods:{closeHelp:function(){var t=this;if(document.querySelector("iframe.show")){var e=document.querySelector("iframe.show").id;document.getElementById("contents").classList.remove("hide"),document.getElementById(e).classList.remove("show"),document.getElementById("UserHelp").className+=" dialouge-window",document.getElementById("UserHelp").className+=" overlay",document.getElementById("UserHelp").className+=" level7",document.getElementById("UserHelp").classList.remove("fullwindow");var a={h:{}};a.h.id=e,t.paused(a)}else document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",_["RemoveOverlay"](),document.querySelector("#helpbtn").classList.contains("active")&&t.toggleActive(document.querySelector("#helpbtn"))},toggleActive:function(t){"lnk active"===t.className?t.className="lnk":t.className="lnk active"},getIndex:function(t){for(var e=0;e<this.$refs.youtube.length;e++)if(this.$refs.youtube[e].$attrs.id===t)return e},playing:function(t){if(aa=t.h.id,this.$refs.youtube.length)na=this.getIndex(aa),this.$refs.youtube[na].player.playVideo();else{this.$refs.youtube.player.playVideo();var e=document.querySelector("#intro-video"),a=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;a&&a.bind(e)()}},paused:function(t){aa=t.h.id,document.querySelector("iframe.active")?this.closeHelp():(this.$refs.youtube.length?(na=this.getIndex(aa),this.$refs.youtube[na].player.pauseVideo()):this.$refs.youtube.player.pauseVideo(),(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&document.exitFullscreen())},finished:function(t){aa=t.h.id,this.$refs.youtube.length?(na=this.getIndex(aa),this.$refs.youtube[na].player.stopVideo()):this.$refs.youtube.player.stopVideo(),document.querySelector("iframe.active")&&document.querySelector("#UserHelp a.close").click(),document.exitFullscreen(),this.closeHelp()}}},Ga=Qa,Za=(a("7f5f"),Object(C["a"])(Ga,qa,La,!1,null,null,null)),za=Za.exports,Ja=a("7d7f"),Ya=a.n(Ja),Wa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loader?a("div",{attrs:{id:"waitingFrame"}},[a("div",{attrs:{id:"waitinghtml"}},[a("img",{attrs:{src:t.overlay}}),a("p",{attrs:{id:"appletMessage"}},[t._v(" "+t._s(t.loaderMsg)+" ")])])]):t._e()},Xa=[],$a={name:"Loader",data:function(){return{overlay:a("8673")}},computed:{loader:function(){return s["default"].state.Loader},loaderMsg:function(){return s["default"].state.LoaderMsg}}},Ka=$a,tn=(a("7bd5"),Object(C["a"])(Ka,Wa,Xa,!1,null,"cb681734",null)),en=tn.exports,an=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level4",attrs:{id:"popupshell"}},[a("div",{staticClass:"level4",style:{visibility:t.data.popupTitle?"visible":"hidden"},attrs:{id:"popupbody"}},[a("div",{attrs:{id:"popupheader"},on:{mousedown:function(e){return t.dragMouseDown(e)}}},[a("span",{staticClass:"loadedPin",attrs:{id:"loadedPin"},on:{click:function(e){return t.togglePinBehaviour()}}}),a("span",{domProps:{innerHTML:t._s(t.getPopupTitle)}}),a("span",{staticClass:"x",attrs:{id:"x_close"},on:{click:t.hidePopup}})]),t.getPopupText?a("div",{attrs:{id:"content"}},[t.isVariant?a("div",{staticClass:"aaLightBg"},[t.defaultDesc?a("p",{attrs:{id:"spanDefaultDesc"}},[t._v(" "+t._s(t.defaultDesc)+" ")]):t._e(),t._l(t.oneAaCodes,(function(e){return a("div",{key:e,style:{display:e===t.variant?"block":"none"},attrs:{id:"divVarInfo_"+e}},[t._l(t.getAaDataAsArr(e),(function(e){return a("expandable-text-line",{key:e,attrs:{"use-click":""},domProps:{innerHTML:t._s(e+".")}})})),a("i",[t._v("Structures with "+t._s(t.getOldAa())+t._s(t.getVarDisplay())+t._s(e)+":")]),t._v(" "),a("span",{class:t.getIsShownVar(t.variant),on:{click:function(a){return t.showTreeView(a,e)}}},[t._v(" "+t._s(t.getPdbCount(e))+" ")])],2)})),a("hr",{staticClass:"anAaHr",attrs:{id:"anAaHr",hidden:t.isHrHidden()}}),a("div",{attrs:{id:"divPosInfo"}},[a("span",{staticClass:"weight600",domProps:{innerHTML:t._s(t.getResInfo())}}),a("br"),t._l(t.getPosInfoDataAsArr(),(function(e,n){return a("span",{key:n},[a("expandable-text-line",{attrs:{"use-click":""}},[a("i",[a("span",{domProps:{innerHTML:t._s(n)}}),t._v(": ")]),t._l(e,(function(e){return a("span",{key:e,domProps:{innerHTML:t._s(e+". ")}})}))],2)],1)})),a("i",[t._v("Structures with residue "+t._s(t.getVariant)+":")]),a("span",{class:t.getIsShownRes(),on:{click:function(e){return t.showTreeView(e)}}},[t._v(" "+t._s(t.getTotalPdbCount)+" ")])],2)],2):t._e(),t.isVariant||t.getInfoPopup?t._e():a("div",{staticClass:"aaLightBg"},[a("i",{domProps:{innerHTML:t._s(t.getPopupText)}}),t.getIsDefaultFeature?t._e():a("span",{class:t.getTotalPdbCount>0?"hasStruct":"noStruct",on:{click:function(e){t.getTotalPdbCount>0&&t.showTreeView(e,null,t.getPopupText.replace(/\D/g,""))}}},[t._v(" "+t._s(t.getTotalPdbCount)+" ")])])]):t._e(),a("div",{staticClass:"btnsDiv",style:{display:t.isVariant?"block":"none"}},[a("span",[t._v("See also:")]),t._v(" "),a("span",{staticClass:"pAaColor"},[t._v(" "+t._s(t.getOldAa())+" → ")]),t._l(t.oneAaCodes,(function(e){return a("button",{key:e,class:t.getIfBoldInfoPres(e),attrs:{id:"btnVarInfo_"+e},on:{click:function(a){return t.highlightAa(e)}}},[t._v(t._s(e))])}))],2)]),a("TreeView",{directives:[{name:"show",rawName:"v-show",value:t.showTree,expression:"showTree"}],staticClass:"level5",attrs:{id:"treeView",treeReady:t.prop,count:t.count,coordinates:t.treeCoordinates,parentElem:t.parentElem}}),a("NodeLoader",{directives:[{name:"show",rawName:"v-show",value:t.showLoader,expression:"showLoader"}],attrs:{coordinates:t.treeCoordinates,change:t.change}}),a("img",{staticClass:"show",style:{visibility:t.data.popupTitle?"visible":"hidden"},attrs:{src:t.popupTail,id:"popupTail"}})],1)},nn=[],rn={name:"PopUp",components:{TreeView:ue,ExpandableTextLine:gt["a"],NodeLoader:ge},watch:{popupCoordinates:function(t){var e=this;this.setDefault(),null!==t||0!==t?("object"===Object(xe["a"])(s["default"].state.popupText)?(e.handleVariantPopup(),e.togglePinBehaviour()):e.isVariant=!1,this.PopupPos=t):e.hidePopup()}},data:function(){return{popupTail:a("4c7a"),oneAaCodes:["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"],threeAaCodes:["Ala","Cys","Asp","Glu","Phe","Gly","His","Ile","Lys","Leu","Met","Asn","Pro","Gln","Arg","Ser","Thr","Val","Trp","Tyr"],isVariant:!1,variant:null,defaultDesc:null,treeCoordinates:{},change:0,showTree:!1,isShowTreeViewClicked:!1,prop:null,showLoader:!1,count:0,PopupPos:null,pos:[0,0,0,0],hasVariant:!1,hasResidue:!1,parentElem:"#popupshell"}},computed:Object(A["a"])(Object(A["a"])({popupCoordinates:function(){return s["default"].state.popupCoordinates},data:function(){return{variantStructs:s["default"].state.variantStructs,variantResidues:s["default"].state.variantResidues,popupTitle:s["default"].state.popupTitle,popupText:s["default"].state.popupText,residue:s["default"].state.residue,popupCoordinates:s["default"].state.popupCoordinates}}},Object(S["b"])(["getGene","getTotalPDBres","getVariant","getVariantStructs","getVariantResidues","getPopupTitle","getPopupText","getServersDone","getVariantIdx","getMatches","getStructure","getInfoPopup","getIsDefaultFeature"])),{},{getTotalPdbCount:function(){var t=this;if(t.isVariant){for(var e=0,a=0;a<t.oneAaCodes.length;a++)t.getVariantStructs&&t.getVariant&&Object.hasOwnProperty.call(t.getVariantStructs,t.getVariant)&&Object.hasOwnProperty.call(t.getVariantStructs[t.getVariant],t.oneAaCodes[a])&&Object.hasOwnProperty.call(t.getVariantStructs[t.getVariant][t.oneAaCodes[a]],"pdbs")&&(e+=t.getVariantStructs[t.getVariant][t.oneAaCodes[a]].pdbs.length);return e}return t.getTotalPDBres}}),created:function(){var t=this;window.addEventListener("click",(function(e){if(!t.$el.contains(e.target)&&e.target.parentElement&&t.getPopupTitle&&!e.target.parentElement.id.includes("tree")){var a=document.getElementById("loadedPin");if(a.classList.contains("loadedPin")){var n=document.getElementById("x_close");n.click()}}}))},methods:{setPopupPos:function(t){this.getPopupTitle.includes("Dark")&&(t.y=t.y+20);var e=t.x-document.querySelector("#popupTail").getBoundingClientRect().width/2+t.width/2;document.querySelector("#popupTail").style.left=e+"px",t.height<=2?document.querySelector("#popupshell").style.top=t.y-t.height-document.querySelector("#popupTail").getBoundingClientRect().height+"px":t.height>=18?document.querySelector("#popupshell").style.top=t.y-t.height+5+"px":document.querySelector("#popupshell").style.top=t.y-t.height+"px",document.querySelector("#popupshell").style.left=e-10+"px";var a=document.querySelector("#popupshell").getBoundingClientRect().x+document.querySelector("#popupbody").getBoundingClientRect().width;a>window.innerWidth&&(document.querySelector("#popupshell").style.left=window.innerWidth-document.querySelector("#popupbody").getBoundingClientRect().width+7+"px"),document.querySelector("#popupbody").getBoundingClientRect().x<0&&(document.querySelector("#popupshell").style.left="-10px")},hidePopup:function(){var t=this;this.isShowTreeViewClicked?this.isShowTreeViewClicked=!1:s["default"].commit("setPopupTitle",""),this.getVariantStructs&&t.resetToInitVar()},setDefault:function(){var t=document.getElementById("loadedPin");t.classList.contains("loadedPin_active")&&(t.classList.remove("loadedPin_active"),t.classList.add("loadedPin"));var e=document.getElementById("popupTail");e.classList.contains("hide")&&(e.classList.remove("hide"),e.classList.add("show")),document.getElementById("popupshell").classList.remove("fade")},handleVariantPopup:function(){this.isVariant=!0,this.variant=this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase(),this.defaultDesc=this.getDefaultDesc(),this.handleInitAa()},showTreeView:function(t,e,a){this.isShowTreeViewClicked=!0;var n=this,r=t.srcElement.getBoundingClientRect();if(n.treeCoordinates.clientX=r.left,n.treeCoordinates.clientY=r.top,n.treeCoordinates.width=r.width,n.treeCoordinates.height=r.height,n.change=n.change+1,n.showLoader=!0,n.getVariantStructs&&Object.hasOwnProperty.call(n.getVariantStructs,n.getVariant)){n.count=e?n.getPdbCount(e):n.getTotalPdbCount;var s="".concat(window.BACKEND,"/secondaryClusteringByResidue"),i={};i.selector=[n.getStructure.accession],i.sortedKeys=a?[parseInt(a)]:[n.getVariant],e&&(i.aaCode=e),X()({method:"get",url:s,params:i}).then((function(t){console.log(t.data),n.showTree=!0,n.prop=t.data}))}else{s="".concat(window.BACKEND,"/secondaryClusteringByResidue"),n.count=n.getTotalPdbCount,i={},i.selector=[n.getStructure.accession];var o=t.srcElement.parentElement.innerText.split(":");o.length>2?i.sortedKeys=[parseInt(o[1].split("residue ")[1])]:i.sortedKeys=[parseInt(o[0].split("residue ")[1])],X()({method:"get",url:s,params:i}).then((function(t){console.log(t.data),n.showTree=!0,n.prop=t.data}))}return 0},getOldAa:function(){return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"oldAa")?this.getVariantResidues[this.getVariant].oldAa:""},highlightAa:function(t){this.variant=t.toUpperCase();for(var e=0;e<this.oneAaCodes.length;e++)document.getElementById("btnVarInfo_"+this.oneAaCodes[e]).classList.remove("selCol");if(document.getElementById("btnVarInfo_"+t.toUpperCase()).classList+=" selCol",document.querySelector("#varSpe_toRep")&&(document.querySelector("#varSpe_toRep").innerText=t),document.querySelector("#newAa")){var a=this.oneAaCodes.indexOf(t);document.querySelector("#newAa").innerText=this.threeAaCodes[a]}},getIfBoldInfoPres:function(t){var e=!1;if(Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],t))for(var a=0;a<this.getVariantResidues[this.getVariant][t].length;a++)this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")&&this.getVariantStructs[this.getVariant][t].pdbs.length>0&&(e=!0);if(this.getVariantResidues&&this.getVariant>0)return!0===e?t.toUpperCase().includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())?"btnAaBold_b selCol":"btnAaBold_b":t.toUpperCase().includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())?"btnAaBold selCol":"btnAaBold"},getAaDataAsArr:function(t){var e=[];if(Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],t)){for(var a=0;a<this.getVariantResidues[this.getVariant][t].length;a++);return this.getVariantResidues[this.getVariant][t]}return e},resetToInitVar:function(){Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"theOrigFeatStr")&&this.getVariantIdx>-1&&(document.getElementById("urlVariant").innerHTML=this.getVariantResidues[this.getVariant].theOrigFeatStr[this.getVariantIdx]),Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"consequent")&&this.getVariantIdx>-1&&(document.getElementById("consInfo").innerHTML=this.getVariantResidues[this.getVariant].consequent[this.getVariantIdx]),this.handleInitAa(),document.getElementById("spanDefaultDesc")&&(document.getElementById("spanDefaultDesc").hidden=!1),!0===this.isHrHidden()&&(document.getElementById("anAaHr").hidden=!0)},getVarDisplay:function(){return"string"===typeof this.getVariant&&this.getVariant.match("-")?this.getVariant.split("-")[0]:this.getVariant},getIsShownVar:function(t){if(this.getMatches&&Object.hasOwnProperty.call(this.getMatches,"Selected_PDB")&&Object.hasOwnProperty.call(this.getMatches.Selected_PDB,"pdb_id")&&Object.hasOwnProperty.call(this.getMatches.Selected_PDB,"pdb_chain")){var e=this.getMatches.Selected_PDB.pdb_id+":"+this.getMatches.Selected_PDB.pdb_chain;return this.getVariant&&this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")&&this.getVariantStructs[this.getVariant][t].pdbs.includes(e)?"selCol_padded":this.getVariant&&this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")&&!this.getVariantStructs[this.getVariant][t].pdbs.includes(e)?"noSelCol_padded":""}},getIsShownRes:function(){return console.log("The variant structs is "),console.log(this.getVariantStructs),console.log(this.getMatches),this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],"isShown")&&!0===this.getVariantStructs[this.getVariant].isShown?"selCol_padded":this.getVariantStructs&&this.getVariant>-1&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],"isShown")&&!1===this.getVariantStructs[this.getVariant].isShown||0!==this.getTotalPdbCount?"noSelCol_padded":""},getPdbCount:function(t){return this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")?this.getVariantStructs[this.getVariant][t].pdbs.length:0},isHrHidden:function(){var t=this.getDefaultDesc(),e=!1;return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"newAas")&&this.getVariantIdx>-1&&this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())&&(e=!0),""===t&&!1===e},getDefaultDesc:function(){return this.getVariant&&this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"defaultDesc")&&this.getVariantIdx>-1?this.getVariantResidues[this.getVariant].defaultDesc[this.getVariantIdx]:""},getPosInfoDataAsArr:function(){return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"positionInfo")?this.getVariantResidues[this.getVariant].positionInfo:[]},handleInitAa:function(){var t=this;if(console.log("handleInitAa runs "),console.log(this.getVariantIdx),Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"newAas")&&this.getVariantIdx>-1&&this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase()))t.highlightAa(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase());else{this.getOldAa();for(var e=0;e<this.oneAaCodes.length;e++){var a=document.getElementById("divVarInfo_"+this.oneAaCodes[e]);"undefined"!==typeof a&&null!==a&&(document.getElementById("divVarInfo_"+this.oneAaCodes[e]).hidden=!0,document.getElementById("btnVarInfo_"+this.oneAaCodes[e]).classList.remove("selCol")),this.oneAaCodes[e]}t.updateSpanAa("")}},updateSpanAa:function(t){if(console.log("Value to display is "+t+this.getVariantIdx),document.getElementById("span_missenseHeading"))if(this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"isOne")&&this.getVariantIdx>-1&&!0===this.getVariantResidues[this.getVariant].isOne[this.getVariantIdx]){var e=this.oneAaCodes.indexOf(t);document.getElementById("newAa").innerHTML=-1!==e?this.threeAaCodes[e]:""}else document.getElementById("newAa").innerHTML=t},togglePinBehaviour:function(){var t=document.getElementById("loadedPin");t.classList.contains("loadedPin_active")?(t.classList.remove("loadedPin_active"),t.classList.add("loadedPin")):t.classList.contains("loadedPin")&&(t.classList.remove("loadedPin"),t.classList.add("loadedPin_active"))},dragMouseDown:function(t){t=t||window.event,t.preventDefault(),this.pos[2]=t.clientX,this.pos[3]=t.clientY,document.onmouseup=this.closeDragElement,document.onmousemove=this.elementDrag},elementDrag:function(t){t=t||window.event,t.preventDefault();var e=document.getElementById("popupshell");this.pos[0]=this.pos[2]-t.clientX,this.pos[1]=this.pos[3]-t.clientY,this.pos[2]=t.clientX,this.pos[3]=t.clientY,e.style.top=e.offsetTop-this.pos[1]+"px",e.style.left=e.offsetLeft-this.pos[0]+"px";var a=document.getElementById("popupTail");a.classList.contains("show")&&(a.classList.remove("show"),a.classList.add("hide"))},closeDragElement:function(){document.onmouseup=null,document.onmousemove=null},getResInfo:function(){var t=window.AQUARIA.panel3d.joleculeAlignment,e=window.AQUARIA.panel3d.embededJolecule.controller,a=t.mapSeqResToPdbResOfChain(0,this.getVariant,this.getStructure.chain);if(a){var n=e.soup.findResidueIndices(0,a[1],a[2]),r=e.soup.getResidueProxy().load(n).resType;return r=r.substr(0,1)+r.substr(1).toLowerCase(),this.getGene+" residue "+this.getVariant+'<span style="font-weight: 400; color: #a6a5a6;"> ('+this.getStructure.pdb+"-"+this.getStructure.chain+" residue "+r+"-"+a[2]+")"}return this.getGene+" residue "+this.getVariant+'<span style="font-weight: 400; color: #a6a5a6;"> ( Dark region )'}},updated:function(){null!==this.PopupPos&&this.setPopupPos(this.PopupPos)}},sn=rn,on=(a("0b4c"),a("05b9"),Object(C["a"])(sn,an,nn,!1,null,"f595311c",null)),ln=on.exports,cn=a("5e83"),un={name:"Wrapper",components:{GdprConsentModal:cn["a"],Header:j,Sequence:xt,AboutAlignment:Ot,AboutPdb:Bt,StructureViewer:Qt,Tabs:oa,CoverageMap:Ra,PopUp:ln,AboutAquaria:Pa["a"],Errors:Ta,UserHelp:za,Loader:en},props:["urlRequest"],computed:{data:function(){return{hash:s["default"].state.hash,arrayOfVideos:["https://youtu.be/FAQ3yVGYSzY?list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e","https://www.youtube.com/watch?v=UZNEmPOaVrA&list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e&index=2"]}}},methods:{closeHelp:function(){var t=this;document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",document.querySelector(".dimmer").style.display="none",document.querySelector("#helpbtn").classList.contains("active")&&(_["RemoveOverlay"](),t.toggleActive(document.querySelector("#helpbtn")))},checkPhone:function(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(t.length)if(navigator.platform===t.pop()||screen.width>=300&&screen.width<=600)return!0},inspectHeight:function(){document.querySelector("#heightinspector").innerHTML="reset";var t=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+t+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight},dismissPanel:function(){document.querySelector("#scrim").className="hide",this.$store.commit("setScrim",!1)},toggleActive:function(t){"lnk active"===t.className&&(t.className="lnk")}},mounted:function(){window.AQUARIA.panel3d=new Ya.a("#threeDSpan",i["chainSelected"]),window.scrollBy(0,100),i["loadAccession"]([this.$props.urlRequest.uniprotAccession],this.$props.urlRequest.pdbID,this.$props.urlRequest.chain),window.addEventListener("resize",(function(){window.scrollBy(0,100),document.querySelector("#vis > .ruler").remove(),document.querySelectorAll("#vis > #allclusters .outer_container").forEach((function(t){return t.remove()})),window.AQUARIA.refresh();var t=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+t+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight})),setTimeout((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}),1500)},updated:function(){}},dn=un,pn=(a("8f89"),Object(C["a"])(dn,n,r,!1,null,null,null));e["default"]=pn.exports},ae7d:function(t,e,a){t.exports=a.p+"img/node.cac6f4f6.gif"},b335:function(t,e,a){t.exports=a.p+"img/aquaria-menu.1a89fbab.svg"},b3c8:function(t,e,a){(function(t){a("ac1f"),a("5319"),t.fn.digits=function(){return this.each((function(){t(this).text(t(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))}))},t(document).ready((function(){t("#protein_syn_input, #organism_syn_input").focus((function(){t(".infocus").removeClass("infocus"),t("#searchByName").addClass("infocus")})),t("#help3D").hide()})),t((function(){t(document).tooltip({position:{my:"right top+15",at:"right center",collision:"none"}},{show:{delay:1200}})}))}).call(this,a("1157"))},be77:function(t,e,a){"use strict";a("4481")},bf44:function(t,e,a){"use strict";a("c9a6")},c48f:function(t,e,a){},c9a6:function(t,e,a){},d2f8:function(t,e,a){"use strict";a("4ace")},d7e4:function(t,e,a){"use strict";a("ac9e")},e1df:function(t,e,a){},e26a:function(t,e,a){},e33a:function(t,e,a){"use strict";a("9426")},e352:function(t,e,a){},e5d1:function(t,e,a){},ea62:function(t,e,a){},f760:function(t,e,a){"use strict";a("8f69")},fc7c:function(t,e,a){"use strict";a("e352")}}]);
//# sourceMappingURL=wrapper.f9994ebe.js.map